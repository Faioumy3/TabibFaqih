(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();function mg(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var hh={exports:{}},ra={},dh={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wp;function hv(){if(Wp)return Ne;Wp=1;var s=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),R=Symbol.iterator;function D(S){return S===null||typeof S!="object"?null:(S=R&&S[R]||S["@@iterator"],typeof S=="function"?S:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,H={};function B(S,$,de){this.props=S,this.context=$,this.refs=H,this.updater=de||z}B.prototype.isReactComponent={},B.prototype.setState=function(S,$){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,$,"setState")},B.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function ne(){}ne.prototype=B.prototype;function ae(S,$,de){this.props=S,this.context=$,this.refs=H,this.updater=de||z}var me=ae.prototype=new ne;me.constructor=ae,X(me,B.prototype),me.isPureReactComponent=!0;var Ce=Array.isArray,Le=Object.prototype.hasOwnProperty,K={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function I(S,$,de){var le,_e={},ve=null,xe=null;if($!=null)for(le in $.ref!==void 0&&(xe=$.ref),$.key!==void 0&&(ve=""+$.key),$)Le.call($,le)&&!k.hasOwnProperty(le)&&(_e[le]=$[le]);var Re=arguments.length-2;if(Re===1)_e.children=de;else if(1<Re){for(var $e=Array(Re),it=0;it<Re;it++)$e[it]=arguments[it+2];_e.children=$e}if(S&&S.defaultProps)for(le in Re=S.defaultProps,Re)_e[le]===void 0&&(_e[le]=Re[le]);return{$$typeof:s,type:S,key:ve,ref:xe,props:_e,_owner:K.current}}function x(S,$){return{$$typeof:s,type:S.type,key:$,ref:S.ref,props:S.props,_owner:S._owner}}function P(S){return typeof S=="object"&&S!==null&&S.$$typeof===s}function N(S){var $={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(de){return $[de]})}var j=/\/+/g;function C(S,$){return typeof S=="object"&&S!==null&&S.key!=null?N(""+S.key):$.toString(36)}function ze(S,$,de,le,_e){var ve=typeof S;(ve==="undefined"||ve==="boolean")&&(S=null);var xe=!1;if(S===null)xe=!0;else switch(ve){case"string":case"number":xe=!0;break;case"object":switch(S.$$typeof){case s:case e:xe=!0}}if(xe)return xe=S,_e=_e(xe),S=le===""?"."+C(xe,0):le,Ce(_e)?(de="",S!=null&&(de=S.replace(j,"$&/")+"/"),ze(_e,$,de,"",function(it){return it})):_e!=null&&(P(_e)&&(_e=x(_e,de+(!_e.key||xe&&xe.key===_e.key?"":(""+_e.key).replace(j,"$&/")+"/")+S)),$.push(_e)),1;if(xe=0,le=le===""?".":le+":",Ce(S))for(var Re=0;Re<S.length;Re++){ve=S[Re];var $e=le+C(ve,Re);xe+=ze(ve,$,de,$e,_e)}else if($e=D(S),typeof $e=="function")for(S=$e.call(S),Re=0;!(ve=S.next()).done;)ve=ve.value,$e=le+C(ve,Re++),xe+=ze(ve,$,de,$e,_e);else if(ve==="object")throw $=String(S),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return xe}function ft(S,$,de){if(S==null)return S;var le=[],_e=0;return ze(S,le,"","",function(ve){return $.call(de,ve,_e++)}),le}function xt(S){if(S._status===-1){var $=S._result;$=$(),$.then(function(de){(S._status===0||S._status===-1)&&(S._status=1,S._result=de)},function(de){(S._status===0||S._status===-1)&&(S._status=2,S._result=de)}),S._status===-1&&(S._status=0,S._result=$)}if(S._status===1)return S._result.default;throw S._result}var Ge={current:null},ee={transition:null},fe={ReactCurrentDispatcher:Ge,ReactCurrentBatchConfig:ee,ReactCurrentOwner:K};function se(){throw Error("act(...) is not supported in production builds of React.")}return Ne.Children={map:ft,forEach:function(S,$,de){ft(S,function(){$.apply(this,arguments)},de)},count:function(S){var $=0;return ft(S,function(){$++}),$},toArray:function(S){return ft(S,function($){return $})||[]},only:function(S){if(!P(S))throw Error("React.Children.only expected to receive a single React element child.");return S}},Ne.Component=B,Ne.Fragment=n,Ne.Profiler=a,Ne.PureComponent=ae,Ne.StrictMode=i,Ne.Suspense=y,Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fe,Ne.act=se,Ne.cloneElement=function(S,$,de){if(S==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+S+".");var le=X({},S.props),_e=S.key,ve=S.ref,xe=S._owner;if($!=null){if($.ref!==void 0&&(ve=$.ref,xe=K.current),$.key!==void 0&&(_e=""+$.key),S.type&&S.type.defaultProps)var Re=S.type.defaultProps;for($e in $)Le.call($,$e)&&!k.hasOwnProperty($e)&&(le[$e]=$[$e]===void 0&&Re!==void 0?Re[$e]:$[$e])}var $e=arguments.length-2;if($e===1)le.children=de;else if(1<$e){Re=Array($e);for(var it=0;it<$e;it++)Re[it]=arguments[it+2];le.children=Re}return{$$typeof:s,type:S.type,key:_e,ref:ve,props:le,_owner:xe}},Ne.createContext=function(S){return S={$$typeof:d,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},S.Provider={$$typeof:c,_context:S},S.Consumer=S},Ne.createElement=I,Ne.createFactory=function(S){var $=I.bind(null,S);return $.type=S,$},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(S){return{$$typeof:m,render:S}},Ne.isValidElement=P,Ne.lazy=function(S){return{$$typeof:T,_payload:{_status:-1,_result:S},_init:xt}},Ne.memo=function(S,$){return{$$typeof:v,type:S,compare:$===void 0?null:$}},Ne.startTransition=function(S){var $=ee.transition;ee.transition={};try{S()}finally{ee.transition=$}},Ne.unstable_act=se,Ne.useCallback=function(S,$){return Ge.current.useCallback(S,$)},Ne.useContext=function(S){return Ge.current.useContext(S)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(S){return Ge.current.useDeferredValue(S)},Ne.useEffect=function(S,$){return Ge.current.useEffect(S,$)},Ne.useId=function(){return Ge.current.useId()},Ne.useImperativeHandle=function(S,$,de){return Ge.current.useImperativeHandle(S,$,de)},Ne.useInsertionEffect=function(S,$){return Ge.current.useInsertionEffect(S,$)},Ne.useLayoutEffect=function(S,$){return Ge.current.useLayoutEffect(S,$)},Ne.useMemo=function(S,$){return Ge.current.useMemo(S,$)},Ne.useReducer=function(S,$,de){return Ge.current.useReducer(S,$,de)},Ne.useRef=function(S){return Ge.current.useRef(S)},Ne.useState=function(S){return Ge.current.useState(S)},Ne.useSyncExternalStore=function(S,$,de){return Ge.current.useSyncExternalStore(S,$,de)},Ne.useTransition=function(){return Ge.current.useTransition()},Ne.version="18.3.1",Ne}var Gp;function Jh(){return Gp||(Gp=1,dh.exports=hv()),dh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qp;function dv(){if(Qp)return ra;Qp=1;var s=Jh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,a=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(m,y,v){var T,R={},D=null,z=null;v!==void 0&&(D=""+v),y.key!==void 0&&(D=""+y.key),y.ref!==void 0&&(z=y.ref);for(T in y)i.call(y,T)&&!c.hasOwnProperty(T)&&(R[T]=y[T]);if(m&&m.defaultProps)for(T in y=m.defaultProps,y)R[T]===void 0&&(R[T]=y[T]);return{$$typeof:e,type:m,key:D,ref:z,props:R,_owner:a.current}}return ra.Fragment=n,ra.jsx=d,ra.jsxs=d,ra}var Kp;function fv(){return Kp||(Kp=1,hh.exports=dv()),hh.exports}var w=fv(),Ee=Jh();const pv=mg(Ee);var Gl={},fh={exports:{}},Zt={},ph={exports:{}},mh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xp;function mv(){return Xp||(Xp=1,(function(s){function e(ee,fe){var se=ee.length;ee.push(fe);e:for(;0<se;){var S=se-1>>>1,$=ee[S];if(0<a($,fe))ee[S]=fe,ee[se]=$,se=S;else break e}}function n(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var fe=ee[0],se=ee.pop();if(se!==fe){ee[0]=se;e:for(var S=0,$=ee.length,de=$>>>1;S<de;){var le=2*(S+1)-1,_e=ee[le],ve=le+1,xe=ee[ve];if(0>a(_e,se))ve<$&&0>a(xe,_e)?(ee[S]=xe,ee[ve]=se,S=ve):(ee[S]=_e,ee[le]=se,S=le);else if(ve<$&&0>a(xe,se))ee[S]=xe,ee[ve]=se,S=ve;else break e}}return fe}function a(ee,fe){var se=ee.sortIndex-fe.sortIndex;return se!==0?se:ee.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();s.unstable_now=function(){return d.now()-m}}var y=[],v=[],T=1,R=null,D=3,z=!1,X=!1,H=!1,B=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,ae=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function me(ee){for(var fe=n(v);fe!==null;){if(fe.callback===null)i(v);else if(fe.startTime<=ee)i(v),fe.sortIndex=fe.expirationTime,e(y,fe);else break;fe=n(v)}}function Ce(ee){if(H=!1,me(ee),!X)if(n(y)!==null)X=!0,xt(Le);else{var fe=n(v);fe!==null&&Ge(Ce,fe.startTime-ee)}}function Le(ee,fe){X=!1,H&&(H=!1,ne(I),I=-1),z=!0;var se=D;try{for(me(fe),R=n(y);R!==null&&(!(R.expirationTime>fe)||ee&&!N());){var S=R.callback;if(typeof S=="function"){R.callback=null,D=R.priorityLevel;var $=S(R.expirationTime<=fe);fe=s.unstable_now(),typeof $=="function"?R.callback=$:R===n(y)&&i(y),me(fe)}else i(y);R=n(y)}if(R!==null)var de=!0;else{var le=n(v);le!==null&&Ge(Ce,le.startTime-fe),de=!1}return de}finally{R=null,D=se,z=!1}}var K=!1,k=null,I=-1,x=5,P=-1;function N(){return!(s.unstable_now()-P<x)}function j(){if(k!==null){var ee=s.unstable_now();P=ee;var fe=!0;try{fe=k(!0,ee)}finally{fe?C():(K=!1,k=null)}}else K=!1}var C;if(typeof ae=="function")C=function(){ae(j)};else if(typeof MessageChannel<"u"){var ze=new MessageChannel,ft=ze.port2;ze.port1.onmessage=j,C=function(){ft.postMessage(null)}}else C=function(){B(j,0)};function xt(ee){k=ee,K||(K=!0,C())}function Ge(ee,fe){I=B(function(){ee(s.unstable_now())},fe)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(ee){ee.callback=null},s.unstable_continueExecution=function(){X||z||(X=!0,xt(Le))},s.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<ee?Math.floor(1e3/ee):5},s.unstable_getCurrentPriorityLevel=function(){return D},s.unstable_getFirstCallbackNode=function(){return n(y)},s.unstable_next=function(ee){switch(D){case 1:case 2:case 3:var fe=3;break;default:fe=D}var se=D;D=fe;try{return ee()}finally{D=se}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(ee,fe){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var se=D;D=ee;try{return fe()}finally{D=se}},s.unstable_scheduleCallback=function(ee,fe,se){var S=s.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?S+se:S):se=S,ee){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=se+$,ee={id:T++,callback:fe,priorityLevel:ee,startTime:se,expirationTime:$,sortIndex:-1},se>S?(ee.sortIndex=se,e(v,ee),n(y)===null&&ee===n(v)&&(H?(ne(I),I=-1):H=!0,Ge(Ce,se-S))):(ee.sortIndex=$,e(y,ee),X||z||(X=!0,xt(Le))),ee},s.unstable_shouldYield=N,s.unstable_wrapCallback=function(ee){var fe=D;return function(){var se=D;D=fe;try{return ee.apply(this,arguments)}finally{D=se}}}})(mh)),mh}var Yp;function gv(){return Yp||(Yp=1,ph.exports=mv()),ph.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jp;function yv(){if(Jp)return Zt;Jp=1;var s=Jh(),e=gv();function n(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,a={};function c(t,r){d(t,r),d(t+"Capture",r)}function d(t,r){for(a[t]=r,t=0;t<r.length;t++)i.add(r[t])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,T={},R={};function D(t){return y.call(R,t)?!0:y.call(T,t)?!1:v.test(t)?R[t]=!0:(T[t]=!0,!1)}function z(t,r,o,u){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return u?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function X(t,r,o,u){if(r===null||typeof r>"u"||z(t,r,o,u))return!0;if(u)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function H(t,r,o,u,h,f,_){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=u,this.attributeNamespace=h,this.mustUseProperty=o,this.propertyName=t,this.type=r,this.sanitizeURL=f,this.removeEmptyString=_}var B={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){B[t]=new H(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];B[r]=new H(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){B[t]=new H(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){B[t]=new H(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){B[t]=new H(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){B[t]=new H(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){B[t]=new H(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){B[t]=new H(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){B[t]=new H(t,5,!1,t.toLowerCase(),null,!1,!1)});var ne=/[\-:]([a-z])/g;function ae(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(ne,ae);B[r]=new H(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(ne,ae);B[r]=new H(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(ne,ae);B[r]=new H(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){B[t]=new H(t,1,!1,t.toLowerCase(),null,!1,!1)}),B.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){B[t]=new H(t,1,!1,t.toLowerCase(),null,!0,!0)});function me(t,r,o,u){var h=B.hasOwnProperty(r)?B[r]:null;(h!==null?h.type!==0:u||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(X(r,o,h,u)&&(o=null),u||h===null?D(r)&&(o===null?t.removeAttribute(r):t.setAttribute(r,""+o)):h.mustUseProperty?t[h.propertyName]=o===null?h.type===3?!1:"":o:(r=h.attributeName,u=h.attributeNamespace,o===null?t.removeAttribute(r):(h=h.type,o=h===3||h===4&&o===!0?"":""+o,u?t.setAttributeNS(u,r,o):t.setAttribute(r,o))))}var Ce=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Le=Symbol.for("react.element"),K=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),N=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),ze=Symbol.for("react.suspense_list"),ft=Symbol.for("react.memo"),xt=Symbol.for("react.lazy"),Ge=Symbol.for("react.offscreen"),ee=Symbol.iterator;function fe(t){return t===null||typeof t!="object"?null:(t=ee&&t[ee]||t["@@iterator"],typeof t=="function"?t:null)}var se=Object.assign,S;function $(t){if(S===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);S=r&&r[1]||""}return`
`+S+t}var de=!1;function le(t,r){if(!t||de)return"";de=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(F){var u=F}Reflect.construct(t,[],r)}else{try{r.call()}catch(F){u=F}t.call(r.prototype)}else{try{throw Error()}catch(F){u=F}t()}}catch(F){if(F&&u&&typeof F.stack=="string"){for(var h=F.stack.split(`
`),f=u.stack.split(`
`),_=h.length-1,A=f.length-1;1<=_&&0<=A&&h[_]!==f[A];)A--;for(;1<=_&&0<=A;_--,A--)if(h[_]!==f[A]){if(_!==1||A!==1)do if(_--,A--,0>A||h[_]!==f[A]){var V=`
`+h[_].replace(" at new "," at ");return t.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",t.displayName)),V}while(1<=_&&0<=A);break}}}finally{de=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?$(t):""}function _e(t){switch(t.tag){case 5:return $(t.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return t=le(t.type,!1),t;case 11:return t=le(t.type.render,!1),t;case 1:return t=le(t.type,!0),t;default:return""}}function ve(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case k:return"Fragment";case K:return"Portal";case x:return"Profiler";case I:return"StrictMode";case C:return"Suspense";case ze:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case N:return(t.displayName||"Context")+".Consumer";case P:return(t._context.displayName||"Context")+".Provider";case j:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ft:return r=t.displayName||null,r!==null?r:ve(t.type)||"Memo";case xt:r=t._payload,t=t._init;try{return ve(t(r))}catch{}}return null}function xe(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(r);case 8:return r===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Re(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function $e(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function it(t){var r=$e(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),u=""+t[r];if(!t.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,f=o.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(_){u=""+_,f.call(this,_)}}),Object.defineProperty(t,r,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(_){u=""+_},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function ti(t){t._valueTracker||(t._valueTracker=it(t))}function lo(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return t&&(u=$e(t)?t.checked?"true":"false":t.value),t=u,t!==o?(r.setValue(t),!0):!1}function Pr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ni(t,r){var o=r.checked;return se({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function Va(t,r){var o=r.defaultValue==null?"":r.defaultValue,u=r.checked!=null?r.checked:r.defaultChecked;o=Re(r.value!=null?r.value:o),t._wrapperState={initialChecked:u,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function ri(t,r){r=r.checked,r!=null&&me(t,"checked",r,!1)}function vs(t,r){ri(t,r);var o=Re(r.value),u=r.type;if(o!=null)u==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?pt(t,r.type,o):r.hasOwnProperty("defaultValue")&&pt(t,r.type,Re(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function uo(t,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var u=r.type;if(!(u!=="submit"&&u!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,o||r===t.value||(t.value=r),t.defaultValue=r}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function pt(t,r,o){(r!=="number"||Pr(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var lt=Array.isArray;function In(t,r,o,u){if(t=t.options,r){r={};for(var h=0;h<o.length;h++)r["$"+o[h]]=!0;for(o=0;o<t.length;o++)h=r.hasOwnProperty("$"+t[o].value),t[o].selected!==h&&(t[o].selected=h),h&&u&&(t[o].defaultSelected=!0)}else{for(o=""+Re(o),r=null,h=0;h<t.length;h++){if(t[h].value===o){t[h].selected=!0,u&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function co(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(n(91));return se({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ho(t,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(n(92));if(lt(o)){if(1<o.length)throw Error(n(93));o=o[0]}r=o}r==null&&(r=""),o=r}t._wrapperState={initialValue:Re(o)}}function Da(t,r){var o=Re(r.value),u=Re(r.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),r.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),u!=null&&(t.defaultValue=""+u)}function kr(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function fo(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function si(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?fo(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Vr,Ma=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,u,h){MSApp.execUnsafeLocalFunction(function(){return t(r,o,u,h)})}:t})(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(Vr=Vr||document.createElement("div"),Vr.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Vr.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function ws(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var Dr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ja=["Webkit","ms","Moz","O"];Object.keys(Dr).forEach(function(t){ja.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),Dr[r]=Dr[t]})});function Mr(t,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||Dr.hasOwnProperty(t)&&Dr[t]?(""+r).trim():r+"px"}function ii(t,r){t=t.style;for(var o in r)if(r.hasOwnProperty(o)){var u=o.indexOf("--")===0,h=Mr(o,r[o],u);o==="float"&&(o="cssFloat"),u?t.setProperty(o,h):t[o]=h}}var po=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function An(t,r){if(r){if(po[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(n(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(n(61))}if(r.style!=null&&typeof r.style!="object")throw Error(n(62))}}function oi(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jr=null;function ai(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var lr=null,ur=null,ot=null;function mo(t){if(t=Bo(t)){if(typeof lr!="function")throw Error(n(280));var r=t.stateNode;r&&(r=ll(r),lr(t.stateNode,t.type,r))}}function Lr(t){ur?ot?ot.push(t):ot=[t]:ur=t}function Or(){if(ur){var t=ur,r=ot;if(ot=ur=null,mo(t),r)for(t=0;t<r.length;t++)mo(r[t])}}function La(t,r){return t(r)}function Oa(){}var Ln=!1;function ba(t,r,o){if(Ln)return t(r,o);Ln=!0;try{return La(t,r,o)}finally{Ln=!1,(ur!==null||ot!==null)&&(Oa(),Or())}}function Es(t,r){var o=t.stateNode;if(o===null)return null;var u=ll(o);if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(n(231,r,typeof o));return o}var br=!1;if(m)try{var Fr={};Object.defineProperty(Fr,"passive",{get:function(){br=!0}}),window.addEventListener("test",Fr,Fr),window.removeEventListener("test",Fr,Fr)}catch{br=!1}function Fa(t,r,o,u,h,f,_,A,V){var F=Array.prototype.slice.call(arguments,3);try{r.apply(o,F)}catch(Q){this.onError(Q)}}var cr=!1,On=null,li=!1,mn=null,Ua={onError:function(t){cr=!0,On=t}};function za(t,r,o,u,h,f,_,A,V){cr=!1,On=null,Fa.apply(Ua,arguments)}function go(t,r,o,u,h,f,_,A,V){if(za.apply(this,arguments),cr){if(cr){var F=On;cr=!1,On=null}else throw Error(n(198));li||(li=!0,mn=F)}}function Cn(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function yo(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function Ba(t){if(Cn(t)!==t)throw Error(n(188))}function $a(t){var r=t.alternate;if(!r){if(r=Cn(t),r===null)throw Error(n(188));return r!==t?null:t}for(var o=t,u=r;;){var h=o.return;if(h===null)break;var f=h.alternate;if(f===null){if(u=h.return,u!==null){o=u;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===o)return Ba(h),t;if(f===u)return Ba(h),r;f=f.sibling}throw Error(n(188))}if(o.return!==u.return)o=h,u=f;else{for(var _=!1,A=h.child;A;){if(A===o){_=!0,o=h,u=f;break}if(A===u){_=!0,u=h,o=f;break}A=A.sibling}if(!_){for(A=f.child;A;){if(A===o){_=!0,o=f,u=h;break}if(A===u){_=!0,u=f,o=h;break}A=A.sibling}if(!_)throw Error(n(189))}}if(o.alternate!==u)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?t:r}function qa(t){return t=$a(t),t!==null?Ts(t):null}function Ts(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=Ts(t);if(r!==null)return r;t=t.sibling}return null}var _o=e.unstable_scheduleCallback,ui=e.unstable_cancelCallback,Ss=e.unstable_shouldYield,hr=e.unstable_requestPaint,Xe=e.unstable_now,Bu=e.unstable_getCurrentPriorityLevel,ci=e.unstable_ImmediatePriority,vo=e.unstable_UserBlockingPriority,xs=e.unstable_NormalPriority,wo=e.unstable_LowPriority,hi=e.unstable_IdlePriority,Is=null,rn=null;function Ha(t){if(rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(Is,t,void 0,(t.current.flags&128)===128)}catch{}}var sn=Math.clz32?Math.clz32:As,bn=Math.log,gn=Math.LN2;function As(t){return t>>>=0,t===0?32:31-(bn(t)/gn|0)|0}var Fn=64,Ur=4194304;function Fe(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function dr(t,r){var o=t.pendingLanes;if(o===0)return 0;var u=0,h=t.suspendedLanes,f=t.pingedLanes,_=o&268435455;if(_!==0){var A=_&~h;A!==0?u=Fe(A):(f&=_,f!==0&&(u=Fe(f)))}else _=o&~h,_!==0?u=Fe(_):f!==0&&(u=Fe(f));if(u===0)return 0;if(r!==0&&r!==u&&(r&h)===0&&(h=u&-u,f=r&-r,h>=f||h===16&&(f&4194240)!==0))return r;if((u&4)!==0&&(u|=o&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=u;0<r;)o=31-sn(r),h=1<<o,u|=t[o],r&=~h;return u}function Cs(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rs(t,r){for(var o=t.suspendedLanes,u=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes;0<f;){var _=31-sn(f),A=1<<_,V=h[_];V===-1?((A&o)===0||(A&u)!==0)&&(h[_]=Cs(A,r)):V<=r&&(t.expiredLanes|=A),f&=~A}}function Eo(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function To(){var t=Fn;return Fn<<=1,(Fn&4194240)===0&&(Fn=64),t}function So(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function Ns(t,r,o){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-sn(r),t[r]=o}function $u(t,r){var o=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<o;){var h=31-sn(o),f=1<<h;r[h]=0,u[h]=-1,t[h]=-1,o&=~f}}function xo(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var u=31-sn(o),h=1<<u;h&r|t[u]&r&&(t[u]|=r),o&=~h}}var De=0;function Un(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Io,di,Ao,Co,Ro,zn=!1,fi=[],Bn=null,$n=null,Nt=null,Ps=new Map,fr=new Map,on=[],Wa="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zr(t,r){switch(t){case"focusin":case"focusout":Bn=null;break;case"dragenter":case"dragleave":$n=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Ps.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":fr.delete(r.pointerId)}}function Rn(t,r,o,u,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:f,targetContainers:[h]},r!==null&&(r=Bo(r),r!==null&&di(r)),t):(t.eventSystemFlags|=u,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function Ga(t,r,o,u,h){switch(r){case"focusin":return Bn=Rn(Bn,t,r,o,u,h),!0;case"dragenter":return $n=Rn($n,t,r,o,u,h),!0;case"mouseover":return Nt=Rn(Nt,t,r,o,u,h),!0;case"pointerover":var f=h.pointerId;return Ps.set(f,Rn(Ps.get(f)||null,t,r,o,u,h)),!0;case"gotpointercapture":return f=h.pointerId,fr.set(f,Rn(fr.get(f)||null,t,r,o,u,h)),!0}return!1}function pi(t){var r=Ms(t.target);if(r!==null){var o=Cn(r);if(o!==null){if(r=o.tag,r===13){if(r=yo(o),r!==null){t.blockedOn=r,Ro(t.priority,function(){Ao(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function We(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=mi(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var u=new o.constructor(o.type,o);jr=u,o.target.dispatchEvent(u),jr=null}else return r=Bo(o),r!==null&&di(r),t.blockedOn=o,!1;r.shift()}return!0}function Qa(t,r,o){We(t)&&o.delete(r)}function qu(){zn=!1,Bn!==null&&We(Bn)&&(Bn=null),$n!==null&&We($n)&&($n=null),Nt!==null&&We(Nt)&&(Nt=null),Ps.forEach(Qa),fr.forEach(Qa)}function Br(t,r){t.blockedOn===r&&(t.blockedOn=null,zn||(zn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,qu)))}function $r(t){function r(h){return Br(h,t)}if(0<fi.length){Br(fi[0],t);for(var o=1;o<fi.length;o++){var u=fi[o];u.blockedOn===t&&(u.blockedOn=null)}}for(Bn!==null&&Br(Bn,t),$n!==null&&Br($n,t),Nt!==null&&Br(Nt,t),Ps.forEach(r),fr.forEach(r),o=0;o<on.length;o++)u=on[o],u.blockedOn===t&&(u.blockedOn=null);for(;0<on.length&&(o=on[0],o.blockedOn===null);)pi(o),o.blockedOn===null&&on.shift()}var pr=Ce.ReactCurrentBatchConfig,mr=!0;function qn(t,r,o,u){var h=De,f=pr.transition;pr.transition=null;try{De=1,No(t,r,o,u)}finally{De=h,pr.transition=f}}function Ka(t,r,o,u){var h=De,f=pr.transition;pr.transition=null;try{De=4,No(t,r,o,u)}finally{De=h,pr.transition=f}}function No(t,r,o,u){if(mr){var h=mi(t,r,o,u);if(h===null)tc(t,r,u,Hn,o),zr(t,u);else if(Ga(h,t,r,o,u))u.stopPropagation();else if(zr(t,u),r&4&&-1<Wa.indexOf(t)){for(;h!==null;){var f=Bo(h);if(f!==null&&Io(f),f=mi(t,r,o,u),f===null&&tc(t,r,u,Hn,o),f===h)break;h=f}h!==null&&u.stopPropagation()}else tc(t,r,u,null,o)}}var Hn=null;function mi(t,r,o,u){if(Hn=null,t=ai(u),t=Ms(t),t!==null)if(r=Cn(t),r===null)t=null;else if(o=r.tag,o===13){if(t=yo(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return Hn=t,null}function gi(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bu()){case ci:return 1;case vo:return 4;case xs:case wo:return 16;case hi:return 536870912;default:return 16}default:return 16}}var an=null,yi=null,gr=null;function Xa(){if(gr)return gr;var t,r=yi,o=r.length,u,h="value"in an?an.value:an.textContent,f=h.length;for(t=0;t<o&&r[t]===h[t];t++);var _=o-t;for(u=1;u<=_&&r[o-u]===h[f-u];u++);return gr=h.slice(t,1<u?1-u:void 0)}function ks(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Wn(){return!0}function Po(){return!1}function Lt(t){function r(o,u,h,f,_){this._reactName=o,this._targetInst=h,this.type=u,this.nativeEvent=f,this.target=_,this.currentTarget=null;for(var A in t)t.hasOwnProperty(A)&&(o=t[A],this[A]=o?o(f):f[A]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Wn:Po,this.isPropagationStopped=Po,this}return se(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Wn)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Wn)},persist:function(){},isPersistent:Wn}),r}var Gn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vs=Lt(Gn),qr=se({},Gn,{view:0,detail:0}),_i=Lt(qr),vi,wi,ln,Ds=se({},qr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ie,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&t.type==="mousemove"?(vi=t.screenX-ln.screenX,wi=t.screenY-ln.screenY):wi=vi=0,ln=t),vi)},movementY:function(t){return"movementY"in t?t.movementY:wi}}),ko=Lt(Ds),Ya=se({},Ds,{dataTransfer:0}),Ja=Lt(Ya),Ei=se({},qr,{relatedTarget:0}),Pt=Lt(Ei),Za=se({},Gn,{animationName:0,elapsedTime:0,pseudoElement:0}),el=Lt(Za),Hr=se({},Gn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),l=Lt(Hr),p=se({},Gn,{data:0}),g=Lt(p),E={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},O={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},U={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Z(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=U[t])?!!r[t]:!1}function Ie(){return Z}var ut=se({},qr,{key:function(t){if(t.key){var r=E[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=ks(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?O[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ie,charCode:function(t){return t.type==="keypress"?ks(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ks(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qe=Lt(ut),mt=se({},Ds,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),un=Lt(mt),yr=se({},qr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ie}),Qn=Lt(yr),Kn=se({},Gn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ti=Lt(Kn),Vo=se({},Ds,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),i_=Lt(Vo),o_=[9,13,27,32],Hu=m&&"CompositionEvent"in window,Do=null;m&&"documentMode"in document&&(Do=document.documentMode);var a_=m&&"TextEvent"in window&&!Do,Od=m&&(!Hu||Do&&8<Do&&11>=Do),bd=" ",Fd=!1;function Ud(t,r){switch(t){case"keyup":return o_.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Si=!1;function l_(t,r){switch(t){case"compositionend":return zd(r);case"keypress":return r.which!==32?null:(Fd=!0,bd);case"textInput":return t=r.data,t===bd&&Fd?null:t;default:return null}}function u_(t,r){if(Si)return t==="compositionend"||!Hu&&Ud(t,r)?(t=Xa(),gr=yi=an=null,Si=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Od&&r.locale!=="ko"?null:r.data;default:return null}}var c_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bd(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!c_[t.type]:r==="textarea"}function $d(t,r,o,u){Lr(u),r=il(r,"onChange"),0<r.length&&(o=new Vs("onChange","change",null,o,u),t.push({event:o,listeners:r}))}var Mo=null,jo=null;function h_(t){lf(t,0)}function tl(t){var r=Ri(t);if(lo(r))return t}function d_(t,r){if(t==="change")return r}var qd=!1;if(m){var Wu;if(m){var Gu="oninput"in document;if(!Gu){var Hd=document.createElement("div");Hd.setAttribute("oninput","return;"),Gu=typeof Hd.oninput=="function"}Wu=Gu}else Wu=!1;qd=Wu&&(!document.documentMode||9<document.documentMode)}function Wd(){Mo&&(Mo.detachEvent("onpropertychange",Gd),jo=Mo=null)}function Gd(t){if(t.propertyName==="value"&&tl(jo)){var r=[];$d(r,jo,t,ai(t)),ba(h_,r)}}function f_(t,r,o){t==="focusin"?(Wd(),Mo=r,jo=o,Mo.attachEvent("onpropertychange",Gd)):t==="focusout"&&Wd()}function p_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return tl(jo)}function m_(t,r){if(t==="click")return tl(r)}function g_(t,r){if(t==="input"||t==="change")return tl(r)}function y_(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Nn=typeof Object.is=="function"?Object.is:y_;function Lo(t,r){if(Nn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var h=o[u];if(!y.call(r,h)||!Nn(t[h],r[h]))return!1}return!0}function Qd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Kd(t,r){var o=Qd(t);t=0;for(var u;o;){if(o.nodeType===3){if(u=t+o.textContent.length,t<=r&&u>=r)return{node:o,offset:r-t};t=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Qd(o)}}function Xd(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Xd(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Yd(){for(var t=window,r=Pr();r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=Pr(t.document)}return r}function Qu(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function __(t){var r=Yd(),o=t.focusedElem,u=t.selectionRange;if(r!==o&&o&&o.ownerDocument&&Xd(o.ownerDocument.documentElement,o)){if(u!==null&&Qu(o)){if(r=u.start,t=u.end,t===void 0&&(t=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(t,o.value.length);else if(t=(r=o.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var h=o.textContent.length,f=Math.min(u.start,h);u=u.end===void 0?f:Math.min(u.end,h),!t.extend&&f>u&&(h=u,u=f,f=h),h=Kd(o,f);var _=Kd(o,u);h&&_&&(t.rangeCount!==1||t.anchorNode!==h.node||t.anchorOffset!==h.offset||t.focusNode!==_.node||t.focusOffset!==_.offset)&&(r=r.createRange(),r.setStart(h.node,h.offset),t.removeAllRanges(),f>u?(t.addRange(r),t.extend(_.node,_.offset)):(r.setEnd(_.node,_.offset),t.addRange(r)))}}for(r=[],t=o;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)t=r[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var v_=m&&"documentMode"in document&&11>=document.documentMode,xi=null,Ku=null,Oo=null,Xu=!1;function Jd(t,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Xu||xi==null||xi!==Pr(u)||(u=xi,"selectionStart"in u&&Qu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Oo&&Lo(Oo,u)||(Oo=u,u=il(Ku,"onSelect"),0<u.length&&(r=new Vs("onSelect","select",null,r,o),t.push({event:r,listeners:u}),r.target=xi)))}function nl(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var Ii={animationend:nl("Animation","AnimationEnd"),animationiteration:nl("Animation","AnimationIteration"),animationstart:nl("Animation","AnimationStart"),transitionend:nl("Transition","TransitionEnd")},Yu={},Zd={};m&&(Zd=document.createElement("div").style,"AnimationEvent"in window||(delete Ii.animationend.animation,delete Ii.animationiteration.animation,delete Ii.animationstart.animation),"TransitionEvent"in window||delete Ii.transitionend.transition);function rl(t){if(Yu[t])return Yu[t];if(!Ii[t])return t;var r=Ii[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in Zd)return Yu[t]=r[o];return t}var ef=rl("animationend"),tf=rl("animationiteration"),nf=rl("animationstart"),rf=rl("transitionend"),sf=new Map,of="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wr(t,r){sf.set(t,r),c(r,[t])}for(var Ju=0;Ju<of.length;Ju++){var Zu=of[Ju],w_=Zu.toLowerCase(),E_=Zu[0].toUpperCase()+Zu.slice(1);Wr(w_,"on"+E_)}Wr(ef,"onAnimationEnd"),Wr(tf,"onAnimationIteration"),Wr(nf,"onAnimationStart"),Wr("dblclick","onDoubleClick"),Wr("focusin","onFocus"),Wr("focusout","onBlur"),Wr(rf,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T_=new Set("cancel close invalid load scroll toggle".split(" ").concat(bo));function af(t,r,o){var u=t.type||"unknown-event";t.currentTarget=o,go(u,r,void 0,t),t.currentTarget=null}function lf(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var u=t[o],h=u.event;u=u.listeners;e:{var f=void 0;if(r)for(var _=u.length-1;0<=_;_--){var A=u[_],V=A.instance,F=A.currentTarget;if(A=A.listener,V!==f&&h.isPropagationStopped())break e;af(h,A,F),f=V}else for(_=0;_<u.length;_++){if(A=u[_],V=A.instance,F=A.currentTarget,A=A.listener,V!==f&&h.isPropagationStopped())break e;af(h,A,F),f=V}}}if(li)throw t=mn,li=!1,mn=null,t}function Ye(t,r){var o=r[ac];o===void 0&&(o=r[ac]=new Set);var u=t+"__bubble";o.has(u)||(uf(r,t,2,!1),o.add(u))}function ec(t,r,o){var u=0;r&&(u|=4),uf(o,t,u,r)}var sl="_reactListening"+Math.random().toString(36).slice(2);function Fo(t){if(!t[sl]){t[sl]=!0,i.forEach(function(o){o!=="selectionchange"&&(T_.has(o)||ec(o,!1,t),ec(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[sl]||(r[sl]=!0,ec("selectionchange",!1,r))}}function uf(t,r,o,u){switch(gi(r)){case 1:var h=qn;break;case 4:h=Ka;break;default:h=No}o=h.bind(null,r,o,t),h=void 0,!br||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),u?h!==void 0?t.addEventListener(r,o,{capture:!0,passive:h}):t.addEventListener(r,o,!0):h!==void 0?t.addEventListener(r,o,{passive:h}):t.addEventListener(r,o,!1)}function tc(t,r,o,u,h){var f=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var A=u.stateNode.containerInfo;if(A===h||A.nodeType===8&&A.parentNode===h)break;if(_===4)for(_=u.return;_!==null;){var V=_.tag;if((V===3||V===4)&&(V=_.stateNode.containerInfo,V===h||V.nodeType===8&&V.parentNode===h))return;_=_.return}for(;A!==null;){if(_=Ms(A),_===null)return;if(V=_.tag,V===5||V===6){u=f=_;continue e}A=A.parentNode}}u=u.return}ba(function(){var F=f,Q=ai(o),Y=[];e:{var G=sf.get(t);if(G!==void 0){var re=Vs,ue=t;switch(t){case"keypress":if(ks(o)===0)break e;case"keydown":case"keyup":re=qe;break;case"focusin":ue="focus",re=Pt;break;case"focusout":ue="blur",re=Pt;break;case"beforeblur":case"afterblur":re=Pt;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=ko;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=Ja;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=Qn;break;case ef:case tf:case nf:re=el;break;case rf:re=Ti;break;case"scroll":re=_i;break;case"wheel":re=i_;break;case"copy":case"cut":case"paste":re=l;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=un}var ce=(r&4)!==0,ct=!ce&&t==="scroll",L=ce?G!==null?G+"Capture":null:G;ce=[];for(var M=F,b;M!==null;){b=M;var J=b.stateNode;if(b.tag===5&&J!==null&&(b=J,L!==null&&(J=Es(M,L),J!=null&&ce.push(Uo(M,J,b)))),ct)break;M=M.return}0<ce.length&&(G=new re(G,ue,null,o,Q),Y.push({event:G,listeners:ce}))}}if((r&7)===0){e:{if(G=t==="mouseover"||t==="pointerover",re=t==="mouseout"||t==="pointerout",G&&o!==jr&&(ue=o.relatedTarget||o.fromElement)&&(Ms(ue)||ue[_r]))break e;if((re||G)&&(G=Q.window===Q?Q:(G=Q.ownerDocument)?G.defaultView||G.parentWindow:window,re?(ue=o.relatedTarget||o.toElement,re=F,ue=ue?Ms(ue):null,ue!==null&&(ct=Cn(ue),ue!==ct||ue.tag!==5&&ue.tag!==6)&&(ue=null)):(re=null,ue=F),re!==ue)){if(ce=ko,J="onMouseLeave",L="onMouseEnter",M="mouse",(t==="pointerout"||t==="pointerover")&&(ce=un,J="onPointerLeave",L="onPointerEnter",M="pointer"),ct=re==null?G:Ri(re),b=ue==null?G:Ri(ue),G=new ce(J,M+"leave",re,o,Q),G.target=ct,G.relatedTarget=b,J=null,Ms(Q)===F&&(ce=new ce(L,M+"enter",ue,o,Q),ce.target=b,ce.relatedTarget=ct,J=ce),ct=J,re&&ue)t:{for(ce=re,L=ue,M=0,b=ce;b;b=Ai(b))M++;for(b=0,J=L;J;J=Ai(J))b++;for(;0<M-b;)ce=Ai(ce),M--;for(;0<b-M;)L=Ai(L),b--;for(;M--;){if(ce===L||L!==null&&ce===L.alternate)break t;ce=Ai(ce),L=Ai(L)}ce=null}else ce=null;re!==null&&cf(Y,G,re,ce,!1),ue!==null&&ct!==null&&cf(Y,ct,ue,ce,!0)}}e:{if(G=F?Ri(F):window,re=G.nodeName&&G.nodeName.toLowerCase(),re==="select"||re==="input"&&G.type==="file")var he=d_;else if(Bd(G))if(qd)he=g_;else{he=p_;var ge=f_}else(re=G.nodeName)&&re.toLowerCase()==="input"&&(G.type==="checkbox"||G.type==="radio")&&(he=m_);if(he&&(he=he(t,F))){$d(Y,he,o,Q);break e}ge&&ge(t,G,F),t==="focusout"&&(ge=G._wrapperState)&&ge.controlled&&G.type==="number"&&pt(G,"number",G.value)}switch(ge=F?Ri(F):window,t){case"focusin":(Bd(ge)||ge.contentEditable==="true")&&(xi=ge,Ku=F,Oo=null);break;case"focusout":Oo=Ku=xi=null;break;case"mousedown":Xu=!0;break;case"contextmenu":case"mouseup":case"dragend":Xu=!1,Jd(Y,o,Q);break;case"selectionchange":if(v_)break;case"keydown":case"keyup":Jd(Y,o,Q)}var ye;if(Hu)e:{switch(t){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else Si?Ud(t,o)&&(Te="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(Te="onCompositionStart");Te&&(Od&&o.locale!=="ko"&&(Si||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&Si&&(ye=Xa()):(an=Q,yi="value"in an?an.value:an.textContent,Si=!0)),ge=il(F,Te),0<ge.length&&(Te=new g(Te,t,null,o,Q),Y.push({event:Te,listeners:ge}),ye?Te.data=ye:(ye=zd(o),ye!==null&&(Te.data=ye)))),(ye=a_?l_(t,o):u_(t,o))&&(F=il(F,"onBeforeInput"),0<F.length&&(Q=new g("onBeforeInput","beforeinput",null,o,Q),Y.push({event:Q,listeners:F}),Q.data=ye))}lf(Y,r)})}function Uo(t,r,o){return{instance:t,listener:r,currentTarget:o}}function il(t,r){for(var o=r+"Capture",u=[];t!==null;){var h=t,f=h.stateNode;h.tag===5&&f!==null&&(h=f,f=Es(t,o),f!=null&&u.unshift(Uo(t,f,h)),f=Es(t,r),f!=null&&u.push(Uo(t,f,h))),t=t.return}return u}function Ai(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function cf(t,r,o,u,h){for(var f=r._reactName,_=[];o!==null&&o!==u;){var A=o,V=A.alternate,F=A.stateNode;if(V!==null&&V===u)break;A.tag===5&&F!==null&&(A=F,h?(V=Es(o,f),V!=null&&_.unshift(Uo(o,V,A))):h||(V=Es(o,f),V!=null&&_.push(Uo(o,V,A)))),o=o.return}_.length!==0&&t.push({event:r,listeners:_})}var S_=/\r\n?/g,x_=/\u0000|\uFFFD/g;function hf(t){return(typeof t=="string"?t:""+t).replace(S_,`
`).replace(x_,"")}function ol(t,r,o){if(r=hf(r),hf(t)!==r&&o)throw Error(n(425))}function al(){}var nc=null,rc=null;function sc(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var ic=typeof setTimeout=="function"?setTimeout:void 0,I_=typeof clearTimeout=="function"?clearTimeout:void 0,df=typeof Promise=="function"?Promise:void 0,A_=typeof queueMicrotask=="function"?queueMicrotask:typeof df<"u"?function(t){return df.resolve(null).then(t).catch(C_)}:ic;function C_(t){setTimeout(function(){throw t})}function oc(t,r){var o=r,u=0;do{var h=o.nextSibling;if(t.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(u===0){t.removeChild(h),$r(r);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=h}while(o);$r(r)}function Gr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function ff(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return t;r--}else o==="/$"&&r++}t=t.previousSibling}return null}var Ci=Math.random().toString(36).slice(2),Xn="__reactFiber$"+Ci,zo="__reactProps$"+Ci,_r="__reactContainer$"+Ci,ac="__reactEvents$"+Ci,R_="__reactListeners$"+Ci,N_="__reactHandles$"+Ci;function Ms(t){var r=t[Xn];if(r)return r;for(var o=t.parentNode;o;){if(r=o[_r]||o[Xn]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=ff(t);t!==null;){if(o=t[Xn])return o;t=ff(t)}return r}t=o,o=t.parentNode}return null}function Bo(t){return t=t[Xn]||t[_r],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ri(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function ll(t){return t[zo]||null}var lc=[],Ni=-1;function Qr(t){return{current:t}}function Je(t){0>Ni||(t.current=lc[Ni],lc[Ni]=null,Ni--)}function Qe(t,r){Ni++,lc[Ni]=t.current,t.current=r}var Kr={},Ot=Qr(Kr),Qt=Qr(!1),js=Kr;function Pi(t,r){var o=t.type.contextTypes;if(!o)return Kr;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===r)return u.__reactInternalMemoizedMaskedChildContext;var h={},f;for(f in o)h[f]=r[f];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=h),h}function Kt(t){return t=t.childContextTypes,t!=null}function ul(){Je(Qt),Je(Ot)}function pf(t,r,o){if(Ot.current!==Kr)throw Error(n(168));Qe(Ot,r),Qe(Qt,o)}function mf(t,r,o){var u=t.stateNode;if(r=r.childContextTypes,typeof u.getChildContext!="function")return o;u=u.getChildContext();for(var h in u)if(!(h in r))throw Error(n(108,xe(t)||"Unknown",h));return se({},o,u)}function cl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Kr,js=Ot.current,Qe(Ot,t),Qe(Qt,Qt.current),!0}function gf(t,r,o){var u=t.stateNode;if(!u)throw Error(n(169));o?(t=mf(t,r,js),u.__reactInternalMemoizedMergedChildContext=t,Je(Qt),Je(Ot),Qe(Ot,t)):Je(Qt),Qe(Qt,o)}var vr=null,hl=!1,uc=!1;function yf(t){vr===null?vr=[t]:vr.push(t)}function P_(t){hl=!0,yf(t)}function Xr(){if(!uc&&vr!==null){uc=!0;var t=0,r=De;try{var o=vr;for(De=1;t<o.length;t++){var u=o[t];do u=u(!0);while(u!==null)}vr=null,hl=!1}catch(h){throw vr!==null&&(vr=vr.slice(t+1)),_o(ci,Xr),h}finally{De=r,uc=!1}}return null}var ki=[],Vi=0,dl=null,fl=0,yn=[],_n=0,Ls=null,wr=1,Er="";function Os(t,r){ki[Vi++]=fl,ki[Vi++]=dl,dl=t,fl=r}function _f(t,r,o){yn[_n++]=wr,yn[_n++]=Er,yn[_n++]=Ls,Ls=t;var u=wr;t=Er;var h=32-sn(u)-1;u&=~(1<<h),o+=1;var f=32-sn(r)+h;if(30<f){var _=h-h%5;f=(u&(1<<_)-1).toString(32),u>>=_,h-=_,wr=1<<32-sn(r)+h|o<<h|u,Er=f+t}else wr=1<<f|o<<h|u,Er=t}function cc(t){t.return!==null&&(Os(t,1),_f(t,1,0))}function hc(t){for(;t===dl;)dl=ki[--Vi],ki[Vi]=null,fl=ki[--Vi],ki[Vi]=null;for(;t===Ls;)Ls=yn[--_n],yn[_n]=null,Er=yn[--_n],yn[_n]=null,wr=yn[--_n],yn[_n]=null}var cn=null,hn=null,et=!1,Pn=null;function vf(t,r){var o=Tn(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=t,r=t.deletions,r===null?(t.deletions=[o],t.flags|=16):r.push(o)}function wf(t,r){switch(t.tag){case 5:var o=t.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,cn=t,hn=Gr(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,cn=t,hn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=Ls!==null?{id:wr,overflow:Er}:null,t.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=Tn(18,null,null,0),o.stateNode=r,o.return=t,t.child=o,cn=t,hn=null,!0):!1;default:return!1}}function dc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function fc(t){if(et){var r=hn;if(r){var o=r;if(!wf(t,r)){if(dc(t))throw Error(n(418));r=Gr(o.nextSibling);var u=cn;r&&wf(t,r)?vf(u,o):(t.flags=t.flags&-4097|2,et=!1,cn=t)}}else{if(dc(t))throw Error(n(418));t.flags=t.flags&-4097|2,et=!1,cn=t}}}function Ef(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;cn=t}function pl(t){if(t!==cn)return!1;if(!et)return Ef(t),et=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!sc(t.type,t.memoizedProps)),r&&(r=hn)){if(dc(t))throw Tf(),Error(n(418));for(;r;)vf(t,r),r=Gr(r.nextSibling)}if(Ef(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(r===0){hn=Gr(t.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}t=t.nextSibling}hn=null}}else hn=cn?Gr(t.stateNode.nextSibling):null;return!0}function Tf(){for(var t=hn;t;)t=Gr(t.nextSibling)}function Di(){hn=cn=null,et=!1}function pc(t){Pn===null?Pn=[t]:Pn.push(t)}var k_=Ce.ReactCurrentBatchConfig;function $o(t,r,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(n(309));var u=o.stateNode}if(!u)throw Error(n(147,t));var h=u,f=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===f?r.ref:(r=function(_){var A=h.refs;_===null?delete A[f]:A[f]=_},r._stringRef=f,r)}if(typeof t!="string")throw Error(n(284));if(!o._owner)throw Error(n(290,t))}return t}function ml(t,r){throw t=Object.prototype.toString.call(r),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function Sf(t){var r=t._init;return r(t._payload)}function xf(t){function r(L,M){if(t){var b=L.deletions;b===null?(L.deletions=[M],L.flags|=16):b.push(M)}}function o(L,M){if(!t)return null;for(;M!==null;)r(L,M),M=M.sibling;return null}function u(L,M){for(L=new Map;M!==null;)M.key!==null?L.set(M.key,M):L.set(M.index,M),M=M.sibling;return L}function h(L,M){return L=ss(L,M),L.index=0,L.sibling=null,L}function f(L,M,b){return L.index=b,t?(b=L.alternate,b!==null?(b=b.index,b<M?(L.flags|=2,M):b):(L.flags|=2,M)):(L.flags|=1048576,M)}function _(L){return t&&L.alternate===null&&(L.flags|=2),L}function A(L,M,b,J){return M===null||M.tag!==6?(M=ih(b,L.mode,J),M.return=L,M):(M=h(M,b),M.return=L,M)}function V(L,M,b,J){var he=b.type;return he===k?Q(L,M,b.props.children,J,b.key):M!==null&&(M.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===xt&&Sf(he)===M.type)?(J=h(M,b.props),J.ref=$o(L,M,b),J.return=L,J):(J=Fl(b.type,b.key,b.props,null,L.mode,J),J.ref=$o(L,M,b),J.return=L,J)}function F(L,M,b,J){return M===null||M.tag!==4||M.stateNode.containerInfo!==b.containerInfo||M.stateNode.implementation!==b.implementation?(M=oh(b,L.mode,J),M.return=L,M):(M=h(M,b.children||[]),M.return=L,M)}function Q(L,M,b,J,he){return M===null||M.tag!==7?(M=Hs(b,L.mode,J,he),M.return=L,M):(M=h(M,b),M.return=L,M)}function Y(L,M,b){if(typeof M=="string"&&M!==""||typeof M=="number")return M=ih(""+M,L.mode,b),M.return=L,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Le:return b=Fl(M.type,M.key,M.props,null,L.mode,b),b.ref=$o(L,null,M),b.return=L,b;case K:return M=oh(M,L.mode,b),M.return=L,M;case xt:var J=M._init;return Y(L,J(M._payload),b)}if(lt(M)||fe(M))return M=Hs(M,L.mode,b,null),M.return=L,M;ml(L,M)}return null}function G(L,M,b,J){var he=M!==null?M.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return he!==null?null:A(L,M,""+b,J);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Le:return b.key===he?V(L,M,b,J):null;case K:return b.key===he?F(L,M,b,J):null;case xt:return he=b._init,G(L,M,he(b._payload),J)}if(lt(b)||fe(b))return he!==null?null:Q(L,M,b,J,null);ml(L,b)}return null}function re(L,M,b,J,he){if(typeof J=="string"&&J!==""||typeof J=="number")return L=L.get(b)||null,A(M,L,""+J,he);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case Le:return L=L.get(J.key===null?b:J.key)||null,V(M,L,J,he);case K:return L=L.get(J.key===null?b:J.key)||null,F(M,L,J,he);case xt:var ge=J._init;return re(L,M,b,ge(J._payload),he)}if(lt(J)||fe(J))return L=L.get(b)||null,Q(M,L,J,he,null);ml(M,J)}return null}function ue(L,M,b,J){for(var he=null,ge=null,ye=M,Te=M=0,Ct=null;ye!==null&&Te<b.length;Te++){ye.index>Te?(Ct=ye,ye=null):Ct=ye.sibling;var be=G(L,ye,b[Te],J);if(be===null){ye===null&&(ye=Ct);break}t&&ye&&be.alternate===null&&r(L,ye),M=f(be,M,Te),ge===null?he=be:ge.sibling=be,ge=be,ye=Ct}if(Te===b.length)return o(L,ye),et&&Os(L,Te),he;if(ye===null){for(;Te<b.length;Te++)ye=Y(L,b[Te],J),ye!==null&&(M=f(ye,M,Te),ge===null?he=ye:ge.sibling=ye,ge=ye);return et&&Os(L,Te),he}for(ye=u(L,ye);Te<b.length;Te++)Ct=re(ye,L,Te,b[Te],J),Ct!==null&&(t&&Ct.alternate!==null&&ye.delete(Ct.key===null?Te:Ct.key),M=f(Ct,M,Te),ge===null?he=Ct:ge.sibling=Ct,ge=Ct);return t&&ye.forEach(function(is){return r(L,is)}),et&&Os(L,Te),he}function ce(L,M,b,J){var he=fe(b);if(typeof he!="function")throw Error(n(150));if(b=he.call(b),b==null)throw Error(n(151));for(var ge=he=null,ye=M,Te=M=0,Ct=null,be=b.next();ye!==null&&!be.done;Te++,be=b.next()){ye.index>Te?(Ct=ye,ye=null):Ct=ye.sibling;var is=G(L,ye,be.value,J);if(is===null){ye===null&&(ye=Ct);break}t&&ye&&is.alternate===null&&r(L,ye),M=f(is,M,Te),ge===null?he=is:ge.sibling=is,ge=is,ye=Ct}if(be.done)return o(L,ye),et&&Os(L,Te),he;if(ye===null){for(;!be.done;Te++,be=b.next())be=Y(L,be.value,J),be!==null&&(M=f(be,M,Te),ge===null?he=be:ge.sibling=be,ge=be);return et&&Os(L,Te),he}for(ye=u(L,ye);!be.done;Te++,be=b.next())be=re(ye,L,Te,be.value,J),be!==null&&(t&&be.alternate!==null&&ye.delete(be.key===null?Te:be.key),M=f(be,M,Te),ge===null?he=be:ge.sibling=be,ge=be);return t&&ye.forEach(function(cv){return r(L,cv)}),et&&Os(L,Te),he}function ct(L,M,b,J){if(typeof b=="object"&&b!==null&&b.type===k&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Le:e:{for(var he=b.key,ge=M;ge!==null;){if(ge.key===he){if(he=b.type,he===k){if(ge.tag===7){o(L,ge.sibling),M=h(ge,b.props.children),M.return=L,L=M;break e}}else if(ge.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===xt&&Sf(he)===ge.type){o(L,ge.sibling),M=h(ge,b.props),M.ref=$o(L,ge,b),M.return=L,L=M;break e}o(L,ge);break}else r(L,ge);ge=ge.sibling}b.type===k?(M=Hs(b.props.children,L.mode,J,b.key),M.return=L,L=M):(J=Fl(b.type,b.key,b.props,null,L.mode,J),J.ref=$o(L,M,b),J.return=L,L=J)}return _(L);case K:e:{for(ge=b.key;M!==null;){if(M.key===ge)if(M.tag===4&&M.stateNode.containerInfo===b.containerInfo&&M.stateNode.implementation===b.implementation){o(L,M.sibling),M=h(M,b.children||[]),M.return=L,L=M;break e}else{o(L,M);break}else r(L,M);M=M.sibling}M=oh(b,L.mode,J),M.return=L,L=M}return _(L);case xt:return ge=b._init,ct(L,M,ge(b._payload),J)}if(lt(b))return ue(L,M,b,J);if(fe(b))return ce(L,M,b,J);ml(L,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,M!==null&&M.tag===6?(o(L,M.sibling),M=h(M,b),M.return=L,L=M):(o(L,M),M=ih(b,L.mode,J),M.return=L,L=M),_(L)):o(L,M)}return ct}var Mi=xf(!0),If=xf(!1),gl=Qr(null),yl=null,ji=null,mc=null;function gc(){mc=ji=yl=null}function yc(t){var r=gl.current;Je(gl),t._currentValue=r}function _c(t,r,o){for(;t!==null;){var u=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),t===o)break;t=t.return}}function Li(t,r){yl=t,mc=ji=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&r)!==0&&(Xt=!0),t.firstContext=null)}function vn(t){var r=t._currentValue;if(mc!==t)if(t={context:t,memoizedValue:r,next:null},ji===null){if(yl===null)throw Error(n(308));ji=t,yl.dependencies={lanes:0,firstContext:t}}else ji=ji.next=t;return r}var bs=null;function vc(t){bs===null?bs=[t]:bs.push(t)}function Af(t,r,o,u){var h=r.interleaved;return h===null?(o.next=o,vc(r)):(o.next=h.next,h.next=o),r.interleaved=o,Tr(t,u)}function Tr(t,r){t.lanes|=r;var o=t.alternate;for(o!==null&&(o.lanes|=r),o=t,t=t.return;t!==null;)t.childLanes|=r,o=t.alternate,o!==null&&(o.childLanes|=r),o=t,t=t.return;return o.tag===3?o.stateNode:null}var Yr=!1;function wc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cf(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Sr(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function Jr(t,r,o){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(Oe&2)!==0){var h=u.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),u.pending=r,Tr(t,o)}return h=u.interleaved,h===null?(r.next=r,vc(u)):(r.next=h.next,h.next=r),u.interleaved=r,Tr(t,o)}function _l(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,xo(t,o)}}function Rf(t,r){var o=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var h=null,f=null;if(o=o.firstBaseUpdate,o!==null){do{var _={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};f===null?h=f=_:f=f.next=_,o=o.next}while(o!==null);f===null?h=f=r:f=f.next=r}else h=f=r;o={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:u.shared,effects:u.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}function vl(t,r,o,u){var h=t.updateQueue;Yr=!1;var f=h.firstBaseUpdate,_=h.lastBaseUpdate,A=h.shared.pending;if(A!==null){h.shared.pending=null;var V=A,F=V.next;V.next=null,_===null?f=F:_.next=F,_=V;var Q=t.alternate;Q!==null&&(Q=Q.updateQueue,A=Q.lastBaseUpdate,A!==_&&(A===null?Q.firstBaseUpdate=F:A.next=F,Q.lastBaseUpdate=V))}if(f!==null){var Y=h.baseState;_=0,Q=F=V=null,A=f;do{var G=A.lane,re=A.eventTime;if((u&G)===G){Q!==null&&(Q=Q.next={eventTime:re,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var ue=t,ce=A;switch(G=r,re=o,ce.tag){case 1:if(ue=ce.payload,typeof ue=="function"){Y=ue.call(re,Y,G);break e}Y=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=ce.payload,G=typeof ue=="function"?ue.call(re,Y,G):ue,G==null)break e;Y=se({},Y,G);break e;case 2:Yr=!0}}A.callback!==null&&A.lane!==0&&(t.flags|=64,G=h.effects,G===null?h.effects=[A]:G.push(A))}else re={eventTime:re,lane:G,tag:A.tag,payload:A.payload,callback:A.callback,next:null},Q===null?(F=Q=re,V=Y):Q=Q.next=re,_|=G;if(A=A.next,A===null){if(A=h.shared.pending,A===null)break;G=A,A=G.next,G.next=null,h.lastBaseUpdate=G,h.shared.pending=null}}while(!0);if(Q===null&&(V=Y),h.baseState=V,h.firstBaseUpdate=F,h.lastBaseUpdate=Q,r=h.shared.interleaved,r!==null){h=r;do _|=h.lane,h=h.next;while(h!==r)}else f===null&&(h.shared.lanes=0);zs|=_,t.lanes=_,t.memoizedState=Y}}function Nf(t,r,o){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var u=t[r],h=u.callback;if(h!==null){if(u.callback=null,u=o,typeof h!="function")throw Error(n(191,h));h.call(u)}}}var qo={},Yn=Qr(qo),Ho=Qr(qo),Wo=Qr(qo);function Fs(t){if(t===qo)throw Error(n(174));return t}function Ec(t,r){switch(Qe(Wo,r),Qe(Ho,t),Qe(Yn,qo),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:si(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=si(r,t)}Je(Yn),Qe(Yn,r)}function Oi(){Je(Yn),Je(Ho),Je(Wo)}function Pf(t){Fs(Wo.current);var r=Fs(Yn.current),o=si(r,t.type);r!==o&&(Qe(Ho,t),Qe(Yn,o))}function Tc(t){Ho.current===t&&(Je(Yn),Je(Ho))}var tt=Qr(0);function wl(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Sc=[];function xc(){for(var t=0;t<Sc.length;t++)Sc[t]._workInProgressVersionPrimary=null;Sc.length=0}var El=Ce.ReactCurrentDispatcher,Ic=Ce.ReactCurrentBatchConfig,Us=0,nt=null,Et=null,It=null,Tl=!1,Go=!1,Qo=0,V_=0;function bt(){throw Error(n(321))}function Ac(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!Nn(t[o],r[o]))return!1;return!0}function Cc(t,r,o,u,h,f){if(Us=f,nt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,El.current=t===null||t.memoizedState===null?L_:O_,t=o(u,h),Go){f=0;do{if(Go=!1,Qo=0,25<=f)throw Error(n(301));f+=1,It=Et=null,r.updateQueue=null,El.current=b_,t=o(u,h)}while(Go)}if(El.current=Il,r=Et!==null&&Et.next!==null,Us=0,It=Et=nt=null,Tl=!1,r)throw Error(n(300));return t}function Rc(){var t=Qo!==0;return Qo=0,t}function Jn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?nt.memoizedState=It=t:It=It.next=t,It}function wn(){if(Et===null){var t=nt.alternate;t=t!==null?t.memoizedState:null}else t=Et.next;var r=It===null?nt.memoizedState:It.next;if(r!==null)It=r,Et=t;else{if(t===null)throw Error(n(310));Et=t,t={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},It===null?nt.memoizedState=It=t:It=It.next=t}return It}function Ko(t,r){return typeof r=="function"?r(t):r}function Nc(t){var r=wn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=Et,h=u.baseQueue,f=o.pending;if(f!==null){if(h!==null){var _=h.next;h.next=f.next,f.next=_}u.baseQueue=h=f,o.pending=null}if(h!==null){f=h.next,u=u.baseState;var A=_=null,V=null,F=f;do{var Q=F.lane;if((Us&Q)===Q)V!==null&&(V=V.next={lane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),u=F.hasEagerState?F.eagerState:t(u,F.action);else{var Y={lane:Q,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null};V===null?(A=V=Y,_=u):V=V.next=Y,nt.lanes|=Q,zs|=Q}F=F.next}while(F!==null&&F!==f);V===null?_=u:V.next=A,Nn(u,r.memoizedState)||(Xt=!0),r.memoizedState=u,r.baseState=_,r.baseQueue=V,o.lastRenderedState=u}if(t=o.interleaved,t!==null){h=t;do f=h.lane,nt.lanes|=f,zs|=f,h=h.next;while(h!==t)}else h===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function Pc(t){var r=wn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=o.dispatch,h=o.pending,f=r.memoizedState;if(h!==null){o.pending=null;var _=h=h.next;do f=t(f,_.action),_=_.next;while(_!==h);Nn(f,r.memoizedState)||(Xt=!0),r.memoizedState=f,r.baseQueue===null&&(r.baseState=f),o.lastRenderedState=f}return[f,u]}function kf(){}function Vf(t,r){var o=nt,u=wn(),h=r(),f=!Nn(u.memoizedState,h);if(f&&(u.memoizedState=h,Xt=!0),u=u.queue,kc(jf.bind(null,o,u,t),[t]),u.getSnapshot!==r||f||It!==null&&It.memoizedState.tag&1){if(o.flags|=2048,Xo(9,Mf.bind(null,o,u,h,r),void 0,null),At===null)throw Error(n(349));(Us&30)!==0||Df(o,r,h)}return h}function Df(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=nt.updateQueue,r===null?(r={lastEffect:null,stores:null},nt.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function Mf(t,r,o,u){r.value=o,r.getSnapshot=u,Lf(r)&&Of(t)}function jf(t,r,o){return o(function(){Lf(r)&&Of(t)})}function Lf(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!Nn(t,o)}catch{return!0}}function Of(t){var r=Tr(t,1);r!==null&&Mn(r,t,1,-1)}function bf(t){var r=Jn();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:t},r.queue=t,t=t.dispatch=j_.bind(null,nt,t),[r.memoizedState,t]}function Xo(t,r,o,u){return t={tag:t,create:r,destroy:o,deps:u,next:null},r=nt.updateQueue,r===null?(r={lastEffect:null,stores:null},nt.updateQueue=r,r.lastEffect=t.next=t):(o=r.lastEffect,o===null?r.lastEffect=t.next=t:(u=o.next,o.next=t,t.next=u,r.lastEffect=t)),t}function Ff(){return wn().memoizedState}function Sl(t,r,o,u){var h=Jn();nt.flags|=t,h.memoizedState=Xo(1|r,o,void 0,u===void 0?null:u)}function xl(t,r,o,u){var h=wn();u=u===void 0?null:u;var f=void 0;if(Et!==null){var _=Et.memoizedState;if(f=_.destroy,u!==null&&Ac(u,_.deps)){h.memoizedState=Xo(r,o,f,u);return}}nt.flags|=t,h.memoizedState=Xo(1|r,o,f,u)}function Uf(t,r){return Sl(8390656,8,t,r)}function kc(t,r){return xl(2048,8,t,r)}function zf(t,r){return xl(4,2,t,r)}function Bf(t,r){return xl(4,4,t,r)}function $f(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function qf(t,r,o){return o=o!=null?o.concat([t]):null,xl(4,4,$f.bind(null,r,t),o)}function Vc(){}function Hf(t,r){var o=wn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&Ac(r,u[1])?u[0]:(o.memoizedState=[t,r],t)}function Wf(t,r){var o=wn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&Ac(r,u[1])?u[0]:(t=t(),o.memoizedState=[t,r],t)}function Gf(t,r,o){return(Us&21)===0?(t.baseState&&(t.baseState=!1,Xt=!0),t.memoizedState=o):(Nn(o,r)||(o=To(),nt.lanes|=o,zs|=o,t.baseState=!0),r)}function D_(t,r){var o=De;De=o!==0&&4>o?o:4,t(!0);var u=Ic.transition;Ic.transition={};try{t(!1),r()}finally{De=o,Ic.transition=u}}function Qf(){return wn().memoizedState}function M_(t,r,o){var u=ns(t);if(o={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null},Kf(t))Xf(r,o);else if(o=Af(t,r,o,u),o!==null){var h=Wt();Mn(o,t,u,h),Yf(o,r,u)}}function j_(t,r,o){var u=ns(t),h={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null};if(Kf(t))Xf(r,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=r.lastRenderedReducer,f!==null))try{var _=r.lastRenderedState,A=f(_,o);if(h.hasEagerState=!0,h.eagerState=A,Nn(A,_)){var V=r.interleaved;V===null?(h.next=h,vc(r)):(h.next=V.next,V.next=h),r.interleaved=h;return}}catch{}finally{}o=Af(t,r,h,u),o!==null&&(h=Wt(),Mn(o,t,u,h),Yf(o,r,u))}}function Kf(t){var r=t.alternate;return t===nt||r!==null&&r===nt}function Xf(t,r){Go=Tl=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function Yf(t,r,o){if((o&4194240)!==0){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,xo(t,o)}}var Il={readContext:vn,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useInsertionEffect:bt,useLayoutEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useMutableSource:bt,useSyncExternalStore:bt,useId:bt,unstable_isNewReconciler:!1},L_={readContext:vn,useCallback:function(t,r){return Jn().memoizedState=[t,r===void 0?null:r],t},useContext:vn,useEffect:Uf,useImperativeHandle:function(t,r,o){return o=o!=null?o.concat([t]):null,Sl(4194308,4,$f.bind(null,r,t),o)},useLayoutEffect:function(t,r){return Sl(4194308,4,t,r)},useInsertionEffect:function(t,r){return Sl(4,2,t,r)},useMemo:function(t,r){var o=Jn();return r=r===void 0?null:r,t=t(),o.memoizedState=[t,r],t},useReducer:function(t,r,o){var u=Jn();return r=o!==void 0?o(r):r,u.memoizedState=u.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},u.queue=t,t=t.dispatch=M_.bind(null,nt,t),[u.memoizedState,t]},useRef:function(t){var r=Jn();return t={current:t},r.memoizedState=t},useState:bf,useDebugValue:Vc,useDeferredValue:function(t){return Jn().memoizedState=t},useTransition:function(){var t=bf(!1),r=t[0];return t=D_.bind(null,t[1]),Jn().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,o){var u=nt,h=Jn();if(et){if(o===void 0)throw Error(n(407));o=o()}else{if(o=r(),At===null)throw Error(n(349));(Us&30)!==0||Df(u,r,o)}h.memoizedState=o;var f={value:o,getSnapshot:r};return h.queue=f,Uf(jf.bind(null,u,f,t),[t]),u.flags|=2048,Xo(9,Mf.bind(null,u,f,o,r),void 0,null),o},useId:function(){var t=Jn(),r=At.identifierPrefix;if(et){var o=Er,u=wr;o=(u&~(1<<32-sn(u)-1)).toString(32)+o,r=":"+r+"R"+o,o=Qo++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=V_++,r=":"+r+"r"+o.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},O_={readContext:vn,useCallback:Hf,useContext:vn,useEffect:kc,useImperativeHandle:qf,useInsertionEffect:zf,useLayoutEffect:Bf,useMemo:Wf,useReducer:Nc,useRef:Ff,useState:function(){return Nc(Ko)},useDebugValue:Vc,useDeferredValue:function(t){var r=wn();return Gf(r,Et.memoizedState,t)},useTransition:function(){var t=Nc(Ko)[0],r=wn().memoizedState;return[t,r]},useMutableSource:kf,useSyncExternalStore:Vf,useId:Qf,unstable_isNewReconciler:!1},b_={readContext:vn,useCallback:Hf,useContext:vn,useEffect:kc,useImperativeHandle:qf,useInsertionEffect:zf,useLayoutEffect:Bf,useMemo:Wf,useReducer:Pc,useRef:Ff,useState:function(){return Pc(Ko)},useDebugValue:Vc,useDeferredValue:function(t){var r=wn();return Et===null?r.memoizedState=t:Gf(r,Et.memoizedState,t)},useTransition:function(){var t=Pc(Ko)[0],r=wn().memoizedState;return[t,r]},useMutableSource:kf,useSyncExternalStore:Vf,useId:Qf,unstable_isNewReconciler:!1};function kn(t,r){if(t&&t.defaultProps){r=se({},r),t=t.defaultProps;for(var o in t)r[o]===void 0&&(r[o]=t[o]);return r}return r}function Dc(t,r,o,u){r=t.memoizedState,o=o(u,r),o=o==null?r:se({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var Al={isMounted:function(t){return(t=t._reactInternals)?Cn(t)===t:!1},enqueueSetState:function(t,r,o){t=t._reactInternals;var u=Wt(),h=ns(t),f=Sr(u,h);f.payload=r,o!=null&&(f.callback=o),r=Jr(t,f,h),r!==null&&(Mn(r,t,h,u),_l(r,t,h))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var u=Wt(),h=ns(t),f=Sr(u,h);f.tag=1,f.payload=r,o!=null&&(f.callback=o),r=Jr(t,f,h),r!==null&&(Mn(r,t,h,u),_l(r,t,h))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=Wt(),u=ns(t),h=Sr(o,u);h.tag=2,r!=null&&(h.callback=r),r=Jr(t,h,u),r!==null&&(Mn(r,t,u,o),_l(r,t,u))}};function Jf(t,r,o,u,h,f,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,f,_):r.prototype&&r.prototype.isPureReactComponent?!Lo(o,u)||!Lo(h,f):!0}function Zf(t,r,o){var u=!1,h=Kr,f=r.contextType;return typeof f=="object"&&f!==null?f=vn(f):(h=Kt(r)?js:Ot.current,u=r.contextTypes,f=(u=u!=null)?Pi(t,h):Kr),r=new r(o,f),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Al,t.stateNode=r,r._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=h,t.__reactInternalMemoizedMaskedChildContext=f),r}function ep(t,r,o,u){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==t&&Al.enqueueReplaceState(r,r.state,null)}function Mc(t,r,o,u){var h=t.stateNode;h.props=o,h.state=t.memoizedState,h.refs={},wc(t);var f=r.contextType;typeof f=="object"&&f!==null?h.context=vn(f):(f=Kt(r)?js:Ot.current,h.context=Pi(t,f)),h.state=t.memoizedState,f=r.getDerivedStateFromProps,typeof f=="function"&&(Dc(t,r,f,o),h.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(r=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),r!==h.state&&Al.enqueueReplaceState(h,h.state,null),vl(t,o,h,u),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308)}function bi(t,r){try{var o="",u=r;do o+=_e(u),u=u.return;while(u);var h=o}catch(f){h=`
Error generating stack: `+f.message+`
`+f.stack}return{value:t,source:r,stack:h,digest:null}}function jc(t,r,o){return{value:t,source:null,stack:o??null,digest:r??null}}function Lc(t,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var F_=typeof WeakMap=="function"?WeakMap:Map;function tp(t,r,o){o=Sr(-1,o),o.tag=3,o.payload={element:null};var u=r.value;return o.callback=function(){Dl||(Dl=!0,Yc=u),Lc(t,r)},o}function np(t,r,o){o=Sr(-1,o),o.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var h=r.value;o.payload=function(){return u(h)},o.callback=function(){Lc(t,r)}}var f=t.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(o.callback=function(){Lc(t,r),typeof u!="function"&&(es===null?es=new Set([this]):es.add(this));var _=r.stack;this.componentDidCatch(r.value,{componentStack:_!==null?_:""})}),o}function rp(t,r,o){var u=t.pingCache;if(u===null){u=t.pingCache=new F_;var h=new Set;u.set(r,h)}else h=u.get(r),h===void 0&&(h=new Set,u.set(r,h));h.has(o)||(h.add(o),t=Z_.bind(null,t,r,o),r.then(t,t))}function sp(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function ip(t,r,o,u,h){return(t.mode&1)===0?(t===r?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=Sr(-1,1),r.tag=2,Jr(o,r,1))),o.lanes|=1),t):(t.flags|=65536,t.lanes=h,t)}var U_=Ce.ReactCurrentOwner,Xt=!1;function Ht(t,r,o,u){r.child=t===null?If(r,null,o,u):Mi(r,t.child,o,u)}function op(t,r,o,u,h){o=o.render;var f=r.ref;return Li(r,h),u=Cc(t,r,o,u,f,h),o=Rc(),t!==null&&!Xt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,xr(t,r,h)):(et&&o&&cc(r),r.flags|=1,Ht(t,r,u,h),r.child)}function ap(t,r,o,u,h){if(t===null){var f=o.type;return typeof f=="function"&&!sh(f)&&f.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=f,lp(t,r,f,u,h)):(t=Fl(o.type,null,u,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(f=t.child,(t.lanes&h)===0){var _=f.memoizedProps;if(o=o.compare,o=o!==null?o:Lo,o(_,u)&&t.ref===r.ref)return xr(t,r,h)}return r.flags|=1,t=ss(f,u),t.ref=r.ref,t.return=r,r.child=t}function lp(t,r,o,u,h){if(t!==null){var f=t.memoizedProps;if(Lo(f,u)&&t.ref===r.ref)if(Xt=!1,r.pendingProps=u=f,(t.lanes&h)!==0)(t.flags&131072)!==0&&(Xt=!0);else return r.lanes=t.lanes,xr(t,r,h)}return Oc(t,r,o,u,h)}function up(t,r,o){var u=r.pendingProps,h=u.children,f=t!==null?t.memoizedState:null;if(u.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(Ui,dn),dn|=o;else{if((o&1073741824)===0)return t=f!==null?f.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,Qe(Ui,dn),dn|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=f!==null?f.baseLanes:o,Qe(Ui,dn),dn|=u}else f!==null?(u=f.baseLanes|o,r.memoizedState=null):u=o,Qe(Ui,dn),dn|=u;return Ht(t,r,h,o),r.child}function cp(t,r){var o=r.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function Oc(t,r,o,u,h){var f=Kt(o)?js:Ot.current;return f=Pi(r,f),Li(r,h),o=Cc(t,r,o,u,f,h),u=Rc(),t!==null&&!Xt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,xr(t,r,h)):(et&&u&&cc(r),r.flags|=1,Ht(t,r,o,h),r.child)}function hp(t,r,o,u,h){if(Kt(o)){var f=!0;cl(r)}else f=!1;if(Li(r,h),r.stateNode===null)Rl(t,r),Zf(r,o,u),Mc(r,o,u,h),u=!0;else if(t===null){var _=r.stateNode,A=r.memoizedProps;_.props=A;var V=_.context,F=o.contextType;typeof F=="object"&&F!==null?F=vn(F):(F=Kt(o)?js:Ot.current,F=Pi(r,F));var Q=o.getDerivedStateFromProps,Y=typeof Q=="function"||typeof _.getSnapshotBeforeUpdate=="function";Y||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==u||V!==F)&&ep(r,_,u,F),Yr=!1;var G=r.memoizedState;_.state=G,vl(r,u,_,h),V=r.memoizedState,A!==u||G!==V||Qt.current||Yr?(typeof Q=="function"&&(Dc(r,o,Q,u),V=r.memoizedState),(A=Yr||Jf(r,o,A,u,G,V,F))?(Y||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=V),_.props=u,_.state=V,_.context=F,u=A):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{_=r.stateNode,Cf(t,r),A=r.memoizedProps,F=r.type===r.elementType?A:kn(r.type,A),_.props=F,Y=r.pendingProps,G=_.context,V=o.contextType,typeof V=="object"&&V!==null?V=vn(V):(V=Kt(o)?js:Ot.current,V=Pi(r,V));var re=o.getDerivedStateFromProps;(Q=typeof re=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==Y||G!==V)&&ep(r,_,u,V),Yr=!1,G=r.memoizedState,_.state=G,vl(r,u,_,h);var ue=r.memoizedState;A!==Y||G!==ue||Qt.current||Yr?(typeof re=="function"&&(Dc(r,o,re,u),ue=r.memoizedState),(F=Yr||Jf(r,o,F,u,G,ue,V)||!1)?(Q||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,ue,V),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,ue,V)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===t.memoizedProps&&G===t.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===t.memoizedProps&&G===t.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=ue),_.props=u,_.state=ue,_.context=V,u=F):(typeof _.componentDidUpdate!="function"||A===t.memoizedProps&&G===t.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===t.memoizedProps&&G===t.memoizedState||(r.flags|=1024),u=!1)}return bc(t,r,o,u,f,h)}function bc(t,r,o,u,h,f){cp(t,r);var _=(r.flags&128)!==0;if(!u&&!_)return h&&gf(r,o,!1),xr(t,r,f);u=r.stateNode,U_.current=r;var A=_&&typeof o.getDerivedStateFromError!="function"?null:u.render();return r.flags|=1,t!==null&&_?(r.child=Mi(r,t.child,null,f),r.child=Mi(r,null,A,f)):Ht(t,r,A,f),r.memoizedState=u.state,h&&gf(r,o,!0),r.child}function dp(t){var r=t.stateNode;r.pendingContext?pf(t,r.pendingContext,r.pendingContext!==r.context):r.context&&pf(t,r.context,!1),Ec(t,r.containerInfo)}function fp(t,r,o,u,h){return Di(),pc(h),r.flags|=256,Ht(t,r,o,u),r.child}var Fc={dehydrated:null,treeContext:null,retryLane:0};function Uc(t){return{baseLanes:t,cachePool:null,transitions:null}}function pp(t,r,o){var u=r.pendingProps,h=tt.current,f=!1,_=(r.flags&128)!==0,A;if((A=_)||(A=t!==null&&t.memoizedState===null?!1:(h&2)!==0),A?(f=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(h|=1),Qe(tt,h&1),t===null)return fc(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((r.mode&1)===0?r.lanes=1:t.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(_=u.children,t=u.fallback,f?(u=r.mode,f=r.child,_={mode:"hidden",children:_},(u&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=_):f=Ul(_,u,0,null),t=Hs(t,u,o,null),f.return=r,t.return=r,f.sibling=t,r.child=f,r.child.memoizedState=Uc(o),r.memoizedState=Fc,t):zc(r,_));if(h=t.memoizedState,h!==null&&(A=h.dehydrated,A!==null))return z_(t,r,_,u,A,h,o);if(f){f=u.fallback,_=r.mode,h=t.child,A=h.sibling;var V={mode:"hidden",children:u.children};return(_&1)===0&&r.child!==h?(u=r.child,u.childLanes=0,u.pendingProps=V,r.deletions=null):(u=ss(h,V),u.subtreeFlags=h.subtreeFlags&14680064),A!==null?f=ss(A,f):(f=Hs(f,_,o,null),f.flags|=2),f.return=r,u.return=r,u.sibling=f,r.child=u,u=f,f=r.child,_=t.child.memoizedState,_=_===null?Uc(o):{baseLanes:_.baseLanes|o,cachePool:null,transitions:_.transitions},f.memoizedState=_,f.childLanes=t.childLanes&~o,r.memoizedState=Fc,u}return f=t.child,t=f.sibling,u=ss(f,{mode:"visible",children:u.children}),(r.mode&1)===0&&(u.lanes=o),u.return=r,u.sibling=null,t!==null&&(o=r.deletions,o===null?(r.deletions=[t],r.flags|=16):o.push(t)),r.child=u,r.memoizedState=null,u}function zc(t,r){return r=Ul({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function Cl(t,r,o,u){return u!==null&&pc(u),Mi(r,t.child,null,o),t=zc(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function z_(t,r,o,u,h,f,_){if(o)return r.flags&256?(r.flags&=-257,u=jc(Error(n(422))),Cl(t,r,_,u)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(f=u.fallback,h=r.mode,u=Ul({mode:"visible",children:u.children},h,0,null),f=Hs(f,h,_,null),f.flags|=2,u.return=r,f.return=r,u.sibling=f,r.child=u,(r.mode&1)!==0&&Mi(r,t.child,null,_),r.child.memoizedState=Uc(_),r.memoizedState=Fc,f);if((r.mode&1)===0)return Cl(t,r,_,null);if(h.data==="$!"){if(u=h.nextSibling&&h.nextSibling.dataset,u)var A=u.dgst;return u=A,f=Error(n(419)),u=jc(f,u,void 0),Cl(t,r,_,u)}if(A=(_&t.childLanes)!==0,Xt||A){if(u=At,u!==null){switch(_&-_){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(u.suspendedLanes|_))!==0?0:h,h!==0&&h!==f.retryLane&&(f.retryLane=h,Tr(t,h),Mn(u,t,h,-1))}return rh(),u=jc(Error(n(421))),Cl(t,r,_,u)}return h.data==="$?"?(r.flags|=128,r.child=t.child,r=ev.bind(null,t),h._reactRetry=r,null):(t=f.treeContext,hn=Gr(h.nextSibling),cn=r,et=!0,Pn=null,t!==null&&(yn[_n++]=wr,yn[_n++]=Er,yn[_n++]=Ls,wr=t.id,Er=t.overflow,Ls=r),r=zc(r,u.children),r.flags|=4096,r)}function mp(t,r,o){t.lanes|=r;var u=t.alternate;u!==null&&(u.lanes|=r),_c(t.return,r,o)}function Bc(t,r,o,u,h){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:h}:(f.isBackwards=r,f.rendering=null,f.renderingStartTime=0,f.last=u,f.tail=o,f.tailMode=h)}function gp(t,r,o){var u=r.pendingProps,h=u.revealOrder,f=u.tail;if(Ht(t,r,u.children,o),u=tt.current,(u&2)!==0)u=u&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&mp(t,o,r);else if(t.tag===19)mp(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(Qe(tt,u),(r.mode&1)===0)r.memoizedState=null;else switch(h){case"forwards":for(o=r.child,h=null;o!==null;)t=o.alternate,t!==null&&wl(t)===null&&(h=o),o=o.sibling;o=h,o===null?(h=r.child,r.child=null):(h=o.sibling,o.sibling=null),Bc(r,!1,h,o,f);break;case"backwards":for(o=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&wl(t)===null){r.child=h;break}t=h.sibling,h.sibling=o,o=h,h=t}Bc(r,!0,o,null,f);break;case"together":Bc(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Rl(t,r){(r.mode&1)===0&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function xr(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),zs|=r.lanes,(o&r.childLanes)===0)return null;if(t!==null&&r.child!==t.child)throw Error(n(153));if(r.child!==null){for(t=r.child,o=ss(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=ss(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function B_(t,r,o){switch(r.tag){case 3:dp(r),Di();break;case 5:Pf(r);break;case 1:Kt(r.type)&&cl(r);break;case 4:Ec(r,r.stateNode.containerInfo);break;case 10:var u=r.type._context,h=r.memoizedProps.value;Qe(gl,u._currentValue),u._currentValue=h;break;case 13:if(u=r.memoizedState,u!==null)return u.dehydrated!==null?(Qe(tt,tt.current&1),r.flags|=128,null):(o&r.child.childLanes)!==0?pp(t,r,o):(Qe(tt,tt.current&1),t=xr(t,r,o),t!==null?t.sibling:null);Qe(tt,tt.current&1);break;case 19:if(u=(o&r.childLanes)!==0,(t.flags&128)!==0){if(u)return gp(t,r,o);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Qe(tt,tt.current),u)break;return null;case 22:case 23:return r.lanes=0,up(t,r,o)}return xr(t,r,o)}var yp,$c,_p,vp;yp=function(t,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},$c=function(){},_p=function(t,r,o,u){var h=t.memoizedProps;if(h!==u){t=r.stateNode,Fs(Yn.current);var f=null;switch(o){case"input":h=ni(t,h),u=ni(t,u),f=[];break;case"select":h=se({},h,{value:void 0}),u=se({},u,{value:void 0}),f=[];break;case"textarea":h=co(t,h),u=co(t,u),f=[];break;default:typeof h.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=al)}An(o,u);var _;o=null;for(F in h)if(!u.hasOwnProperty(F)&&h.hasOwnProperty(F)&&h[F]!=null)if(F==="style"){var A=h[F];for(_ in A)A.hasOwnProperty(_)&&(o||(o={}),o[_]="")}else F!=="dangerouslySetInnerHTML"&&F!=="children"&&F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(a.hasOwnProperty(F)?f||(f=[]):(f=f||[]).push(F,null));for(F in u){var V=u[F];if(A=h!=null?h[F]:void 0,u.hasOwnProperty(F)&&V!==A&&(V!=null||A!=null))if(F==="style")if(A){for(_ in A)!A.hasOwnProperty(_)||V&&V.hasOwnProperty(_)||(o||(o={}),o[_]="");for(_ in V)V.hasOwnProperty(_)&&A[_]!==V[_]&&(o||(o={}),o[_]=V[_])}else o||(f||(f=[]),f.push(F,o)),o=V;else F==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,A=A?A.__html:void 0,V!=null&&A!==V&&(f=f||[]).push(F,V)):F==="children"?typeof V!="string"&&typeof V!="number"||(f=f||[]).push(F,""+V):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&(a.hasOwnProperty(F)?(V!=null&&F==="onScroll"&&Ye("scroll",t),f||A===V||(f=[])):(f=f||[]).push(F,V))}o&&(f=f||[]).push("style",o);var F=f;(r.updateQueue=F)&&(r.flags|=4)}},vp=function(t,r,o,u){o!==u&&(r.flags|=4)};function Yo(t,r){if(!et)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Ft(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,u=0;if(r)for(var h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags&14680064,u|=h.flags&14680064,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=u,t.childLanes=o,r}function $_(t,r,o){var u=r.pendingProps;switch(hc(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(r),null;case 1:return Kt(r.type)&&ul(),Ft(r),null;case 3:return u=r.stateNode,Oi(),Je(Qt),Je(Ot),xc(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(pl(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Pn!==null&&(eh(Pn),Pn=null))),$c(t,r),Ft(r),null;case 5:Tc(r);var h=Fs(Wo.current);if(o=r.type,t!==null&&r.stateNode!=null)_p(t,r,o,u,h),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!u){if(r.stateNode===null)throw Error(n(166));return Ft(r),null}if(t=Fs(Yn.current),pl(r)){u=r.stateNode,o=r.type;var f=r.memoizedProps;switch(u[Xn]=r,u[zo]=f,t=(r.mode&1)!==0,o){case"dialog":Ye("cancel",u),Ye("close",u);break;case"iframe":case"object":case"embed":Ye("load",u);break;case"video":case"audio":for(h=0;h<bo.length;h++)Ye(bo[h],u);break;case"source":Ye("error",u);break;case"img":case"image":case"link":Ye("error",u),Ye("load",u);break;case"details":Ye("toggle",u);break;case"input":Va(u,f),Ye("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!f.multiple},Ye("invalid",u);break;case"textarea":ho(u,f),Ye("invalid",u)}An(o,f),h=null;for(var _ in f)if(f.hasOwnProperty(_)){var A=f[_];_==="children"?typeof A=="string"?u.textContent!==A&&(f.suppressHydrationWarning!==!0&&ol(u.textContent,A,t),h=["children",A]):typeof A=="number"&&u.textContent!==""+A&&(f.suppressHydrationWarning!==!0&&ol(u.textContent,A,t),h=["children",""+A]):a.hasOwnProperty(_)&&A!=null&&_==="onScroll"&&Ye("scroll",u)}switch(o){case"input":ti(u),uo(u,f,!0);break;case"textarea":ti(u),kr(u);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(u.onclick=al)}u=h,r.updateQueue=u,u!==null&&(r.flags|=4)}else{_=h.nodeType===9?h:h.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=fo(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=_.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=_.createElement(o,{is:u.is}):(t=_.createElement(o),o==="select"&&(_=t,u.multiple?_.multiple=!0:u.size&&(_.size=u.size))):t=_.createElementNS(t,o),t[Xn]=r,t[zo]=u,yp(t,r,!1,!1),r.stateNode=t;e:{switch(_=oi(o,u),o){case"dialog":Ye("cancel",t),Ye("close",t),h=u;break;case"iframe":case"object":case"embed":Ye("load",t),h=u;break;case"video":case"audio":for(h=0;h<bo.length;h++)Ye(bo[h],t);h=u;break;case"source":Ye("error",t),h=u;break;case"img":case"image":case"link":Ye("error",t),Ye("load",t),h=u;break;case"details":Ye("toggle",t),h=u;break;case"input":Va(t,u),h=ni(t,u),Ye("invalid",t);break;case"option":h=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},h=se({},u,{value:void 0}),Ye("invalid",t);break;case"textarea":ho(t,u),h=co(t,u),Ye("invalid",t);break;default:h=u}An(o,h),A=h;for(f in A)if(A.hasOwnProperty(f)){var V=A[f];f==="style"?ii(t,V):f==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,V!=null&&Ma(t,V)):f==="children"?typeof V=="string"?(o!=="textarea"||V!=="")&&ws(t,V):typeof V=="number"&&ws(t,""+V):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(a.hasOwnProperty(f)?V!=null&&f==="onScroll"&&Ye("scroll",t):V!=null&&me(t,f,V,_))}switch(o){case"input":ti(t),uo(t,u,!1);break;case"textarea":ti(t),kr(t);break;case"option":u.value!=null&&t.setAttribute("value",""+Re(u.value));break;case"select":t.multiple=!!u.multiple,f=u.value,f!=null?In(t,!!u.multiple,f,!1):u.defaultValue!=null&&In(t,!!u.multiple,u.defaultValue,!0);break;default:typeof h.onClick=="function"&&(t.onclick=al)}switch(o){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Ft(r),null;case 6:if(t&&r.stateNode!=null)vp(t,r,t.memoizedProps,u);else{if(typeof u!="string"&&r.stateNode===null)throw Error(n(166));if(o=Fs(Wo.current),Fs(Yn.current),pl(r)){if(u=r.stateNode,o=r.memoizedProps,u[Xn]=r,(f=u.nodeValue!==o)&&(t=cn,t!==null))switch(t.tag){case 3:ol(u.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ol(u.nodeValue,o,(t.mode&1)!==0)}f&&(r.flags|=4)}else u=(o.nodeType===9?o:o.ownerDocument).createTextNode(u),u[Xn]=r,r.stateNode=u}return Ft(r),null;case 13:if(Je(tt),u=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(et&&hn!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Tf(),Di(),r.flags|=98560,f=!1;else if(f=pl(r),u!==null&&u.dehydrated!==null){if(t===null){if(!f)throw Error(n(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(n(317));f[Xn]=r}else Di(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ft(r),f=!1}else Pn!==null&&(eh(Pn),Pn=null),f=!0;if(!f)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=o,r):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(r.child.flags|=8192,(r.mode&1)!==0&&(t===null||(tt.current&1)!==0?Tt===0&&(Tt=3):rh())),r.updateQueue!==null&&(r.flags|=4),Ft(r),null);case 4:return Oi(),$c(t,r),t===null&&Fo(r.stateNode.containerInfo),Ft(r),null;case 10:return yc(r.type._context),Ft(r),null;case 17:return Kt(r.type)&&ul(),Ft(r),null;case 19:if(Je(tt),f=r.memoizedState,f===null)return Ft(r),null;if(u=(r.flags&128)!==0,_=f.rendering,_===null)if(u)Yo(f,!1);else{if(Tt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(_=wl(t),_!==null){for(r.flags|=128,Yo(f,!1),u=_.updateQueue,u!==null&&(r.updateQueue=u,r.flags|=4),r.subtreeFlags=0,u=o,o=r.child;o!==null;)f=o,t=u,f.flags&=14680066,_=f.alternate,_===null?(f.childLanes=0,f.lanes=t,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=_.childLanes,f.lanes=_.lanes,f.child=_.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=_.memoizedProps,f.memoizedState=_.memoizedState,f.updateQueue=_.updateQueue,f.type=_.type,t=_.dependencies,f.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return Qe(tt,tt.current&1|2),r.child}t=t.sibling}f.tail!==null&&Xe()>zi&&(r.flags|=128,u=!0,Yo(f,!1),r.lanes=4194304)}else{if(!u)if(t=wl(_),t!==null){if(r.flags|=128,u=!0,o=t.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),Yo(f,!0),f.tail===null&&f.tailMode==="hidden"&&!_.alternate&&!et)return Ft(r),null}else 2*Xe()-f.renderingStartTime>zi&&o!==1073741824&&(r.flags|=128,u=!0,Yo(f,!1),r.lanes=4194304);f.isBackwards?(_.sibling=r.child,r.child=_):(o=f.last,o!==null?o.sibling=_:r.child=_,f.last=_)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=Xe(),r.sibling=null,o=tt.current,Qe(tt,u?o&1|2:o&1),r):(Ft(r),null);case 22:case 23:return nh(),u=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(r.flags|=8192),u&&(r.mode&1)!==0?(dn&1073741824)!==0&&(Ft(r),r.subtreeFlags&6&&(r.flags|=8192)):Ft(r),null;case 24:return null;case 25:return null}throw Error(n(156,r.tag))}function q_(t,r){switch(hc(r),r.tag){case 1:return Kt(r.type)&&ul(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Oi(),Je(Qt),Je(Ot),xc(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 5:return Tc(r),null;case 13:if(Je(tt),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(n(340));Di()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return Je(tt),null;case 4:return Oi(),null;case 10:return yc(r.type._context),null;case 22:case 23:return nh(),null;case 24:return null;default:return null}}var Nl=!1,Ut=!1,H_=typeof WeakSet=="function"?WeakSet:Set,oe=null;function Fi(t,r){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(u){at(t,r,u)}else o.current=null}function qc(t,r,o){try{o()}catch(u){at(t,r,u)}}var wp=!1;function W_(t,r){if(nc=mr,t=Yd(),Qu(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var h=u.anchorOffset,f=u.focusNode;u=u.focusOffset;try{o.nodeType,f.nodeType}catch{o=null;break e}var _=0,A=-1,V=-1,F=0,Q=0,Y=t,G=null;t:for(;;){for(var re;Y!==o||h!==0&&Y.nodeType!==3||(A=_+h),Y!==f||u!==0&&Y.nodeType!==3||(V=_+u),Y.nodeType===3&&(_+=Y.nodeValue.length),(re=Y.firstChild)!==null;)G=Y,Y=re;for(;;){if(Y===t)break t;if(G===o&&++F===h&&(A=_),G===f&&++Q===u&&(V=_),(re=Y.nextSibling)!==null)break;Y=G,G=Y.parentNode}Y=re}o=A===-1||V===-1?null:{start:A,end:V}}else o=null}o=o||{start:0,end:0}}else o=null;for(rc={focusedElem:t,selectionRange:o},mr=!1,oe=r;oe!==null;)if(r=oe,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,oe=t;else for(;oe!==null;){r=oe;try{var ue=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ue!==null){var ce=ue.memoizedProps,ct=ue.memoizedState,L=r.stateNode,M=L.getSnapshotBeforeUpdate(r.elementType===r.type?ce:kn(r.type,ce),ct);L.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var b=r.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(J){at(r,r.return,J)}if(t=r.sibling,t!==null){t.return=r.return,oe=t;break}oe=r.return}return ue=wp,wp=!1,ue}function Jo(t,r,o){var u=r.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var h=u=u.next;do{if((h.tag&t)===t){var f=h.destroy;h.destroy=void 0,f!==void 0&&qc(r,o,f)}h=h.next}while(h!==u)}}function Pl(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var u=o.create;o.destroy=u()}o=o.next}while(o!==r)}}function Hc(t){var r=t.ref;if(r!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof r=="function"?r(t):r.current=t}}function Ep(t){var r=t.alternate;r!==null&&(t.alternate=null,Ep(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[Xn],delete r[zo],delete r[ac],delete r[R_],delete r[N_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Tp(t){return t.tag===5||t.tag===3||t.tag===4}function Sp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Tp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Wc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(t,r):o.insertBefore(t,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(t,o)):(r=o,r.appendChild(t)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=al));else if(u!==4&&(t=t.child,t!==null))for(Wc(t,r,o),t=t.sibling;t!==null;)Wc(t,r,o),t=t.sibling}function Gc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(Gc(t,r,o),t=t.sibling;t!==null;)Gc(t,r,o),t=t.sibling}var kt=null,Vn=!1;function Zr(t,r,o){for(o=o.child;o!==null;)xp(t,r,o),o=o.sibling}function xp(t,r,o){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(Is,o)}catch{}switch(o.tag){case 5:Ut||Fi(o,r);case 6:var u=kt,h=Vn;kt=null,Zr(t,r,o),kt=u,Vn=h,kt!==null&&(Vn?(t=kt,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):kt.removeChild(o.stateNode));break;case 18:kt!==null&&(Vn?(t=kt,o=o.stateNode,t.nodeType===8?oc(t.parentNode,o):t.nodeType===1&&oc(t,o),$r(t)):oc(kt,o.stateNode));break;case 4:u=kt,h=Vn,kt=o.stateNode.containerInfo,Vn=!0,Zr(t,r,o),kt=u,Vn=h;break;case 0:case 11:case 14:case 15:if(!Ut&&(u=o.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){h=u=u.next;do{var f=h,_=f.destroy;f=f.tag,_!==void 0&&((f&2)!==0||(f&4)!==0)&&qc(o,r,_),h=h.next}while(h!==u)}Zr(t,r,o);break;case 1:if(!Ut&&(Fi(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=o.memoizedProps,u.state=o.memoizedState,u.componentWillUnmount()}catch(A){at(o,r,A)}Zr(t,r,o);break;case 21:Zr(t,r,o);break;case 22:o.mode&1?(Ut=(u=Ut)||o.memoizedState!==null,Zr(t,r,o),Ut=u):Zr(t,r,o);break;default:Zr(t,r,o)}}function Ip(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new H_),r.forEach(function(u){var h=tv.bind(null,t,u);o.has(u)||(o.add(u),u.then(h,h))})}}function Dn(t,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];try{var f=t,_=r,A=_;e:for(;A!==null;){switch(A.tag){case 5:kt=A.stateNode,Vn=!1;break e;case 3:kt=A.stateNode.containerInfo,Vn=!0;break e;case 4:kt=A.stateNode.containerInfo,Vn=!0;break e}A=A.return}if(kt===null)throw Error(n(160));xp(f,_,h),kt=null,Vn=!1;var V=h.alternate;V!==null&&(V.return=null),h.return=null}catch(F){at(h,r,F)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Ap(r,t),r=r.sibling}function Ap(t,r){var o=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dn(r,t),Zn(t),u&4){try{Jo(3,t,t.return),Pl(3,t)}catch(ce){at(t,t.return,ce)}try{Jo(5,t,t.return)}catch(ce){at(t,t.return,ce)}}break;case 1:Dn(r,t),Zn(t),u&512&&o!==null&&Fi(o,o.return);break;case 5:if(Dn(r,t),Zn(t),u&512&&o!==null&&Fi(o,o.return),t.flags&32){var h=t.stateNode;try{ws(h,"")}catch(ce){at(t,t.return,ce)}}if(u&4&&(h=t.stateNode,h!=null)){var f=t.memoizedProps,_=o!==null?o.memoizedProps:f,A=t.type,V=t.updateQueue;if(t.updateQueue=null,V!==null)try{A==="input"&&f.type==="radio"&&f.name!=null&&ri(h,f),oi(A,_);var F=oi(A,f);for(_=0;_<V.length;_+=2){var Q=V[_],Y=V[_+1];Q==="style"?ii(h,Y):Q==="dangerouslySetInnerHTML"?Ma(h,Y):Q==="children"?ws(h,Y):me(h,Q,Y,F)}switch(A){case"input":vs(h,f);break;case"textarea":Da(h,f);break;case"select":var G=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!f.multiple;var re=f.value;re!=null?In(h,!!f.multiple,re,!1):G!==!!f.multiple&&(f.defaultValue!=null?In(h,!!f.multiple,f.defaultValue,!0):In(h,!!f.multiple,f.multiple?[]:"",!1))}h[zo]=f}catch(ce){at(t,t.return,ce)}}break;case 6:if(Dn(r,t),Zn(t),u&4){if(t.stateNode===null)throw Error(n(162));h=t.stateNode,f=t.memoizedProps;try{h.nodeValue=f}catch(ce){at(t,t.return,ce)}}break;case 3:if(Dn(r,t),Zn(t),u&4&&o!==null&&o.memoizedState.isDehydrated)try{$r(r.containerInfo)}catch(ce){at(t,t.return,ce)}break;case 4:Dn(r,t),Zn(t);break;case 13:Dn(r,t),Zn(t),h=t.child,h.flags&8192&&(f=h.memoizedState!==null,h.stateNode.isHidden=f,!f||h.alternate!==null&&h.alternate.memoizedState!==null||(Xc=Xe())),u&4&&Ip(t);break;case 22:if(Q=o!==null&&o.memoizedState!==null,t.mode&1?(Ut=(F=Ut)||Q,Dn(r,t),Ut=F):Dn(r,t),Zn(t),u&8192){if(F=t.memoizedState!==null,(t.stateNode.isHidden=F)&&!Q&&(t.mode&1)!==0)for(oe=t,Q=t.child;Q!==null;){for(Y=oe=Q;oe!==null;){switch(G=oe,re=G.child,G.tag){case 0:case 11:case 14:case 15:Jo(4,G,G.return);break;case 1:Fi(G,G.return);var ue=G.stateNode;if(typeof ue.componentWillUnmount=="function"){u=G,o=G.return;try{r=u,ue.props=r.memoizedProps,ue.state=r.memoizedState,ue.componentWillUnmount()}catch(ce){at(u,o,ce)}}break;case 5:Fi(G,G.return);break;case 22:if(G.memoizedState!==null){Np(Y);continue}}re!==null?(re.return=G,oe=re):Np(Y)}Q=Q.sibling}e:for(Q=null,Y=t;;){if(Y.tag===5){if(Q===null){Q=Y;try{h=Y.stateNode,F?(f=h.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(A=Y.stateNode,V=Y.memoizedProps.style,_=V!=null&&V.hasOwnProperty("display")?V.display:null,A.style.display=Mr("display",_))}catch(ce){at(t,t.return,ce)}}}else if(Y.tag===6){if(Q===null)try{Y.stateNode.nodeValue=F?"":Y.memoizedProps}catch(ce){at(t,t.return,ce)}}else if((Y.tag!==22&&Y.tag!==23||Y.memoizedState===null||Y===t)&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===t)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===t)break e;Q===Y&&(Q=null),Y=Y.return}Q===Y&&(Q=null),Y.sibling.return=Y.return,Y=Y.sibling}}break;case 19:Dn(r,t),Zn(t),u&4&&Ip(t);break;case 21:break;default:Dn(r,t),Zn(t)}}function Zn(t){var r=t.flags;if(r&2){try{e:{for(var o=t.return;o!==null;){if(Tp(o)){var u=o;break e}o=o.return}throw Error(n(160))}switch(u.tag){case 5:var h=u.stateNode;u.flags&32&&(ws(h,""),u.flags&=-33);var f=Sp(t);Gc(t,f,h);break;case 3:case 4:var _=u.stateNode.containerInfo,A=Sp(t);Wc(t,A,_);break;default:throw Error(n(161))}}catch(V){at(t,t.return,V)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function G_(t,r,o){oe=t,Cp(t)}function Cp(t,r,o){for(var u=(t.mode&1)!==0;oe!==null;){var h=oe,f=h.child;if(h.tag===22&&u){var _=h.memoizedState!==null||Nl;if(!_){var A=h.alternate,V=A!==null&&A.memoizedState!==null||Ut;A=Nl;var F=Ut;if(Nl=_,(Ut=V)&&!F)for(oe=h;oe!==null;)_=oe,V=_.child,_.tag===22&&_.memoizedState!==null?Pp(h):V!==null?(V.return=_,oe=V):Pp(h);for(;f!==null;)oe=f,Cp(f),f=f.sibling;oe=h,Nl=A,Ut=F}Rp(t)}else(h.subtreeFlags&8772)!==0&&f!==null?(f.return=h,oe=f):Rp(t)}}function Rp(t){for(;oe!==null;){var r=oe;if((r.flags&8772)!==0){var o=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Ut||Pl(5,r);break;case 1:var u=r.stateNode;if(r.flags&4&&!Ut)if(o===null)u.componentDidMount();else{var h=r.elementType===r.type?o.memoizedProps:kn(r.type,o.memoizedProps);u.componentDidUpdate(h,o.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var f=r.updateQueue;f!==null&&Nf(r,f,u);break;case 3:var _=r.updateQueue;if(_!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}Nf(r,_,o)}break;case 5:var A=r.stateNode;if(o===null&&r.flags&4){o=A;var V=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":V.autoFocus&&o.focus();break;case"img":V.src&&(o.src=V.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var F=r.alternate;if(F!==null){var Q=F.memoizedState;if(Q!==null){var Y=Q.dehydrated;Y!==null&&$r(Y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ut||r.flags&512&&Hc(r)}catch(G){at(r,r.return,G)}}if(r===t){oe=null;break}if(o=r.sibling,o!==null){o.return=r.return,oe=o;break}oe=r.return}}function Np(t){for(;oe!==null;){var r=oe;if(r===t){oe=null;break}var o=r.sibling;if(o!==null){o.return=r.return,oe=o;break}oe=r.return}}function Pp(t){for(;oe!==null;){var r=oe;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{Pl(4,r)}catch(V){at(r,o,V)}break;case 1:var u=r.stateNode;if(typeof u.componentDidMount=="function"){var h=r.return;try{u.componentDidMount()}catch(V){at(r,h,V)}}var f=r.return;try{Hc(r)}catch(V){at(r,f,V)}break;case 5:var _=r.return;try{Hc(r)}catch(V){at(r,_,V)}}}catch(V){at(r,r.return,V)}if(r===t){oe=null;break}var A=r.sibling;if(A!==null){A.return=r.return,oe=A;break}oe=r.return}}var Q_=Math.ceil,kl=Ce.ReactCurrentDispatcher,Qc=Ce.ReactCurrentOwner,En=Ce.ReactCurrentBatchConfig,Oe=0,At=null,gt=null,Vt=0,dn=0,Ui=Qr(0),Tt=0,Zo=null,zs=0,Vl=0,Kc=0,ea=null,Yt=null,Xc=0,zi=1/0,Ir=null,Dl=!1,Yc=null,es=null,Ml=!1,ts=null,jl=0,ta=0,Jc=null,Ll=-1,Ol=0;function Wt(){return(Oe&6)!==0?Xe():Ll!==-1?Ll:Ll=Xe()}function ns(t){return(t.mode&1)===0?1:(Oe&2)!==0&&Vt!==0?Vt&-Vt:k_.transition!==null?(Ol===0&&(Ol=To()),Ol):(t=De,t!==0||(t=window.event,t=t===void 0?16:gi(t.type)),t)}function Mn(t,r,o,u){if(50<ta)throw ta=0,Jc=null,Error(n(185));Ns(t,o,u),((Oe&2)===0||t!==At)&&(t===At&&((Oe&2)===0&&(Vl|=o),Tt===4&&rs(t,Vt)),Jt(t,u),o===1&&Oe===0&&(r.mode&1)===0&&(zi=Xe()+500,hl&&Xr()))}function Jt(t,r){var o=t.callbackNode;Rs(t,r);var u=dr(t,t===At?Vt:0);if(u===0)o!==null&&ui(o),t.callbackNode=null,t.callbackPriority=0;else if(r=u&-u,t.callbackPriority!==r){if(o!=null&&ui(o),r===1)t.tag===0?P_(Vp.bind(null,t)):yf(Vp.bind(null,t)),A_(function(){(Oe&6)===0&&Xr()}),o=null;else{switch(Un(u)){case 1:o=ci;break;case 4:o=vo;break;case 16:o=xs;break;case 536870912:o=hi;break;default:o=xs}o=Up(o,kp.bind(null,t))}t.callbackPriority=r,t.callbackNode=o}}function kp(t,r){if(Ll=-1,Ol=0,(Oe&6)!==0)throw Error(n(327));var o=t.callbackNode;if(Bi()&&t.callbackNode!==o)return null;var u=dr(t,t===At?Vt:0);if(u===0)return null;if((u&30)!==0||(u&t.expiredLanes)!==0||r)r=bl(t,u);else{r=u;var h=Oe;Oe|=2;var f=Mp();(At!==t||Vt!==r)&&(Ir=null,zi=Xe()+500,$s(t,r));do try{Y_();break}catch(A){Dp(t,A)}while(!0);gc(),kl.current=f,Oe=h,gt!==null?r=0:(At=null,Vt=0,r=Tt)}if(r!==0){if(r===2&&(h=Eo(t),h!==0&&(u=h,r=Zc(t,h))),r===1)throw o=Zo,$s(t,0),rs(t,u),Jt(t,Xe()),o;if(r===6)rs(t,u);else{if(h=t.current.alternate,(u&30)===0&&!K_(h)&&(r=bl(t,u),r===2&&(f=Eo(t),f!==0&&(u=f,r=Zc(t,f))),r===1))throw o=Zo,$s(t,0),rs(t,u),Jt(t,Xe()),o;switch(t.finishedWork=h,t.finishedLanes=u,r){case 0:case 1:throw Error(n(345));case 2:qs(t,Yt,Ir);break;case 3:if(rs(t,u),(u&130023424)===u&&(r=Xc+500-Xe(),10<r)){if(dr(t,0)!==0)break;if(h=t.suspendedLanes,(h&u)!==u){Wt(),t.pingedLanes|=t.suspendedLanes&h;break}t.timeoutHandle=ic(qs.bind(null,t,Yt,Ir),r);break}qs(t,Yt,Ir);break;case 4:if(rs(t,u),(u&4194240)===u)break;for(r=t.eventTimes,h=-1;0<u;){var _=31-sn(u);f=1<<_,_=r[_],_>h&&(h=_),u&=~f}if(u=h,u=Xe()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*Q_(u/1960))-u,10<u){t.timeoutHandle=ic(qs.bind(null,t,Yt,Ir),u);break}qs(t,Yt,Ir);break;case 5:qs(t,Yt,Ir);break;default:throw Error(n(329))}}}return Jt(t,Xe()),t.callbackNode===o?kp.bind(null,t):null}function Zc(t,r){var o=ea;return t.current.memoizedState.isDehydrated&&($s(t,r).flags|=256),t=bl(t,r),t!==2&&(r=Yt,Yt=o,r!==null&&eh(r)),t}function eh(t){Yt===null?Yt=t:Yt.push.apply(Yt,t)}function K_(t){for(var r=t;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var u=0;u<o.length;u++){var h=o[u],f=h.getSnapshot;h=h.value;try{if(!Nn(f(),h))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function rs(t,r){for(r&=~Kc,r&=~Vl,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var o=31-sn(r),u=1<<o;t[o]=-1,r&=~u}}function Vp(t){if((Oe&6)!==0)throw Error(n(327));Bi();var r=dr(t,0);if((r&1)===0)return Jt(t,Xe()),null;var o=bl(t,r);if(t.tag!==0&&o===2){var u=Eo(t);u!==0&&(r=u,o=Zc(t,u))}if(o===1)throw o=Zo,$s(t,0),rs(t,r),Jt(t,Xe()),o;if(o===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,qs(t,Yt,Ir),Jt(t,Xe()),null}function th(t,r){var o=Oe;Oe|=1;try{return t(r)}finally{Oe=o,Oe===0&&(zi=Xe()+500,hl&&Xr())}}function Bs(t){ts!==null&&ts.tag===0&&(Oe&6)===0&&Bi();var r=Oe;Oe|=1;var o=En.transition,u=De;try{if(En.transition=null,De=1,t)return t()}finally{De=u,En.transition=o,Oe=r,(Oe&6)===0&&Xr()}}function nh(){dn=Ui.current,Je(Ui)}function $s(t,r){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,I_(o)),gt!==null)for(o=gt.return;o!==null;){var u=o;switch(hc(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&ul();break;case 3:Oi(),Je(Qt),Je(Ot),xc();break;case 5:Tc(u);break;case 4:Oi();break;case 13:Je(tt);break;case 19:Je(tt);break;case 10:yc(u.type._context);break;case 22:case 23:nh()}o=o.return}if(At=t,gt=t=ss(t.current,null),Vt=dn=r,Tt=0,Zo=null,Kc=Vl=zs=0,Yt=ea=null,bs!==null){for(r=0;r<bs.length;r++)if(o=bs[r],u=o.interleaved,u!==null){o.interleaved=null;var h=u.next,f=o.pending;if(f!==null){var _=f.next;f.next=h,u.next=_}o.pending=u}bs=null}return t}function Dp(t,r){do{var o=gt;try{if(gc(),El.current=Il,Tl){for(var u=nt.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}Tl=!1}if(Us=0,It=Et=nt=null,Go=!1,Qo=0,Qc.current=null,o===null||o.return===null){Tt=1,Zo=r,gt=null;break}e:{var f=t,_=o.return,A=o,V=r;if(r=Vt,A.flags|=32768,V!==null&&typeof V=="object"&&typeof V.then=="function"){var F=V,Q=A,Y=Q.tag;if((Q.mode&1)===0&&(Y===0||Y===11||Y===15)){var G=Q.alternate;G?(Q.updateQueue=G.updateQueue,Q.memoizedState=G.memoizedState,Q.lanes=G.lanes):(Q.updateQueue=null,Q.memoizedState=null)}var re=sp(_);if(re!==null){re.flags&=-257,ip(re,_,A,f,r),re.mode&1&&rp(f,F,r),r=re,V=F;var ue=r.updateQueue;if(ue===null){var ce=new Set;ce.add(V),r.updateQueue=ce}else ue.add(V);break e}else{if((r&1)===0){rp(f,F,r),rh();break e}V=Error(n(426))}}else if(et&&A.mode&1){var ct=sp(_);if(ct!==null){(ct.flags&65536)===0&&(ct.flags|=256),ip(ct,_,A,f,r),pc(bi(V,A));break e}}f=V=bi(V,A),Tt!==4&&(Tt=2),ea===null?ea=[f]:ea.push(f),f=_;do{switch(f.tag){case 3:f.flags|=65536,r&=-r,f.lanes|=r;var L=tp(f,V,r);Rf(f,L);break e;case 1:A=V;var M=f.type,b=f.stateNode;if((f.flags&128)===0&&(typeof M.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(es===null||!es.has(b)))){f.flags|=65536,r&=-r,f.lanes|=r;var J=np(f,A,r);Rf(f,J);break e}}f=f.return}while(f!==null)}Lp(o)}catch(he){r=he,gt===o&&o!==null&&(gt=o=o.return);continue}break}while(!0)}function Mp(){var t=kl.current;return kl.current=Il,t===null?Il:t}function rh(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),At===null||(zs&268435455)===0&&(Vl&268435455)===0||rs(At,Vt)}function bl(t,r){var o=Oe;Oe|=2;var u=Mp();(At!==t||Vt!==r)&&(Ir=null,$s(t,r));do try{X_();break}catch(h){Dp(t,h)}while(!0);if(gc(),Oe=o,kl.current=u,gt!==null)throw Error(n(261));return At=null,Vt=0,Tt}function X_(){for(;gt!==null;)jp(gt)}function Y_(){for(;gt!==null&&!Ss();)jp(gt)}function jp(t){var r=Fp(t.alternate,t,dn);t.memoizedProps=t.pendingProps,r===null?Lp(t):gt=r,Qc.current=null}function Lp(t){var r=t;do{var o=r.alternate;if(t=r.return,(r.flags&32768)===0){if(o=$_(o,r,dn),o!==null){gt=o;return}}else{if(o=q_(o,r),o!==null){o.flags&=32767,gt=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Tt=6,gt=null;return}}if(r=r.sibling,r!==null){gt=r;return}gt=r=t}while(r!==null);Tt===0&&(Tt=5)}function qs(t,r,o){var u=De,h=En.transition;try{En.transition=null,De=1,J_(t,r,o,u)}finally{En.transition=h,De=u}return null}function J_(t,r,o,u){do Bi();while(ts!==null);if((Oe&6)!==0)throw Error(n(327));o=t.finishedWork;var h=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var f=o.lanes|o.childLanes;if($u(t,f),t===At&&(gt=At=null,Vt=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||Ml||(Ml=!0,Up(xs,function(){return Bi(),null})),f=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||f){f=En.transition,En.transition=null;var _=De;De=1;var A=Oe;Oe|=4,Qc.current=null,W_(t,o),Ap(o,t),__(rc),mr=!!nc,rc=nc=null,t.current=o,G_(o),hr(),Oe=A,De=_,En.transition=f}else t.current=o;if(Ml&&(Ml=!1,ts=t,jl=h),f=t.pendingLanes,f===0&&(es=null),Ha(o.stateNode),Jt(t,Xe()),r!==null)for(u=t.onRecoverableError,o=0;o<r.length;o++)h=r[o],u(h.value,{componentStack:h.stack,digest:h.digest});if(Dl)throw Dl=!1,t=Yc,Yc=null,t;return(jl&1)!==0&&t.tag!==0&&Bi(),f=t.pendingLanes,(f&1)!==0?t===Jc?ta++:(ta=0,Jc=t):ta=0,Xr(),null}function Bi(){if(ts!==null){var t=Un(jl),r=En.transition,o=De;try{if(En.transition=null,De=16>t?16:t,ts===null)var u=!1;else{if(t=ts,ts=null,jl=0,(Oe&6)!==0)throw Error(n(331));var h=Oe;for(Oe|=4,oe=t.current;oe!==null;){var f=oe,_=f.child;if((oe.flags&16)!==0){var A=f.deletions;if(A!==null){for(var V=0;V<A.length;V++){var F=A[V];for(oe=F;oe!==null;){var Q=oe;switch(Q.tag){case 0:case 11:case 15:Jo(8,Q,f)}var Y=Q.child;if(Y!==null)Y.return=Q,oe=Y;else for(;oe!==null;){Q=oe;var G=Q.sibling,re=Q.return;if(Ep(Q),Q===F){oe=null;break}if(G!==null){G.return=re,oe=G;break}oe=re}}}var ue=f.alternate;if(ue!==null){var ce=ue.child;if(ce!==null){ue.child=null;do{var ct=ce.sibling;ce.sibling=null,ce=ct}while(ce!==null)}}oe=f}}if((f.subtreeFlags&2064)!==0&&_!==null)_.return=f,oe=_;else e:for(;oe!==null;){if(f=oe,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:Jo(9,f,f.return)}var L=f.sibling;if(L!==null){L.return=f.return,oe=L;break e}oe=f.return}}var M=t.current;for(oe=M;oe!==null;){_=oe;var b=_.child;if((_.subtreeFlags&2064)!==0&&b!==null)b.return=_,oe=b;else e:for(_=M;oe!==null;){if(A=oe,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:Pl(9,A)}}catch(he){at(A,A.return,he)}if(A===_){oe=null;break e}var J=A.sibling;if(J!==null){J.return=A.return,oe=J;break e}oe=A.return}}if(Oe=h,Xr(),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(Is,t)}catch{}u=!0}return u}finally{De=o,En.transition=r}}return!1}function Op(t,r,o){r=bi(o,r),r=tp(t,r,1),t=Jr(t,r,1),r=Wt(),t!==null&&(Ns(t,1,r),Jt(t,r))}function at(t,r,o){if(t.tag===3)Op(t,t,o);else for(;r!==null;){if(r.tag===3){Op(r,t,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(es===null||!es.has(u))){t=bi(o,t),t=np(r,t,1),r=Jr(r,t,1),t=Wt(),r!==null&&(Ns(r,1,t),Jt(r,t));break}}r=r.return}}function Z_(t,r,o){var u=t.pingCache;u!==null&&u.delete(r),r=Wt(),t.pingedLanes|=t.suspendedLanes&o,At===t&&(Vt&o)===o&&(Tt===4||Tt===3&&(Vt&130023424)===Vt&&500>Xe()-Xc?$s(t,0):Kc|=o),Jt(t,r)}function bp(t,r){r===0&&((t.mode&1)===0?r=1:(r=Ur,Ur<<=1,(Ur&130023424)===0&&(Ur=4194304)));var o=Wt();t=Tr(t,r),t!==null&&(Ns(t,r,o),Jt(t,o))}function ev(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),bp(t,o)}function tv(t,r){var o=0;switch(t.tag){case 13:var u=t.stateNode,h=t.memoizedState;h!==null&&(o=h.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(n(314))}u!==null&&u.delete(r),bp(t,o)}var Fp;Fp=function(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps||Qt.current)Xt=!0;else{if((t.lanes&o)===0&&(r.flags&128)===0)return Xt=!1,B_(t,r,o);Xt=(t.flags&131072)!==0}else Xt=!1,et&&(r.flags&1048576)!==0&&_f(r,fl,r.index);switch(r.lanes=0,r.tag){case 2:var u=r.type;Rl(t,r),t=r.pendingProps;var h=Pi(r,Ot.current);Li(r,o),h=Cc(null,r,u,t,h,o);var f=Rc();return r.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Kt(u)?(f=!0,cl(r)):f=!1,r.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,wc(r),h.updater=Al,r.stateNode=h,h._reactInternals=r,Mc(r,u,t,o),r=bc(null,r,u,!0,f,o)):(r.tag=0,et&&f&&cc(r),Ht(null,r,h,o),r=r.child),r;case 16:u=r.elementType;e:{switch(Rl(t,r),t=r.pendingProps,h=u._init,u=h(u._payload),r.type=u,h=r.tag=rv(u),t=kn(u,t),h){case 0:r=Oc(null,r,u,t,o);break e;case 1:r=hp(null,r,u,t,o);break e;case 11:r=op(null,r,u,t,o);break e;case 14:r=ap(null,r,u,kn(u.type,t),o);break e}throw Error(n(306,u,""))}return r;case 0:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:kn(u,h),Oc(t,r,u,h,o);case 1:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:kn(u,h),hp(t,r,u,h,o);case 3:e:{if(dp(r),t===null)throw Error(n(387));u=r.pendingProps,f=r.memoizedState,h=f.element,Cf(t,r),vl(r,u,null,o);var _=r.memoizedState;if(u=_.element,f.isDehydrated)if(f={element:u,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},r.updateQueue.baseState=f,r.memoizedState=f,r.flags&256){h=bi(Error(n(423)),r),r=fp(t,r,u,o,h);break e}else if(u!==h){h=bi(Error(n(424)),r),r=fp(t,r,u,o,h);break e}else for(hn=Gr(r.stateNode.containerInfo.firstChild),cn=r,et=!0,Pn=null,o=If(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Di(),u===h){r=xr(t,r,o);break e}Ht(t,r,u,o)}r=r.child}return r;case 5:return Pf(r),t===null&&fc(r),u=r.type,h=r.pendingProps,f=t!==null?t.memoizedProps:null,_=h.children,sc(u,h)?_=null:f!==null&&sc(u,f)&&(r.flags|=32),cp(t,r),Ht(t,r,_,o),r.child;case 6:return t===null&&fc(r),null;case 13:return pp(t,r,o);case 4:return Ec(r,r.stateNode.containerInfo),u=r.pendingProps,t===null?r.child=Mi(r,null,u,o):Ht(t,r,u,o),r.child;case 11:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:kn(u,h),op(t,r,u,h,o);case 7:return Ht(t,r,r.pendingProps,o),r.child;case 8:return Ht(t,r,r.pendingProps.children,o),r.child;case 12:return Ht(t,r,r.pendingProps.children,o),r.child;case 10:e:{if(u=r.type._context,h=r.pendingProps,f=r.memoizedProps,_=h.value,Qe(gl,u._currentValue),u._currentValue=_,f!==null)if(Nn(f.value,_)){if(f.children===h.children&&!Qt.current){r=xr(t,r,o);break e}}else for(f=r.child,f!==null&&(f.return=r);f!==null;){var A=f.dependencies;if(A!==null){_=f.child;for(var V=A.firstContext;V!==null;){if(V.context===u){if(f.tag===1){V=Sr(-1,o&-o),V.tag=2;var F=f.updateQueue;if(F!==null){F=F.shared;var Q=F.pending;Q===null?V.next=V:(V.next=Q.next,Q.next=V),F.pending=V}}f.lanes|=o,V=f.alternate,V!==null&&(V.lanes|=o),_c(f.return,o,r),A.lanes|=o;break}V=V.next}}else if(f.tag===10)_=f.type===r.type?null:f.child;else if(f.tag===18){if(_=f.return,_===null)throw Error(n(341));_.lanes|=o,A=_.alternate,A!==null&&(A.lanes|=o),_c(_,o,r),_=f.sibling}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===r){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}Ht(t,r,h.children,o),r=r.child}return r;case 9:return h=r.type,u=r.pendingProps.children,Li(r,o),h=vn(h),u=u(h),r.flags|=1,Ht(t,r,u,o),r.child;case 14:return u=r.type,h=kn(u,r.pendingProps),h=kn(u.type,h),ap(t,r,u,h,o);case 15:return lp(t,r,r.type,r.pendingProps,o);case 17:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:kn(u,h),Rl(t,r),r.tag=1,Kt(u)?(t=!0,cl(r)):t=!1,Li(r,o),Zf(r,u,h),Mc(r,u,h,o),bc(null,r,u,!0,t,o);case 19:return gp(t,r,o);case 22:return up(t,r,o)}throw Error(n(156,r.tag))};function Up(t,r){return _o(t,r)}function nv(t,r,o,u){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tn(t,r,o,u){return new nv(t,r,o,u)}function sh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function rv(t){if(typeof t=="function")return sh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===j)return 11;if(t===ft)return 14}return 2}function ss(t,r){var o=t.alternate;return o===null?(o=Tn(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function Fl(t,r,o,u,h,f){var _=2;if(u=t,typeof t=="function")sh(t)&&(_=1);else if(typeof t=="string")_=5;else e:switch(t){case k:return Hs(o.children,h,f,r);case I:_=8,h|=8;break;case x:return t=Tn(12,o,r,h|2),t.elementType=x,t.lanes=f,t;case C:return t=Tn(13,o,r,h),t.elementType=C,t.lanes=f,t;case ze:return t=Tn(19,o,r,h),t.elementType=ze,t.lanes=f,t;case Ge:return Ul(o,h,f,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case P:_=10;break e;case N:_=9;break e;case j:_=11;break e;case ft:_=14;break e;case xt:_=16,u=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return r=Tn(_,o,r,h),r.elementType=t,r.type=u,r.lanes=f,r}function Hs(t,r,o,u){return t=Tn(7,t,u,r),t.lanes=o,t}function Ul(t,r,o,u){return t=Tn(22,t,u,r),t.elementType=Ge,t.lanes=o,t.stateNode={isHidden:!1},t}function ih(t,r,o){return t=Tn(6,t,null,r),t.lanes=o,t}function oh(t,r,o){return r=Tn(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function sv(t,r,o,u,h){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=So(0),this.expirationTimes=So(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=So(0),this.identifierPrefix=u,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function ah(t,r,o,u,h,f,_,A,V){return t=new sv(t,r,o,A,V),r===1?(r=1,f===!0&&(r|=8)):r=0,f=Tn(3,null,null,r),t.current=f,f.stateNode=t,f.memoizedState={element:u,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},wc(f),t}function iv(t,r,o){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:K,key:u==null?null:""+u,children:t,containerInfo:r,implementation:o}}function zp(t){if(!t)return Kr;t=t._reactInternals;e:{if(Cn(t)!==t||t.tag!==1)throw Error(n(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Kt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(n(171))}if(t.tag===1){var o=t.type;if(Kt(o))return mf(t,o,r)}return r}function Bp(t,r,o,u,h,f,_,A,V){return t=ah(o,u,!0,t,h,f,_,A,V),t.context=zp(null),o=t.current,u=Wt(),h=ns(o),f=Sr(u,h),f.callback=r??null,Jr(o,f,h),t.current.lanes=h,Ns(t,h,u),Jt(t,u),t}function zl(t,r,o,u){var h=r.current,f=Wt(),_=ns(h);return o=zp(o),r.context===null?r.context=o:r.pendingContext=o,r=Sr(f,_),r.payload={element:t},u=u===void 0?null:u,u!==null&&(r.callback=u),t=Jr(h,r,_),t!==null&&(Mn(t,h,_,f),_l(t,h,_)),_}function Bl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $p(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function lh(t,r){$p(t,r),(t=t.alternate)&&$p(t,r)}function ov(){return null}var qp=typeof reportError=="function"?reportError:function(t){console.error(t)};function uh(t){this._internalRoot=t}$l.prototype.render=uh.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(n(409));zl(t,r,null,null)},$l.prototype.unmount=uh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Bs(function(){zl(null,t,null,null)}),r[_r]=null}};function $l(t){this._internalRoot=t}$l.prototype.unstable_scheduleHydration=function(t){if(t){var r=Co();t={blockedOn:null,target:t,priority:r};for(var o=0;o<on.length&&r!==0&&r<on[o].priority;o++);on.splice(o,0,t),o===0&&pi(t)}};function ch(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ql(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Hp(){}function av(t,r,o,u,h){if(h){if(typeof u=="function"){var f=u;u=function(){var F=Bl(_);f.call(F)}}var _=Bp(r,u,t,0,null,!1,!1,"",Hp);return t._reactRootContainer=_,t[_r]=_.current,Fo(t.nodeType===8?t.parentNode:t),Bs(),_}for(;h=t.lastChild;)t.removeChild(h);if(typeof u=="function"){var A=u;u=function(){var F=Bl(V);A.call(F)}}var V=ah(t,0,!1,null,null,!1,!1,"",Hp);return t._reactRootContainer=V,t[_r]=V.current,Fo(t.nodeType===8?t.parentNode:t),Bs(function(){zl(r,V,o,u)}),V}function Hl(t,r,o,u,h){var f=o._reactRootContainer;if(f){var _=f;if(typeof h=="function"){var A=h;h=function(){var V=Bl(_);A.call(V)}}zl(r,_,t,h)}else _=av(o,r,t,h,u);return Bl(_)}Io=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var o=Fe(r.pendingLanes);o!==0&&(xo(r,o|1),Jt(r,Xe()),(Oe&6)===0&&(zi=Xe()+500,Xr()))}break;case 13:Bs(function(){var u=Tr(t,1);if(u!==null){var h=Wt();Mn(u,t,1,h)}}),lh(t,1)}},di=function(t){if(t.tag===13){var r=Tr(t,134217728);if(r!==null){var o=Wt();Mn(r,t,134217728,o)}lh(t,134217728)}},Ao=function(t){if(t.tag===13){var r=ns(t),o=Tr(t,r);if(o!==null){var u=Wt();Mn(o,t,r,u)}lh(t,r)}},Co=function(){return De},Ro=function(t,r){var o=De;try{return De=t,r()}finally{De=o}},lr=function(t,r,o){switch(r){case"input":if(vs(t,o),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==t&&u.form===t.form){var h=ll(u);if(!h)throw Error(n(90));lo(u),vs(u,h)}}}break;case"textarea":Da(t,o);break;case"select":r=o.value,r!=null&&In(t,!!o.multiple,r,!1)}},La=th,Oa=Bs;var lv={usingClientEntryPoint:!1,Events:[Bo,Ri,ll,Lr,Or,th]},na={findFiberByHostInstance:Ms,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uv={bundleType:na.bundleType,version:na.version,rendererPackageName:na.rendererPackageName,rendererConfig:na.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ce.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=qa(t),t===null?null:t.stateNode},findFiberByHostInstance:na.findFiberByHostInstance||ov,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wl.isDisabled&&Wl.supportsFiber)try{Is=Wl.inject(uv),rn=Wl}catch{}}return Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lv,Zt.createPortal=function(t,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ch(r))throw Error(n(200));return iv(t,r,null,o)},Zt.createRoot=function(t,r){if(!ch(t))throw Error(n(299));var o=!1,u="",h=qp;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),r=ah(t,1,!1,null,null,o,!1,u,h),t[_r]=r.current,Fo(t.nodeType===8?t.parentNode:t),new uh(r)},Zt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=qa(r),t=t===null?null:t.stateNode,t},Zt.flushSync=function(t){return Bs(t)},Zt.hydrate=function(t,r,o){if(!ql(r))throw Error(n(200));return Hl(null,t,r,!0,o)},Zt.hydrateRoot=function(t,r,o){if(!ch(t))throw Error(n(405));var u=o!=null&&o.hydratedSources||null,h=!1,f="",_=qp;if(o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(_=o.onRecoverableError)),r=Bp(r,null,t,1,o??null,h,!1,f,_),t[_r]=r.current,Fo(t),u)for(t=0;t<u.length;t++)o=u[t],h=o._getVersion,h=h(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,h]:r.mutableSourceEagerHydrationData.push(o,h);return new $l(r)},Zt.render=function(t,r,o){if(!ql(r))throw Error(n(200));return Hl(null,t,r,!1,o)},Zt.unmountComponentAtNode=function(t){if(!ql(t))throw Error(n(40));return t._reactRootContainer?(Bs(function(){Hl(null,null,t,!1,function(){t._reactRootContainer=null,t[_r]=null})}),!0):!1},Zt.unstable_batchedUpdates=th,Zt.unstable_renderSubtreeIntoContainer=function(t,r,o,u){if(!ql(o))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return Hl(t,r,o,!1,u)},Zt.version="18.3.1-next-f1338f8080-20240426",Zt}var Zp;function _v(){if(Zp)return fh.exports;Zp=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),fh.exports=yv(),fh.exports}var em;function vv(){if(em)return Gl;em=1;var s=_v();return Gl.createRoot=s.createRoot,Gl.hydrateRoot=s.hydrateRoot,Gl}var wv=vv();const Ev=mg(wv);var Tv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Sv=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xv=(s,e)=>{const n=Ee.forwardRef(({color:i="currentColor",size:a=24,strokeWidth:c=2,absoluteStrokeWidth:d,children:m,...y},v)=>Ee.createElement("svg",{ref:v,...Tv,width:a,height:a,stroke:i,strokeWidth:d?Number(c)*24/Number(a):c,className:`lucide lucide-${Sv(s)}`,...y},[...e.map(([T,R])=>Ee.createElement(T,R)),...(Array.isArray(m)?m:[m])||[]]));return n.displayName=`${s}`,n};var Gt=xv;const tm=Gt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Iv=Gt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Av=Gt("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),gg=Gt("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),Cv=Gt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),ga=Gt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),Rv=Gt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),nm=Gt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),iu=Gt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Nv=Gt("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),Pv=Gt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),kv=Gt("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),Vv=Gt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Dv=Gt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Mv=Gt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Pe=({children:s,variant:e="primary",fullWidth:n=!1,className:i="",...a})=>{const c="py-3 px-6 rounded-xl font-bold transition-all duration-300 transform hover:scale-[1.02] shadow-md disabled:opacity-50 disabled:cursor-not-allowed",d={primary:"bg-primary text-white hover:bg-secondary",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300",danger:"bg-danger text-white hover:bg-red-700",accent:"bg-accent text-white hover:bg-orange-600",purple:"bg-purple-600 text-white hover:bg-purple-700",pink:"bg-pink-500 text-white hover:bg-pink-600"};return w.jsx("button",{className:`${c} ${d[e]} ${n?"w-full":""} ${i}`,...a,children:s})},ht=({children:s,className:e="",title:n,actions:i})=>w.jsxs("div",{className:`bg-white rounded-2xl shadow-[0_2px_12px_rgba(80,180,82,0.1)] p-6 md:p-8 ${e}`,children:[(n||i)&&w.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n&&w.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-secondary text-center",children:n}),i&&w.jsx("div",{children:i})]}),s]}),rt=({label:s,className:e="",...n})=>w.jsxs("div",{className:"mb-4",children:[w.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-right",children:s}),w.jsx("input",{className:`w-full p-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all text-right ${e}`,...n})]}),Rh=({label:s,children:e,...n})=>w.jsxs("div",{className:"mb-4",children:[w.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-right",children:s}),w.jsx("select",{className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all text-right bg-white",...n,children:e})]}),gh=({label:s,value:e,colorClass:n="text-primary",icon:i})=>w.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm flex flex-col items-center justify-center text-center hover:shadow-md transition-shadow",children:[i&&w.jsx(i,{className:`w-8 h-8 mb-2 ${n}`}),w.jsx("div",{className:"text-gray-500 text-sm mb-1",children:s}),w.jsx("div",{className:`text-3xl font-bold ${n}`,children:e})]}),sa=({onNavigate:s})=>w.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[70vh] px-4 animate-[fadeIn_0.5s_ease-out]",children:[w.jsxs("div",{className:"text-center mb-8",children:[w.jsx("p",{className:"text-xl text-primary font-bold mb-6",children:"     "}),w.jsxs("div",{className:"space-y-2 text-gray-800 text-lg md:text-xl font-medium max-w-2xl mx-auto leading-relaxed",children:[w.jsx("p",{children:"      ...    "}),w.jsx("p",{children:"    ...      "})]})]}),w.jsx("div",{className:"w-full max-w-md",children:w.jsxs(ht,{className:"animate-[slideUp_0.5s_ease-out]",children:[w.jsxs("p",{className:"text-center text-gray-800 mb-6 leading-relaxed",children:["        ",w.jsx("br",{}),"     ."]}),w.jsxs("div",{className:"space-y-3",children:[w.jsx(Pe,{fullWidth:!0,onClick:()=>s("LOGIN_TEACHER"),children:" "}),w.jsx(Pe,{fullWidth:!0,variant:"purple",onClick:()=>s("LOGIN_ADMIN"),children:" "}),w.jsx(Pe,{fullWidth:!0,variant:"pink",onClick:()=>s("LOGIN_STUDENT"),children:" "}),w.jsx(Pe,{fullWidth:!0,variant:"accent",onClick:()=>s("REGISTER_STUDENT"),children:"  "})]})]})})]}),jv=()=>{};var rm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg=function(s){const e=[];let n=0;for(let i=0;i<s.length;i++){let a=s.charCodeAt(i);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++i)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},Lv=function(s){const e=[];let n=0,i=0;for(;n<s.length;){const a=s[n++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const c=s[n++];e[i++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=s[n++],d=s[n++],m=s[n++],y=((a&7)<<18|(c&63)<<12|(d&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(y>>10)),e[i++]=String.fromCharCode(56320+(y&1023))}else{const c=s[n++],d=s[n++];e[i++]=String.fromCharCode((a&15)<<12|(c&63)<<6|d&63)}}return e.join("")},_g={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<s.length;a+=3){const c=s[a],d=a+1<s.length,m=d?s[a+1]:0,y=a+2<s.length,v=y?s[a+2]:0,T=c>>2,R=(c&3)<<4|m>>4;let D=(m&15)<<2|v>>6,z=v&63;y||(z=64,d||(D=64)),i.push(n[T],n[R],n[D],n[z])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(yg(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):Lv(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<s.length;){const c=n[s.charAt(a++)],m=a<s.length?n[s.charAt(a)]:0;++a;const v=a<s.length?n[s.charAt(a)]:64;++a;const R=a<s.length?n[s.charAt(a)]:64;if(++a,c==null||m==null||v==null||R==null)throw new Ov;const D=c<<2|m>>4;if(i.push(D),v!==64){const z=m<<4&240|v>>2;if(i.push(z),R!==64){const X=v<<6&192|R;i.push(X)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class Ov extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bv=function(s){const e=yg(s);return _g.encodeByteArray(e,!0)},ou=function(s){return bv(s).replace(/\./g,"")},Fv=function(s){try{return _g.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv=()=>Uv().__FIREBASE_DEFAULTS__,Bv=()=>{if(typeof process>"u"||typeof rm>"u")return;const s=rm.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},$v=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&Fv(s[1]);return e&&JSON.parse(e)},Zh=()=>{try{return jv()||zv()||Bv()||$v()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},qv=s=>{var e,n;return(n=(e=Zh())==null?void 0:e.emulatorHosts)==null?void 0:n[s]},Hv=s=>{const e=qv(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},vg=()=>{var s;return(s=Zh())==null?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Gv(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",a=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[ou(JSON.stringify(n)),ou(JSON.stringify(d)),""].join(".")}const ha={};function Kv(){const s={prod:[],emulator:[]};for(const e of Object.keys(ha))ha[e]?s.emulator.push(e):s.prod.push(e);return s}function Xv(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let sm=!1;function Yv(s,e){if(typeof window>"u"||typeof document>"u"||!ed(window.location.host)||ha[s]===e||ha[s]||sm)return;ha[s]=e;function n(D){return`__firebase__banner__${D}`}const i="__firebase__banner",c=Kv().prod.length>0;function d(){const D=document.getElementById(i);D&&D.remove()}function m(D){D.style.display="flex",D.style.background="#7faaf0",D.style.position="fixed",D.style.bottom="5px",D.style.left="5px",D.style.padding=".5em",D.style.borderRadius="5px",D.style.alignItems="center"}function y(D,z){D.setAttribute("width","24"),D.setAttribute("id",z),D.setAttribute("height","24"),D.setAttribute("viewBox","0 0 24 24"),D.setAttribute("fill","none"),D.style.marginLeft="-6px"}function v(){const D=document.createElement("span");return D.style.cursor="pointer",D.style.marginLeft="16px",D.style.fontSize="24px",D.innerHTML=" &times;",D.onclick=()=>{sm=!0,d()},D}function T(D,z){D.setAttribute("id",z),D.innerText="Learn more",D.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",D.setAttribute("target","__blank"),D.style.paddingLeft="5px",D.style.textDecoration="underline"}function R(){const D=Xv(i),z=n("text"),X=document.getElementById(z)||document.createElement("span"),H=n("learnmore"),B=document.getElementById(H)||document.createElement("a"),ne=n("preprendIcon"),ae=document.getElementById(ne)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(D.created){const me=D.element;m(me),T(B,H);const Ce=v();y(ae,ne),me.append(ae,X,B,Ce),document.body.appendChild(me)}c?(X.innerText="Preview backend disconnected.",ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,X.innerText="Preview backend running in this workspace."),X.setAttribute("id",z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",R):R()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Zv(){var e;const s=(e=Zh())==null?void 0:e.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function e0(){return!Zv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function t0(){try{return typeof indexedDB=="object"}catch{return!1}}function n0(){return new Promise((s,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(i),s(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var c;e(((c=a.error)==null?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0="FirebaseError";class no extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=r0,Object.setPrototypeOf(this,no.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wg.prototype.create)}}class wg{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},a=`${this.service}/${e}`,c=this.errors[e],d=c?s0(c,i):"Error",m=`${this.serviceName}: ${d} (${a}).`;return new no(a,m,i)}}function s0(s,e){return s.replace(i0,(n,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const i0=/\{\$([^}]+)}/g;function au(s,e){if(s===e)return!0;const n=Object.keys(s),i=Object.keys(e);for(const a of n){if(!i.includes(a))return!1;const c=s[a],d=e[a];if(im(c)&&im(d)){if(!au(c,d))return!1}else if(c!==d)return!1}for(const a of i)if(!n.includes(a))return!1;return!0}function im(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(s){return s&&s._delegate?s._delegate:s}class ya{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Wv;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(l0(e))try{this.getOrInitializeService({instanceIdentifier:Gs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:a});i.resolve(c)}catch{}}}}clearInstance(e=Gs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Gs){return this.instances.has(e)}getOptions(e=Gs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[c,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);i===m&&d.resolve(a)}return a}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const c=this.instances.get(i);return c&&e(c,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const a of i)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:a0(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Gs){return this.component?this.component.multipleInstances?e:Gs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function a0(s){return s===Gs?void 0:s}function l0(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new o0(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(je||(je={}));const c0={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},h0=je.INFO,d0={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},f0=(s,e,...n)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),a=d0[e];if(a)console[a](`[${i}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Eg{constructor(e){this.name=e,this._logLevel=h0,this._logHandler=f0,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?c0[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const p0=(s,e)=>e.some(n=>s instanceof n);let om,am;function m0(){return om||(om=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function g0(){return am||(am=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Tg=new WeakMap,Nh=new WeakMap,Sg=new WeakMap,yh=new WeakMap,td=new WeakMap;function y0(s){const e=new Promise((n,i)=>{const a=()=>{s.removeEventListener("success",c),s.removeEventListener("error",d)},c=()=>{n(as(s.result)),a()},d=()=>{i(s.error),a()};s.addEventListener("success",c),s.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&Tg.set(n,s)}).catch(()=>{}),td.set(e,s),e}function _0(s){if(Nh.has(s))return;const e=new Promise((n,i)=>{const a=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",d),s.removeEventListener("abort",d)},c=()=>{n(),a()},d=()=>{i(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",c),s.addEventListener("error",d),s.addEventListener("abort",d)});Nh.set(s,e)}let Ph={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return Nh.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Sg.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return as(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function v0(s){Ph=s(Ph)}function w0(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=s.call(_h(this),e,...n);return Sg.set(i,e.sort?e.sort():[e]),as(i)}:g0().includes(s)?function(...e){return s.apply(_h(this),e),as(Tg.get(this))}:function(...e){return as(s.apply(_h(this),e))}}function E0(s){return typeof s=="function"?w0(s):(s instanceof IDBTransaction&&_0(s),p0(s,m0())?new Proxy(s,Ph):s)}function as(s){if(s instanceof IDBRequest)return y0(s);if(yh.has(s))return yh.get(s);const e=E0(s);return e!==s&&(yh.set(s,e),td.set(e,s)),e}const _h=s=>td.get(s);function T0(s,e,{blocked:n,upgrade:i,blocking:a,terminated:c}={}){const d=indexedDB.open(s,e),m=as(d);return i&&d.addEventListener("upgradeneeded",y=>{i(as(d.result),y.oldVersion,y.newVersion,as(d.transaction),y)}),n&&d.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),m.then(y=>{c&&y.addEventListener("close",()=>c()),a&&y.addEventListener("versionchange",v=>a(v.oldVersion,v.newVersion,v))}).catch(()=>{}),m}const S0=["get","getKey","getAll","getAllKeys","count"],x0=["put","add","delete","clear"],vh=new Map;function lm(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(vh.get(e))return vh.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,a=x0.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(a||S0.includes(n)))return;const c=async function(d,...m){const y=this.transaction(d,a?"readwrite":"readonly");let v=y.store;return i&&(v=v.index(m.shift())),(await Promise.all([v[n](...m),a&&y.done]))[0]};return vh.set(e,c),c}v0(s=>({...s,get:(e,n,i)=>lm(e,n)||s.get(e,n,i),has:(e,n)=>!!lm(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(A0(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function A0(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const kh="@firebase/app",um="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr=new Eg("@firebase/app"),C0="@firebase/app-compat",R0="@firebase/analytics-compat",N0="@firebase/analytics",P0="@firebase/app-check-compat",k0="@firebase/app-check",V0="@firebase/auth",D0="@firebase/auth-compat",M0="@firebase/database",j0="@firebase/data-connect",L0="@firebase/database-compat",O0="@firebase/functions",b0="@firebase/functions-compat",F0="@firebase/installations",U0="@firebase/installations-compat",z0="@firebase/messaging",B0="@firebase/messaging-compat",$0="@firebase/performance",q0="@firebase/performance-compat",H0="@firebase/remote-config",W0="@firebase/remote-config-compat",G0="@firebase/storage",Q0="@firebase/storage-compat",K0="@firebase/firestore",X0="@firebase/ai",Y0="@firebase/firestore-compat",J0="firebase",Z0="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh="[DEFAULT]",e1={[kh]:"fire-core",[C0]:"fire-core-compat",[N0]:"fire-analytics",[R0]:"fire-analytics-compat",[k0]:"fire-app-check",[P0]:"fire-app-check-compat",[V0]:"fire-auth",[D0]:"fire-auth-compat",[M0]:"fire-rtdb",[j0]:"fire-data-connect",[L0]:"fire-rtdb-compat",[O0]:"fire-fn",[b0]:"fire-fn-compat",[F0]:"fire-iid",[U0]:"fire-iid-compat",[z0]:"fire-fcm",[B0]:"fire-fcm-compat",[$0]:"fire-perf",[q0]:"fire-perf-compat",[H0]:"fire-rc",[W0]:"fire-rc-compat",[G0]:"fire-gcs",[Q0]:"fire-gcs-compat",[K0]:"fire-fst",[Y0]:"fire-fst-compat",[X0]:"fire-vertex","fire-js":"fire-js",[J0]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu=new Map,t1=new Map,Dh=new Map;function cm(s,e){try{s.container.addComponent(e)}catch(n){Cr.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function uu(s){const e=s.name;if(Dh.has(e))return Cr.debug(`There were multiple attempts to register component ${e}.`),!1;Dh.set(e,s);for(const n of lu.values())cm(n,s);for(const n of t1.values())cm(n,s);return!0}function n1(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function r1(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ls=new wg("app","Firebase",s1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ya("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ls.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1=Z0;function xg(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const i={name:Vh,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw ls.create("bad-app-name",{appName:String(a)});if(n||(n=vg()),!n)throw ls.create("no-options");const c=lu.get(a);if(c){if(au(n,c.options)&&au(i,c.config))return c;throw ls.create("duplicate-app",{appName:a})}const d=new u0(a);for(const y of Dh.values())d.addComponent(y);const m=new i1(n,i,d);return lu.set(a,m),m}function a1(s=Vh){const e=lu.get(s);if(!e&&s===Vh&&vg())return xg();if(!e)throw ls.create("no-app",{appName:s});return e}function Gi(s,e,n){let i=e1[s]??s;n&&(i+=`-${n}`);const a=i.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const d=[`Unable to register library "${i}" with version "${e}":`];a&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cr.warn(d.join(" "));return}uu(new ya(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1="firebase-heartbeat-database",u1=1,_a="firebase-heartbeat-store";let wh=null;function Ig(){return wh||(wh=T0(l1,u1,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(_a)}catch(n){console.warn(n)}}}}).catch(s=>{throw ls.create("idb-open",{originalErrorMessage:s.message})})),wh}async function c1(s){try{const n=(await Ig()).transaction(_a),i=await n.objectStore(_a).get(Ag(s));return await n.done,i}catch(e){if(e instanceof no)Cr.warn(e.message);else{const n=ls.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Cr.warn(n.message)}}}async function hm(s,e){try{const i=(await Ig()).transaction(_a,"readwrite");await i.objectStore(_a).put(e,Ag(s)),await i.done}catch(n){if(n instanceof no)Cr.warn(n.message);else{const i=ls.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Cr.warn(i.message)}}}function Ag(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1=1024,d1=30;class f1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new m1(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=dm();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats.length>d1){const d=g1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Cr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=dm(),{heartbeatsToSend:i,unsentEntries:a}=p1(this._heartbeatsCache.heartbeats),c=ou(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return Cr.warn(n),""}}}function dm(){return new Date().toISOString().substring(0,10)}function p1(s,e=h1){const n=[];let i=s.slice();for(const a of s){const c=n.find(d=>d.agent===a.agent);if(c){if(c.dates.push(a.date),fm(n)>e){c.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),fm(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class m1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return t0()?n0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await c1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return hm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return hm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function fm(s){return ou(JSON.stringify({version:2,heartbeats:s})).length}function g1(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let i=1;i<s.length;i++)s[i].date<n&&(n=s[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(s){uu(new ya("platform-logger",e=>new I0(e),"PRIVATE")),uu(new ya("heartbeat",e=>new f1(e),"PRIVATE")),Gi(kh,um,s),Gi(kh,um,"esm2020"),Gi("fire-js","")}y1("");var _1="firebase",v1="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gi(_1,v1,"app");var pm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var us,Cg;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,I){function x(){}x.prototype=I.prototype,k.F=I.prototype,k.prototype=new x,k.prototype.constructor=k,k.D=function(P,N,j){for(var C=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)C[ze-2]=arguments[ze];return I.prototype[N].apply(P,C)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(k,I,x){x||(x=0);const P=Array(16);if(typeof I=="string")for(var N=0;N<16;++N)P[N]=I.charCodeAt(x++)|I.charCodeAt(x++)<<8|I.charCodeAt(x++)<<16|I.charCodeAt(x++)<<24;else for(N=0;N<16;++N)P[N]=I[x++]|I[x++]<<8|I[x++]<<16|I[x++]<<24;I=k.g[0],x=k.g[1],N=k.g[2];let j=k.g[3],C;C=I+(j^x&(N^j))+P[0]+3614090360&4294967295,I=x+(C<<7&4294967295|C>>>25),C=j+(N^I&(x^N))+P[1]+3905402710&4294967295,j=I+(C<<12&4294967295|C>>>20),C=N+(x^j&(I^x))+P[2]+606105819&4294967295,N=j+(C<<17&4294967295|C>>>15),C=x+(I^N&(j^I))+P[3]+3250441966&4294967295,x=N+(C<<22&4294967295|C>>>10),C=I+(j^x&(N^j))+P[4]+4118548399&4294967295,I=x+(C<<7&4294967295|C>>>25),C=j+(N^I&(x^N))+P[5]+1200080426&4294967295,j=I+(C<<12&4294967295|C>>>20),C=N+(x^j&(I^x))+P[6]+2821735955&4294967295,N=j+(C<<17&4294967295|C>>>15),C=x+(I^N&(j^I))+P[7]+4249261313&4294967295,x=N+(C<<22&4294967295|C>>>10),C=I+(j^x&(N^j))+P[8]+1770035416&4294967295,I=x+(C<<7&4294967295|C>>>25),C=j+(N^I&(x^N))+P[9]+2336552879&4294967295,j=I+(C<<12&4294967295|C>>>20),C=N+(x^j&(I^x))+P[10]+4294925233&4294967295,N=j+(C<<17&4294967295|C>>>15),C=x+(I^N&(j^I))+P[11]+2304563134&4294967295,x=N+(C<<22&4294967295|C>>>10),C=I+(j^x&(N^j))+P[12]+1804603682&4294967295,I=x+(C<<7&4294967295|C>>>25),C=j+(N^I&(x^N))+P[13]+4254626195&4294967295,j=I+(C<<12&4294967295|C>>>20),C=N+(x^j&(I^x))+P[14]+2792965006&4294967295,N=j+(C<<17&4294967295|C>>>15),C=x+(I^N&(j^I))+P[15]+1236535329&4294967295,x=N+(C<<22&4294967295|C>>>10),C=I+(N^j&(x^N))+P[1]+4129170786&4294967295,I=x+(C<<5&4294967295|C>>>27),C=j+(x^N&(I^x))+P[6]+3225465664&4294967295,j=I+(C<<9&4294967295|C>>>23),C=N+(I^x&(j^I))+P[11]+643717713&4294967295,N=j+(C<<14&4294967295|C>>>18),C=x+(j^I&(N^j))+P[0]+3921069994&4294967295,x=N+(C<<20&4294967295|C>>>12),C=I+(N^j&(x^N))+P[5]+3593408605&4294967295,I=x+(C<<5&4294967295|C>>>27),C=j+(x^N&(I^x))+P[10]+38016083&4294967295,j=I+(C<<9&4294967295|C>>>23),C=N+(I^x&(j^I))+P[15]+3634488961&4294967295,N=j+(C<<14&4294967295|C>>>18),C=x+(j^I&(N^j))+P[4]+3889429448&4294967295,x=N+(C<<20&4294967295|C>>>12),C=I+(N^j&(x^N))+P[9]+568446438&4294967295,I=x+(C<<5&4294967295|C>>>27),C=j+(x^N&(I^x))+P[14]+3275163606&4294967295,j=I+(C<<9&4294967295|C>>>23),C=N+(I^x&(j^I))+P[3]+4107603335&4294967295,N=j+(C<<14&4294967295|C>>>18),C=x+(j^I&(N^j))+P[8]+1163531501&4294967295,x=N+(C<<20&4294967295|C>>>12),C=I+(N^j&(x^N))+P[13]+2850285829&4294967295,I=x+(C<<5&4294967295|C>>>27),C=j+(x^N&(I^x))+P[2]+4243563512&4294967295,j=I+(C<<9&4294967295|C>>>23),C=N+(I^x&(j^I))+P[7]+1735328473&4294967295,N=j+(C<<14&4294967295|C>>>18),C=x+(j^I&(N^j))+P[12]+2368359562&4294967295,x=N+(C<<20&4294967295|C>>>12),C=I+(x^N^j)+P[5]+4294588738&4294967295,I=x+(C<<4&4294967295|C>>>28),C=j+(I^x^N)+P[8]+2272392833&4294967295,j=I+(C<<11&4294967295|C>>>21),C=N+(j^I^x)+P[11]+1839030562&4294967295,N=j+(C<<16&4294967295|C>>>16),C=x+(N^j^I)+P[14]+4259657740&4294967295,x=N+(C<<23&4294967295|C>>>9),C=I+(x^N^j)+P[1]+2763975236&4294967295,I=x+(C<<4&4294967295|C>>>28),C=j+(I^x^N)+P[4]+1272893353&4294967295,j=I+(C<<11&4294967295|C>>>21),C=N+(j^I^x)+P[7]+4139469664&4294967295,N=j+(C<<16&4294967295|C>>>16),C=x+(N^j^I)+P[10]+3200236656&4294967295,x=N+(C<<23&4294967295|C>>>9),C=I+(x^N^j)+P[13]+681279174&4294967295,I=x+(C<<4&4294967295|C>>>28),C=j+(I^x^N)+P[0]+3936430074&4294967295,j=I+(C<<11&4294967295|C>>>21),C=N+(j^I^x)+P[3]+3572445317&4294967295,N=j+(C<<16&4294967295|C>>>16),C=x+(N^j^I)+P[6]+76029189&4294967295,x=N+(C<<23&4294967295|C>>>9),C=I+(x^N^j)+P[9]+3654602809&4294967295,I=x+(C<<4&4294967295|C>>>28),C=j+(I^x^N)+P[12]+3873151461&4294967295,j=I+(C<<11&4294967295|C>>>21),C=N+(j^I^x)+P[15]+530742520&4294967295,N=j+(C<<16&4294967295|C>>>16),C=x+(N^j^I)+P[2]+3299628645&4294967295,x=N+(C<<23&4294967295|C>>>9),C=I+(N^(x|~j))+P[0]+4096336452&4294967295,I=x+(C<<6&4294967295|C>>>26),C=j+(x^(I|~N))+P[7]+1126891415&4294967295,j=I+(C<<10&4294967295|C>>>22),C=N+(I^(j|~x))+P[14]+2878612391&4294967295,N=j+(C<<15&4294967295|C>>>17),C=x+(j^(N|~I))+P[5]+4237533241&4294967295,x=N+(C<<21&4294967295|C>>>11),C=I+(N^(x|~j))+P[12]+1700485571&4294967295,I=x+(C<<6&4294967295|C>>>26),C=j+(x^(I|~N))+P[3]+2399980690&4294967295,j=I+(C<<10&4294967295|C>>>22),C=N+(I^(j|~x))+P[10]+4293915773&4294967295,N=j+(C<<15&4294967295|C>>>17),C=x+(j^(N|~I))+P[1]+2240044497&4294967295,x=N+(C<<21&4294967295|C>>>11),C=I+(N^(x|~j))+P[8]+1873313359&4294967295,I=x+(C<<6&4294967295|C>>>26),C=j+(x^(I|~N))+P[15]+4264355552&4294967295,j=I+(C<<10&4294967295|C>>>22),C=N+(I^(j|~x))+P[6]+2734768916&4294967295,N=j+(C<<15&4294967295|C>>>17),C=x+(j^(N|~I))+P[13]+1309151649&4294967295,x=N+(C<<21&4294967295|C>>>11),C=I+(N^(x|~j))+P[4]+4149444226&4294967295,I=x+(C<<6&4294967295|C>>>26),C=j+(x^(I|~N))+P[11]+3174756917&4294967295,j=I+(C<<10&4294967295|C>>>22),C=N+(I^(j|~x))+P[2]+718787259&4294967295,N=j+(C<<15&4294967295|C>>>17),C=x+(j^(N|~I))+P[9]+3951481745&4294967295,k.g[0]=k.g[0]+I&4294967295,k.g[1]=k.g[1]+(N+(C<<21&4294967295|C>>>11))&4294967295,k.g[2]=k.g[2]+N&4294967295,k.g[3]=k.g[3]+j&4294967295}i.prototype.v=function(k,I){I===void 0&&(I=k.length);const x=I-this.blockSize,P=this.C;let N=this.h,j=0;for(;j<I;){if(N==0)for(;j<=x;)a(this,k,j),j+=this.blockSize;if(typeof k=="string"){for(;j<I;)if(P[N++]=k.charCodeAt(j++),N==this.blockSize){a(this,P),N=0;break}}else for(;j<I;)if(P[N++]=k[j++],N==this.blockSize){a(this,P),N=0;break}}this.h=N,this.o+=I},i.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var I=1;I<k.length-8;++I)k[I]=0;I=this.o*8;for(var x=k.length-8;x<k.length;++x)k[x]=I&255,I/=256;for(this.v(k),k=Array(16),I=0,x=0;x<4;++x)for(let P=0;P<32;P+=8)k[I++]=this.g[x]>>>P&255;return k};function c(k,I){var x=m;return Object.prototype.hasOwnProperty.call(x,k)?x[k]:x[k]=I(k)}function d(k,I){this.h=I;const x=[];let P=!0;for(let N=k.length-1;N>=0;N--){const j=k[N]|0;P&&j==I||(x[N]=j,P=!1)}this.g=x}var m={};function y(k){return-128<=k&&k<128?c(k,function(I){return new d([I|0],I<0?-1:0)}):new d([k|0],k<0?-1:0)}function v(k){if(isNaN(k)||!isFinite(k))return R;if(k<0)return B(v(-k));const I=[];let x=1;for(let P=0;k>=x;P++)I[P]=k/x|0,x*=4294967296;return new d(I,0)}function T(k,I){if(k.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(k.charAt(0)=="-")return B(T(k.substring(1),I));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=v(Math.pow(I,8));let P=R;for(let j=0;j<k.length;j+=8){var N=Math.min(8,k.length-j);const C=parseInt(k.substring(j,j+N),I);N<8?(N=v(Math.pow(I,N)),P=P.j(N).add(v(C))):(P=P.j(x),P=P.add(v(C)))}return P}var R=y(0),D=y(1),z=y(16777216);s=d.prototype,s.m=function(){if(H(this))return-B(this).m();let k=0,I=1;for(let x=0;x<this.g.length;x++){const P=this.i(x);k+=(P>=0?P:4294967296+P)*I,I*=4294967296}return k},s.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(X(this))return"0";if(H(this))return"-"+B(this).toString(k);const I=v(Math.pow(k,6));var x=this;let P="";for(;;){const N=Ce(x,I).g;x=ne(x,N.j(I));let j=((x.g.length>0?x.g[0]:x.h)>>>0).toString(k);if(x=N,X(x))return j+P;for(;j.length<6;)j="0"+j;P=j+P}},s.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function X(k){if(k.h!=0)return!1;for(let I=0;I<k.g.length;I++)if(k.g[I]!=0)return!1;return!0}function H(k){return k.h==-1}s.l=function(k){return k=ne(this,k),H(k)?-1:X(k)?0:1};function B(k){const I=k.g.length,x=[];for(let P=0;P<I;P++)x[P]=~k.g[P];return new d(x,~k.h).add(D)}s.abs=function(){return H(this)?B(this):this},s.add=function(k){const I=Math.max(this.g.length,k.g.length),x=[];let P=0;for(let N=0;N<=I;N++){let j=P+(this.i(N)&65535)+(k.i(N)&65535),C=(j>>>16)+(this.i(N)>>>16)+(k.i(N)>>>16);P=C>>>16,j&=65535,C&=65535,x[N]=C<<16|j}return new d(x,x[x.length-1]&-2147483648?-1:0)};function ne(k,I){return k.add(B(I))}s.j=function(k){if(X(this)||X(k))return R;if(H(this))return H(k)?B(this).j(B(k)):B(B(this).j(k));if(H(k))return B(this.j(B(k)));if(this.l(z)<0&&k.l(z)<0)return v(this.m()*k.m());const I=this.g.length+k.g.length,x=[];for(var P=0;P<2*I;P++)x[P]=0;for(P=0;P<this.g.length;P++)for(let N=0;N<k.g.length;N++){const j=this.i(P)>>>16,C=this.i(P)&65535,ze=k.i(N)>>>16,ft=k.i(N)&65535;x[2*P+2*N]+=C*ft,ae(x,2*P+2*N),x[2*P+2*N+1]+=j*ft,ae(x,2*P+2*N+1),x[2*P+2*N+1]+=C*ze,ae(x,2*P+2*N+1),x[2*P+2*N+2]+=j*ze,ae(x,2*P+2*N+2)}for(k=0;k<I;k++)x[k]=x[2*k+1]<<16|x[2*k];for(k=I;k<2*I;k++)x[k]=0;return new d(x,0)};function ae(k,I){for(;(k[I]&65535)!=k[I];)k[I+1]+=k[I]>>>16,k[I]&=65535,I++}function me(k,I){this.g=k,this.h=I}function Ce(k,I){if(X(I))throw Error("division by zero");if(X(k))return new me(R,R);if(H(k))return I=Ce(B(k),I),new me(B(I.g),B(I.h));if(H(I))return I=Ce(k,B(I)),new me(B(I.g),I.h);if(k.g.length>30){if(H(k)||H(I))throw Error("slowDivide_ only works with positive integers.");for(var x=D,P=I;P.l(k)<=0;)x=Le(x),P=Le(P);var N=K(x,1),j=K(P,1);for(P=K(P,2),x=K(x,2);!X(P);){var C=j.add(P);C.l(k)<=0&&(N=N.add(x),j=C),P=K(P,1),x=K(x,1)}return I=ne(k,N.j(I)),new me(N,I)}for(N=R;k.l(I)>=0;){for(x=Math.max(1,Math.floor(k.m()/I.m())),P=Math.ceil(Math.log(x)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),j=v(x),C=j.j(I);H(C)||C.l(k)>0;)x-=P,j=v(x),C=j.j(I);X(j)&&(j=D),N=N.add(j),k=ne(k,C)}return new me(N,k)}s.B=function(k){return Ce(this,k).h},s.and=function(k){const I=Math.max(this.g.length,k.g.length),x=[];for(let P=0;P<I;P++)x[P]=this.i(P)&k.i(P);return new d(x,this.h&k.h)},s.or=function(k){const I=Math.max(this.g.length,k.g.length),x=[];for(let P=0;P<I;P++)x[P]=this.i(P)|k.i(P);return new d(x,this.h|k.h)},s.xor=function(k){const I=Math.max(this.g.length,k.g.length),x=[];for(let P=0;P<I;P++)x[P]=this.i(P)^k.i(P);return new d(x,this.h^k.h)};function Le(k){const I=k.g.length+1,x=[];for(let P=0;P<I;P++)x[P]=k.i(P)<<1|k.i(P-1)>>>31;return new d(x,k.h)}function K(k,I){const x=I>>5;I%=32;const P=k.g.length-x,N=[];for(let j=0;j<P;j++)N[j]=I>0?k.i(j+x)>>>I|k.i(j+x+1)<<32-I:k.i(j+x);return new d(N,k.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Cg=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=v,d.fromString=T,us=d}).apply(typeof pm<"u"?pm:typeof self<"u"?self:typeof window<"u"?window:{});var Ql=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Rg,aa,Ng,Zl,Mh,Pg,kg,Vg;(function(){var s,e=Object.defineProperty;function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ql=="object"&&Ql];for(var p=0;p<l.length;++p){var g=l[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var i=n(this);function a(l,p){if(p)e:{var g=i;l=l.split(".");for(var E=0;E<l.length-1;E++){var O=l[E];if(!(O in g))break e;g=g[O]}l=l[l.length-1],E=g[l],p=p(E),p!=E&&p!=null&&e(g,l,{configurable:!0,writable:!0,value:p})}}a("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(l){return l||function(p){var g=[],E;for(E in p)Object.prototype.hasOwnProperty.call(p,E)&&g.push([E,p[E]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function m(l){var p=typeof l;return p=="object"&&l!=null||p=="function"}function y(l,p,g){return l.call.apply(l.bind,arguments)}function v(l,p,g){return v=y,v.apply(null,arguments)}function T(l,p){var g=Array.prototype.slice.call(arguments,1);return function(){var E=g.slice();return E.push.apply(E,arguments),l.apply(this,E)}}function R(l,p){function g(){}g.prototype=p.prototype,l.Z=p.prototype,l.prototype=new g,l.prototype.constructor=l,l.Ob=function(E,O,U){for(var Z=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)Z[Ie-2]=arguments[Ie];return p.prototype[O].apply(E,Z)}}var D=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function z(l){const p=l.length;if(p>0){const g=Array(p);for(let E=0;E<p;E++)g[E]=l[E];return g}return[]}function X(l,p){for(let E=1;E<arguments.length;E++){const O=arguments[E];var g=typeof O;if(g=g!="object"?g:O?Array.isArray(O)?"array":g:"null",g=="array"||g=="object"&&typeof O.length=="number"){g=l.length||0;const U=O.length||0;l.length=g+U;for(let Z=0;Z<U;Z++)l[g+Z]=O[Z]}else l.push(O)}}class H{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function B(l){d.setTimeout(()=>{throw l},0)}function ne(){var l=k;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}class ae{constructor(){this.h=this.g=null}add(p,g){const E=me.get();E.set(p,g),this.h?this.h.next=E:this.g=E,this.h=E}}var me=new H(()=>new Ce,l=>l.reset());class Ce{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let Le,K=!1,k=new ae,I=()=>{const l=Promise.resolve(void 0);Le=()=>{l.then(x)}};function x(){for(var l;l=ne();){try{l.h.call(l.g)}catch(g){B(g)}var p=me;p.j(l),p.h<100&&(p.h++,l.next=p.g,p.g=l)}K=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};d.addEventListener("test",g,p),d.removeEventListener("test",g,p)}catch{}return l})();function C(l){return/^[\s\xa0]*$/.test(l)}function ze(l,p){N.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,p)}R(ze,N),ze.prototype.init=function(l,p){const g=this.type=l.type,E=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget,p||(g=="mouseover"?p=l.fromElement:g=="mouseout"&&(p=l.toElement)),this.relatedTarget=p,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&ze.Z.h.call(this)},ze.prototype.h=function(){ze.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var ft="closure_listenable_"+(Math.random()*1e6|0),xt=0;function Ge(l,p,g,E,O){this.listener=l,this.proxy=null,this.src=p,this.type=g,this.capture=!!E,this.ha=O,this.key=++xt,this.da=this.fa=!1}function ee(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function fe(l,p,g){for(const E in l)p.call(g,l[E],E,l)}function se(l,p){for(const g in l)p.call(void 0,l[g],g,l)}function S(l){const p={};for(const g in l)p[g]=l[g];return p}const $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function de(l,p){let g,E;for(let O=1;O<arguments.length;O++){E=arguments[O];for(g in E)l[g]=E[g];for(let U=0;U<$.length;U++)g=$[U],Object.prototype.hasOwnProperty.call(E,g)&&(l[g]=E[g])}}function le(l){this.src=l,this.g={},this.h=0}le.prototype.add=function(l,p,g,E,O){const U=l.toString();l=this.g[U],l||(l=this.g[U]=[],this.h++);const Z=ve(l,p,E,O);return Z>-1?(p=l[Z],g||(p.fa=!1)):(p=new Ge(p,this.src,U,!!E,O),p.fa=g,l.push(p)),p};function _e(l,p){const g=p.type;if(g in l.g){var E=l.g[g],O=Array.prototype.indexOf.call(E,p,void 0),U;(U=O>=0)&&Array.prototype.splice.call(E,O,1),U&&(ee(p),l.g[g].length==0&&(delete l.g[g],l.h--))}}function ve(l,p,g,E){for(let O=0;O<l.length;++O){const U=l[O];if(!U.da&&U.listener==p&&U.capture==!!g&&U.ha==E)return O}return-1}var xe="closure_lm_"+(Math.random()*1e6|0),Re={};function $e(l,p,g,E,O){if(Array.isArray(p)){for(let U=0;U<p.length;U++)$e(l,p[U],g,E,O);return null}return g=uo(g),l&&l[ft]?l.J(p,g,m(E)?!!E.capture:!1,O):it(l,p,g,!1,E,O)}function it(l,p,g,E,O,U){if(!p)throw Error("Invalid event type");const Z=m(O)?!!O.capture:!!O;let Ie=ri(l);if(Ie||(l[xe]=Ie=new le(l)),g=Ie.add(p,g,E,Z,U),g.proxy)return g;if(E=ti(),g.proxy=E,E.src=l,E.listener=g,l.addEventListener)j||(O=Z),O===void 0&&(O=!1),l.addEventListener(p.toString(),E,O);else if(l.attachEvent)l.attachEvent(ni(p.toString()),E);else if(l.addListener&&l.removeListener)l.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return g}function ti(){function l(g){return p.call(l.src,l.listener,g)}const p=Va;return l}function lo(l,p,g,E,O){if(Array.isArray(p))for(var U=0;U<p.length;U++)lo(l,p[U],g,E,O);else E=m(E)?!!E.capture:!!E,g=uo(g),l&&l[ft]?(l=l.i,U=String(p).toString(),U in l.g&&(p=l.g[U],g=ve(p,g,E,O),g>-1&&(ee(p[g]),Array.prototype.splice.call(p,g,1),p.length==0&&(delete l.g[U],l.h--)))):l&&(l=ri(l))&&(p=l.g[p.toString()],l=-1,p&&(l=ve(p,g,E,O)),(g=l>-1?p[l]:null)&&Pr(g))}function Pr(l){if(typeof l!="number"&&l&&!l.da){var p=l.src;if(p&&p[ft])_e(p.i,l);else{var g=l.type,E=l.proxy;p.removeEventListener?p.removeEventListener(g,E,l.capture):p.detachEvent?p.detachEvent(ni(g),E):p.addListener&&p.removeListener&&p.removeListener(E),(g=ri(p))?(_e(g,l),g.h==0&&(g.src=null,p[xe]=null)):ee(l)}}}function ni(l){return l in Re?Re[l]:Re[l]="on"+l}function Va(l,p){if(l.da)l=!0;else{p=new ze(p,this);const g=l.listener,E=l.ha||l.src;l.fa&&Pr(l),l=g.call(E,p)}return l}function ri(l){return l=l[xe],l instanceof le?l:null}var vs="__closure_events_fn_"+(Math.random()*1e9>>>0);function uo(l){return typeof l=="function"?l:(l[vs]||(l[vs]=function(p){return l.handleEvent(p)}),l[vs])}function pt(){P.call(this),this.i=new le(this),this.M=this,this.G=null}R(pt,P),pt.prototype[ft]=!0,pt.prototype.removeEventListener=function(l,p,g,E){lo(this,l,p,g,E)};function lt(l,p){var g,E=l.G;if(E)for(g=[];E;E=E.G)g.push(E);if(l=l.M,E=p.type||p,typeof p=="string")p=new N(p,l);else if(p instanceof N)p.target=p.target||l;else{var O=p;p=new N(E,l),de(p,O)}O=!0;let U,Z;if(g)for(Z=g.length-1;Z>=0;Z--)U=p.g=g[Z],O=In(U,E,!0,p)&&O;if(U=p.g=l,O=In(U,E,!0,p)&&O,O=In(U,E,!1,p)&&O,g)for(Z=0;Z<g.length;Z++)U=p.g=g[Z],O=In(U,E,!1,p)&&O}pt.prototype.N=function(){if(pt.Z.N.call(this),this.i){var l=this.i;for(const p in l.g){const g=l.g[p];for(let E=0;E<g.length;E++)ee(g[E]);delete l.g[p],l.h--}}this.G=null},pt.prototype.J=function(l,p,g,E){return this.i.add(String(l),p,!1,g,E)},pt.prototype.K=function(l,p,g,E){return this.i.add(String(l),p,!0,g,E)};function In(l,p,g,E){if(p=l.i.g[String(p)],!p)return!0;p=p.concat();let O=!0;for(let U=0;U<p.length;++U){const Z=p[U];if(Z&&!Z.da&&Z.capture==g){const Ie=Z.listener,ut=Z.ha||Z.src;Z.fa&&_e(l.i,Z),O=Ie.call(ut,E)!==!1&&O}}return O&&!E.defaultPrevented}function co(l,p){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=v(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:d.setTimeout(l,p||0)}function ho(l){l.g=co(()=>{l.g=null,l.i&&(l.i=!1,ho(l))},l.l);const p=l.h;l.h=null,l.m.apply(null,p)}class Da extends P{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:ho(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kr(l){P.call(this),this.h=l,this.g={}}R(kr,P);var fo=[];function si(l){fe(l.g,function(p,g){this.g.hasOwnProperty(g)&&Pr(p)},l),l.g={}}kr.prototype.N=function(){kr.Z.N.call(this),si(this)},kr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vr=d.JSON.stringify,Ma=d.JSON.parse,ws=class{stringify(l){return d.JSON.stringify(l,void 0)}parse(l){return d.JSON.parse(l,void 0)}};function Dr(){}function ja(){}var Mr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ii(){N.call(this,"d")}R(ii,N);function po(){N.call(this,"c")}R(po,N);var An={},oi=null;function jr(){return oi=oi||new pt}An.Ia="serverreachability";function ai(l){N.call(this,An.Ia,l)}R(ai,N);function lr(l){const p=jr();lt(p,new ai(p))}An.STAT_EVENT="statevent";function ur(l,p){N.call(this,An.STAT_EVENT,l),this.stat=p}R(ur,N);function ot(l){const p=jr();lt(p,new ur(p,l))}An.Ja="timingevent";function mo(l,p){N.call(this,An.Ja,l),this.size=p}R(mo,N);function Lr(l,p){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){l()},p)}function Or(){this.g=!0}Or.prototype.ua=function(){this.g=!1};function La(l,p,g,E,O,U){l.info(function(){if(l.g)if(U){var Z="",Ie=U.split("&");for(let qe=0;qe<Ie.length;qe++){var ut=Ie[qe].split("=");if(ut.length>1){const mt=ut[0];ut=ut[1];const un=mt.split("_");Z=un.length>=2&&un[1]=="type"?Z+(mt+"="+ut+"&"):Z+(mt+"=redacted&")}}}else Z=null;else Z=U;return"XMLHTTP REQ ("+E+") [attempt "+O+"]: "+p+`
`+g+`
`+Z})}function Oa(l,p,g,E,O,U,Z){l.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+O+"]: "+p+`
`+g+`
`+U+" "+Z})}function Ln(l,p,g,E){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+Es(l,g)+(E?" "+E:"")})}function ba(l,p){l.info(function(){return"TIMEOUT: "+p})}Or.prototype.info=function(){};function Es(l,p){if(!l.g)return p;if(!p)return null;try{const U=JSON.parse(p);if(U){for(l=0;l<U.length;l++)if(Array.isArray(U[l])){var g=U[l];if(!(g.length<2)){var E=g[1];if(Array.isArray(E)&&!(E.length<1)){var O=E[0];if(O!="noop"&&O!="stop"&&O!="close")for(let Z=1;Z<E.length;Z++)E[Z]=""}}}}return Vr(U)}catch{return p}}var br={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Fr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Fa;function cr(){}R(cr,Dr),cr.prototype.g=function(){return new XMLHttpRequest},Fa=new cr;function On(l){return encodeURIComponent(String(l))}function li(l){var p=1;l=l.split(":");const g=[];for(;p>0&&l.length;)g.push(l.shift()),p--;return l.length&&g.push(l.join(":")),g}function mn(l,p,g,E){this.j=l,this.i=p,this.l=g,this.S=E||1,this.V=new kr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ua}function Ua(){this.i=null,this.g="",this.h=!1}var za={},go={};function Cn(l,p,g){l.M=1,l.A=dr(gn(p)),l.u=g,l.R=!0,yo(l,null)}function yo(l,p){l.F=Date.now(),Ts(l),l.B=gn(l.A);var g=l.B,E=l.S;Array.isArray(E)||(E=[String(E)]),Co(g.i,"t",E),l.C=0,g=l.j.L,l.h=new Ua,l.g=Ya(l.j,g?p:null,!l.u),l.P>0&&(l.O=new Da(v(l.Y,l,l.g),l.P)),p=l.V,g=l.g,E=l.ba;var O="readystatechange";Array.isArray(O)||(O&&(fo[0]=O.toString()),O=fo);for(let U=0;U<O.length;U++){const Z=$e(g,O[U],E||p.handleEvent,!1,p.h||p);if(!Z)break;p.g[Z.key]=Z}p=l.J?S(l.J):{},l.u?(l.v||(l.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,p)):(l.v="GET",l.g.ea(l.B,l.v,null,p)),lr(),La(l.i,l.v,l.B,l.l,l.S,l.u)}mn.prototype.ba=function(l){l=l.target;const p=this.O;p&&qn(l)==3?p.j():this.Y(l)},mn.prototype.Y=function(l){try{if(l==this.g)e:{const Ie=qn(this.g),ut=this.g.ya(),qe=this.g.ca();if(!(Ie<3)&&(Ie!=3||this.g&&(this.h.h||this.g.la()||Ka(this.g)))){this.K||Ie!=4||ut==7||(ut==8||qe<=0?lr(3):lr(2)),ui(this);var p=this.g.ca();this.X=p;var g=Ba(this);if(this.o=p==200,Oa(this.i,this.v,this.B,this.l,this.S,Ie,p),this.o){if(this.U&&!this.L){t:{if(this.g){var E,O=this.g;if((E=O.g?O.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(E)){var U=E;break t}}U=null}if(l=U)Ln(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Xe(this,l);else{this.o=!1,this.m=3,ot(12),hr(this),Ss(this);break e}}if(this.R){l=!0;let mt;for(;!this.K&&this.C<g.length;)if(mt=qa(this,g),mt==go){Ie==4&&(this.m=4,ot(14),l=!1),Ln(this.i,this.l,null,"[Incomplete Response]");break}else if(mt==za){this.m=4,ot(15),Ln(this.i,this.l,g,"[Invalid Chunk]"),l=!1;break}else Ln(this.i,this.l,mt,null),Xe(this,mt);if($a(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ie!=4||g.length!=0||this.h.h||(this.m=1,ot(16),l=!1),this.o=this.o&&l,!l)Ln(this.i,this.l,g,"[Invalid Chunked Response]"),hr(this),Ss(this);else if(g.length>0&&!this.W){this.W=!0;var Z=this.j;Z.g==this&&Z.aa&&!Z.P&&(Z.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),Vs(Z),Z.P=!0,ot(11))}}else Ln(this.i,this.l,g,null),Xe(this,g);Ie==4&&hr(this),this.o&&!this.K&&(Ie==4?vi(this.j,this):(this.o=!1,Ts(this)))}else No(this.g),p==400&&g.indexOf("Unknown SID")>0?(this.m=3,ot(12)):(this.m=0,ot(13)),hr(this),Ss(this)}}}catch{}finally{}};function Ba(l){if(!$a(l))return l.g.la();const p=Ka(l.g);if(p==="")return"";let g="";const E=p.length,O=qn(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return hr(l),Ss(l),"";l.h.i=new d.TextDecoder}for(let U=0;U<E;U++)l.h.h=!0,g+=l.h.i.decode(p[U],{stream:!(O&&U==E-1)});return p.length=0,l.h.g+=g,l.C=0,l.h.g}function $a(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function qa(l,p){var g=l.C,E=p.indexOf(`
`,g);return E==-1?go:(g=Number(p.substring(g,E)),isNaN(g)?za:(E+=1,E+g>p.length?go:(p=p.slice(E,E+g),l.C=E+g,p)))}mn.prototype.cancel=function(){this.K=!0,hr(this)};function Ts(l){l.T=Date.now()+l.H,_o(l,l.H)}function _o(l,p){if(l.D!=null)throw Error("WatchDog timer not null");l.D=Lr(v(l.aa,l),p)}function ui(l){l.D&&(d.clearTimeout(l.D),l.D=null)}mn.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(ba(this.i,this.B),this.M!=2&&(lr(),ot(17)),hr(this),this.m=2,Ss(this)):_o(this,this.T-l)};function Ss(l){l.j.I==0||l.K||vi(l.j,l)}function hr(l){ui(l);var p=l.O;p&&typeof p.dispose=="function"&&p.dispose(),l.O=null,si(l.V),l.g&&(p=l.g,l.g=null,p.abort(),p.dispose())}function Xe(l,p){try{var g=l.j;if(g.I!=0&&(g.g==l||wo(g.h,l))){if(!l.L&&wo(g.h,l)&&g.I==3){try{var E=g.Ba.g.parse(p)}catch{E=null}if(Array.isArray(E)&&E.length==3){var O=E;if(O[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<l.F)_i(g),an(g);else break e;Gn(g),ot(18)}}else g.xa=O[1],0<g.xa-g.K&&O[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=Lr(v(g.Va,g),6e3));xs(g.h)<=1&&g.ta&&(g.ta=void 0)}else ln(g,11)}else if((l.L||g.g==l)&&_i(g),!C(p))for(O=g.Ba.g.parse(p),p=0;p<O.length;p++){let qe=O[p];const mt=qe[0];if(!(mt<=g.K))if(g.K=mt,qe=qe[1],g.I==2)if(qe[0]=="c"){g.M=qe[1],g.ba=qe[2];const un=qe[3];un!=null&&(g.ka=un,g.j.info("VER="+g.ka));const yr=qe[4];yr!=null&&(g.za=yr,g.j.info("SVER="+g.za));const Qn=qe[5];Qn!=null&&typeof Qn=="number"&&Qn>0&&(E=1.5*Qn,g.O=E,g.j.info("backChannelRequestTimeoutMs_="+E)),E=g;const Kn=l.g;if(Kn){const Ti=Kn.g?Kn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ti){var U=E.h;U.g||Ti.indexOf("spdy")==-1&&Ti.indexOf("quic")==-1&&Ti.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(hi(U,U.h),U.h=null))}if(E.G){const Vo=Kn.g?Kn.g.getResponseHeader("X-HTTP-Session-Id"):null;Vo&&(E.wa=Vo,Fe(E.J,E.G,Vo))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-l.F,g.j.info("Handshake RTT: "+g.T+"ms")),E=g;var Z=l;if(E.na=ko(E,E.L?E.ba:null,E.W),Z.L){Is(E.h,Z);var Ie=Z,ut=E.O;ut&&(Ie.H=ut),Ie.D&&(ui(Ie),Ts(Ie)),E.g=Z}else Lt(E);g.i.length>0&&gr(g)}else qe[0]!="stop"&&qe[0]!="close"||ln(g,7);else g.I==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?ln(g,7):gi(g):qe[0]!="noop"&&g.l&&g.l.qa(qe),g.A=0)}}lr(4)}catch{}}var Bu=class{constructor(l,p){this.g=l,this.map=p}};function ci(l){this.l=l||10,d.PerformanceNavigationTiming?(l=d.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function vo(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function xs(l){return l.h?1:l.g?l.g.size:0}function wo(l,p){return l.h?l.h==p:l.g?l.g.has(p):!1}function hi(l,p){l.g?l.g.add(p):l.h=p}function Is(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}ci.prototype.cancel=function(){if(this.i=rn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function rn(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let p=l.i;for(const g of l.g.values())p=p.concat(g.G);return p}return z(l.i)}var Ha=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sn(l,p){if(l){l=l.split("&");for(let g=0;g<l.length;g++){const E=l[g].indexOf("=");let O,U=null;E>=0?(O=l[g].substring(0,E),U=l[g].substring(E+1)):O=l[g],p(O,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function bn(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;l instanceof bn?(this.l=l.l,As(this,l.j),this.o=l.o,this.g=l.g,Fn(this,l.u),this.h=l.h,Ur(this,Ro(l.i)),this.m=l.m):l&&(p=String(l).match(Ha))?(this.l=!1,As(this,p[1]||"",!0),this.o=Cs(p[2]||""),this.g=Cs(p[3]||"",!0),Fn(this,p[4]),this.h=Cs(p[5]||"",!0),Ur(this,p[6]||"",!0),this.m=Cs(p[7]||"")):(this.l=!1,this.i=new De(null,this.l))}bn.prototype.toString=function(){const l=[];var p=this.j;p&&l.push(Rs(p,To,!0),":");var g=this.g;return(g||p=="file")&&(l.push("//"),(p=this.o)&&l.push(Rs(p,To,!0),"@"),l.push(On(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&l.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(Rs(g,g.charAt(0)=="/"?Ns:So,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",Rs(g,xo)),l.join("")},bn.prototype.resolve=function(l){const p=gn(this);let g=!!l.j;g?As(p,l.j):g=!!l.o,g?p.o=l.o:g=!!l.g,g?p.g=l.g:g=l.u!=null;var E=l.h;if(g)Fn(p,l.u);else if(g=!!l.h){if(E.charAt(0)!="/")if(this.g&&!this.h)E="/"+E;else{var O=p.h.lastIndexOf("/");O!=-1&&(E=p.h.slice(0,O+1)+E)}if(O=E,O==".."||O==".")E="";else if(O.indexOf("./")!=-1||O.indexOf("/.")!=-1){E=O.lastIndexOf("/",0)==0,O=O.split("/");const U=[];for(let Z=0;Z<O.length;){const Ie=O[Z++];Ie=="."?E&&Z==O.length&&U.push(""):Ie==".."?((U.length>1||U.length==1&&U[0]!="")&&U.pop(),E&&Z==O.length&&U.push("")):(U.push(Ie),E=!0)}E=U.join("/")}else E=O}return g?p.h=E:g=l.i.toString()!=="",g?Ur(p,Ro(l.i)):g=!!l.m,g&&(p.m=l.m),p};function gn(l){return new bn(l)}function As(l,p,g){l.j=g?Cs(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function Fn(l,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);l.u=p}else l.u=null}function Ur(l,p,g){p instanceof De?(l.i=p,fi(l.i,l.l)):(g||(p=Rs(p,$u)),l.i=new De(p,l.l))}function Fe(l,p,g){l.i.set(p,g)}function dr(l){return Fe(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function Cs(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Rs(l,p,g){return typeof l=="string"?(l=encodeURI(l).replace(p,Eo),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Eo(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var To=/[#\/\?@]/g,So=/[#\?:]/g,Ns=/[#\?]/g,$u=/[#\?@]/g,xo=/#/g;function De(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function Un(l){l.g||(l.g=new Map,l.h=0,l.i&&sn(l.i,function(p,g){l.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}s=De.prototype,s.add=function(l,p){Un(this),this.i=null,l=zn(this,l);let g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(p),this.h+=1,this};function Io(l,p){Un(l),p=zn(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function di(l,p){return Un(l),p=zn(l,p),l.g.has(p)}s.forEach=function(l,p){Un(this),this.g.forEach(function(g,E){g.forEach(function(O){l.call(p,O,E,this)},this)},this)};function Ao(l,p){Un(l);let g=[];if(typeof p=="string")di(l,p)&&(g=g.concat(l.g.get(zn(l,p))));else for(l=Array.from(l.g.values()),p=0;p<l.length;p++)g=g.concat(l[p]);return g}s.set=function(l,p){return Un(this),this.i=null,l=zn(this,l),di(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},s.get=function(l,p){return l?(l=Ao(this,l),l.length>0?String(l[0]):p):p};function Co(l,p,g){Io(l,p),g.length>0&&(l.i=null,l.g.set(zn(l,p),z(g)),l.h+=g.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],p=Array.from(this.g.keys());for(let E=0;E<p.length;E++){var g=p[E];const O=On(g);g=Ao(this,g);for(let U=0;U<g.length;U++){let Z=O;g[U]!==""&&(Z+="="+On(g[U])),l.push(Z)}}return this.i=l.join("&")};function Ro(l){const p=new De;return p.i=l.i,l.g&&(p.g=new Map(l.g),p.h=l.h),p}function zn(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function fi(l,p){p&&!l.j&&(Un(l),l.i=null,l.g.forEach(function(g,E){const O=E.toLowerCase();E!=O&&(Io(this,E),Co(this,O,g))},l)),l.j=p}function Bn(l,p){const g=new Or;if(d.Image){const E=new Image;E.onload=T(Nt,g,"TestLoadImage: loaded",!0,p,E),E.onerror=T(Nt,g,"TestLoadImage: error",!1,p,E),E.onabort=T(Nt,g,"TestLoadImage: abort",!1,p,E),E.ontimeout=T(Nt,g,"TestLoadImage: timeout",!1,p,E),d.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=l}else p(!1)}function $n(l,p){const g=new Or,E=new AbortController,O=setTimeout(()=>{E.abort(),Nt(g,"TestPingServer: timeout",!1,p)},1e4);fetch(l,{signal:E.signal}).then(U=>{clearTimeout(O),U.ok?Nt(g,"TestPingServer: ok",!0,p):Nt(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(O),Nt(g,"TestPingServer: error",!1,p)})}function Nt(l,p,g,E,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),E(g)}catch{}}function Ps(){this.g=new ws}function fr(l){this.i=l.Sb||null,this.h=l.ab||!1}R(fr,Dr),fr.prototype.g=function(){return new on(this.i,this.h)};function on(l,p){pt.call(this),this.H=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}R(on,pt),s=on.prototype,s.open=function(l,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=p,this.readyState=1,Rn(this)},s.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(p.body=l),(this.H||d).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,zr(this)),this.readyState=0},s.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Rn(this)),this.g&&(this.readyState=3,Rn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Wa(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function Wa(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}s.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?zr(this):Rn(this),this.readyState==3&&Wa(this)}},s.Oa=function(l){this.g&&(this.response=this.responseText=l,zr(this))},s.Na=function(l){this.g&&(this.response=l,zr(this))},s.ga=function(){this.g&&zr(this)};function zr(l){l.readyState=4,l.l=null,l.j=null,l.B=null,Rn(l)}s.setRequestHeader=function(l,p){this.A.append(l,p)},s.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=p.next();return l.join(`\r
`)};function Rn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(on.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Ga(l){let p="";return fe(l,function(g,E){p+=E,p+=":",p+=g,p+=`\r
`}),p}function pi(l,p,g){e:{for(E in g){var E=!1;break e}E=!0}E||(g=Ga(g),typeof l=="string"?g!=null&&On(g):Fe(l,p,g))}function We(l){pt.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}R(We,pt);var Qa=/^https?$/i,qu=["POST","PUT"];s=We.prototype,s.Fa=function(l){this.H=l},s.ea=function(l,p,g,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Fa.g(),this.g.onreadystatechange=D(v(this.Ca,this));try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(U){Br(this,U);return}if(l=g||"",g=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var O in E)g.set(O,E[O]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const U of E.keys())g.set(U,E.get(U));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(g.keys()).find(U=>U.toLowerCase()=="content-type"),O=d.FormData&&l instanceof d.FormData,!(Array.prototype.indexOf.call(qu,p,void 0)>=0)||E||O||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,Z]of g)this.g.setRequestHeader(U,Z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(U){Br(this,U)}};function Br(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.o=5,$r(l),mr(l)}function $r(l){l.A||(l.A=!0,lt(l,"complete"),lt(l,"error"))}s.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,lt(this,"complete"),lt(this,"abort"),mr(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),mr(this,!0)),We.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?pr(this):this.Xa())},s.Xa=function(){pr(this)};function pr(l){if(l.h&&typeof c<"u"){if(l.v&&qn(l)==4)setTimeout(l.Ca.bind(l),0);else if(lt(l,"readystatechange"),qn(l)==4){l.h=!1;try{const U=l.ca();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var E;if(E=U===0){let Z=String(l.D).match(Ha)[1]||null;!Z&&d.self&&d.self.location&&(Z=d.self.location.protocol.slice(0,-1)),E=!Qa.test(Z?Z.toLowerCase():"")}g=E}if(g)lt(l,"complete"),lt(l,"success");else{l.o=6;try{var O=qn(l)>2?l.g.statusText:""}catch{O=""}l.l=O+" ["+l.ca()+"]",$r(l)}}finally{mr(l)}}}}function mr(l,p){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const g=l.g;l.g=null,p||lt(l,"ready");try{g.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function qn(l){return l.g?l.g.readyState:0}s.ca=function(){try{return qn(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(l){if(this.g){var p=this.g.responseText;return l&&p.indexOf(l)==0&&(p=p.substring(l.length)),Ma(p)}};function Ka(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function No(l){const p={};l=(l.g&&qn(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<l.length;E++){if(C(l[E]))continue;var g=li(l[E]);const O=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const U=p[O]||[];p[O]=U,U.push(g)}se(p,function(E){return E.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hn(l,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||p}function mi(l){this.za=0,this.i=[],this.j=new Or,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Hn("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Hn("baseRetryDelayMs",5e3,l),this.Za=Hn("retryDelaySeedMs",1e4,l),this.Ta=Hn("forwardChannelMaxRetries",2,l),this.va=Hn("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new ci(l&&l.concurrentRequestLimit),this.Ba=new Ps,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=mi.prototype,s.ka=8,s.I=1,s.connect=function(l,p,g,E){ot(0),this.W=l,this.H=p||{},g&&E!==void 0&&(this.H.OSID=g,this.H.OAID=E),this.F=this.X,this.J=ko(this,null,this.W),gr(this)};function gi(l){if(yi(l),l.I==3){var p=l.V++,g=gn(l.J);if(Fe(g,"SID",l.M),Fe(g,"RID",p),Fe(g,"TYPE","terminate"),Wn(l,g),p=new mn(l,l.j,p),p.M=2,p.A=dr(gn(g)),g=!1,d.navigator&&d.navigator.sendBeacon)try{g=d.navigator.sendBeacon(p.A.toString(),"")}catch{}!g&&d.Image&&(new Image().src=p.A,g=!0),g||(p.g=Ya(p.j,null),p.g.ea(p.A)),p.F=Date.now(),Ts(p)}Ds(l)}function an(l){l.g&&(Vs(l),l.g.cancel(),l.g=null)}function yi(l){an(l),l.v&&(d.clearTimeout(l.v),l.v=null),_i(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&d.clearTimeout(l.m),l.m=null)}function gr(l){if(!vo(l.h)&&!l.m){l.m=!0;var p=l.Ea;Le||I(),K||(Le(),K=!0),k.add(p,l),l.D=0}}function Xa(l,p){return xs(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=p.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=Lr(v(l.Ea,l,p),wi(l,l.D)),l.D++,!0)}s.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const O=new mn(this,this.j,l);let U=this.o;if(this.U&&(U?(U=S(U),de(U,this.U)):U=this.U),this.u!==null||this.R||(O.J=U,U=null),this.S)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var E=this.i[g];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(p+=E,p>4096){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=Po(this,O,p),g=gn(this.J),Fe(g,"RID",l),Fe(g,"CVER",22),this.G&&Fe(g,"X-HTTP-Session-Id",this.G),Wn(this,g),U&&(this.R?p="headers="+On(Ga(U))+"&"+p:this.u&&pi(g,this.u,U)),hi(this.h,O),this.Ra&&Fe(g,"TYPE","init"),this.S?(Fe(g,"$req",p),Fe(g,"SID","null"),O.U=!0,Cn(O,g,null)):Cn(O,g,p),this.I=2}}else this.I==3&&(l?ks(this,l):this.i.length==0||vo(this.h)||ks(this))};function ks(l,p){var g;p?g=p.l:g=l.V++;const E=gn(l.J);Fe(E,"SID",l.M),Fe(E,"RID",g),Fe(E,"AID",l.K),Wn(l,E),l.u&&l.o&&pi(E,l.u,l.o),g=new mn(l,l.j,g,l.D+1),l.u===null&&(g.J=l.o),p&&(l.i=p.G.concat(l.i)),p=Po(l,g,1e3),g.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),hi(l.h,g),Cn(g,E,p)}function Wn(l,p){l.H&&fe(l.H,function(g,E){Fe(p,E,g)}),l.l&&fe({},function(g,E){Fe(p,E,g)})}function Po(l,p,g){g=Math.min(l.i.length,g);const E=l.l?v(l.l.Ka,l.l,l):null;e:{var O=l.i;let Ie=-1;for(;;){const ut=["count="+g];Ie==-1?g>0?(Ie=O[0].g,ut.push("ofs="+Ie)):Ie=0:ut.push("ofs="+Ie);let qe=!0;for(let mt=0;mt<g;mt++){var U=O[mt].g;const un=O[mt].map;if(U-=Ie,U<0)Ie=Math.max(0,O[mt].g-100),qe=!1;else try{U="req"+U+"_"||"";try{var Z=un instanceof Map?un:Object.entries(un);for(const[yr,Qn]of Z){let Kn=Qn;m(Qn)&&(Kn=Vr(Qn)),ut.push(U+yr+"="+encodeURIComponent(Kn))}}catch(yr){throw ut.push(U+"type="+encodeURIComponent("_badmap")),yr}}catch{E&&E(un)}}if(qe){Z=ut.join("&");break e}}Z=void 0}return l=l.i.splice(0,g),p.G=l,Z}function Lt(l){if(!l.g&&!l.v){l.Y=1;var p=l.Da;Le||I(),K||(Le(),K=!0),k.add(p,l),l.A=0}}function Gn(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=Lr(v(l.Da,l),wi(l,l.A)),l.A++,!0)}s.Da=function(){if(this.v=null,qr(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=Lr(v(this.Wa,this),l)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ot(10),an(this),qr(this))};function Vs(l){l.B!=null&&(d.clearTimeout(l.B),l.B=null)}function qr(l){l.g=new mn(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var p=gn(l.na);Fe(p,"RID","rpc"),Fe(p,"SID",l.M),Fe(p,"AID",l.K),Fe(p,"CI",l.F?"0":"1"),!l.F&&l.ia&&Fe(p,"TO",l.ia),Fe(p,"TYPE","xmlhttp"),Wn(l,p),l.u&&l.o&&pi(p,l.u,l.o),l.O&&(l.g.H=l.O);var g=l.g;l=l.ba,g.M=1,g.A=dr(gn(p)),g.u=null,g.R=!0,yo(g,l)}s.Va=function(){this.C!=null&&(this.C=null,an(this),Gn(this),ot(19))};function _i(l){l.C!=null&&(d.clearTimeout(l.C),l.C=null)}function vi(l,p){var g=null;if(l.g==p){_i(l),Vs(l),l.g=null;var E=2}else if(wo(l.h,p))g=p.G,Is(l.h,p),E=1;else return;if(l.I!=0){if(p.o)if(E==1){g=p.u?p.u.length:0,p=Date.now()-p.F;var O=l.D;E=jr(),lt(E,new mo(E,g)),gr(l)}else Lt(l);else if(O=p.m,O==3||O==0&&p.X>0||!(E==1&&Xa(l,p)||E==2&&Gn(l)))switch(g&&g.length>0&&(p=l.h,p.i=p.i.concat(g)),O){case 1:ln(l,5);break;case 4:ln(l,10);break;case 3:ln(l,6);break;default:ln(l,2)}}}function wi(l,p){let g=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(g*=2),g*p}function ln(l,p){if(l.j.info("Error code "+p),p==2){var g=v(l.bb,l),E=l.Ua;const O=!E;E=new bn(E||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||As(E,"https"),dr(E),O?Bn(E.toString(),g):$n(E.toString(),g)}else ot(2);l.I=0,l.l&&l.l.pa(p),Ds(l),yi(l)}s.bb=function(l){l?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function Ds(l){if(l.I=0,l.ja=[],l.l){const p=rn(l.h);(p.length!=0||l.i.length!=0)&&(X(l.ja,p),X(l.ja,l.i),l.h.i.length=0,z(l.i),l.i.length=0),l.l.oa()}}function ko(l,p,g){var E=g instanceof bn?gn(g):new bn(g);if(E.g!="")p&&(E.g=p+"."+E.g),Fn(E,E.u);else{var O=d.location;E=O.protocol,p=p?p+"."+O.hostname:O.hostname,O=+O.port;const U=new bn(null);E&&As(U,E),p&&(U.g=p),O&&Fn(U,O),g&&(U.h=g),E=U}return g=l.G,p=l.wa,g&&p&&Fe(E,g,p),Fe(E,"VER",l.ka),Wn(l,E),E}function Ya(l,p,g){if(p&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=l.Aa&&!l.ma?new We(new fr({ab:g})):new We(l.ma),p.Fa(l.L),p}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ja(){}s=Ja.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Ei(){}Ei.prototype.g=function(l,p){return new Pt(l,p)};function Pt(l,p){pt.call(this),this.g=new mi(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(l?l["X-WebChannel-Client-Profile"]=p.sa:l={"X-WebChannel-Client-Profile":p.sa}),this.g.U=l,(l=p&&p.Qb)&&!C(l)&&(this.g.u=l),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!C(p)&&(this.g.G=p,l=this.h,l!==null&&p in l&&(l=this.h,p in l&&delete l[p])),this.j=new Hr(this)}R(Pt,pt),Pt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Pt.prototype.close=function(){gi(this.g)},Pt.prototype.o=function(l){var p=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.v&&(g={},g.__data__=Vr(l),l=g);p.i.push(new Bu(p.Ya++,l)),p.I==3&&gr(p)},Pt.prototype.N=function(){this.g.l=null,delete this.j,gi(this.g),delete this.g,Pt.Z.N.call(this)};function Za(l){ii.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(const g in p){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,p=p!==null&&l in p?p[l]:void 0),this.data=p}else this.data=l}R(Za,ii);function el(){po.call(this),this.status=1}R(el,po);function Hr(l){this.g=l}R(Hr,Ja),Hr.prototype.ra=function(){lt(this.g,"a")},Hr.prototype.qa=function(l){lt(this.g,new Za(l))},Hr.prototype.pa=function(l){lt(this.g,new el)},Hr.prototype.oa=function(){lt(this.g,"b")},Ei.prototype.createWebChannel=Ei.prototype.g,Pt.prototype.send=Pt.prototype.o,Pt.prototype.open=Pt.prototype.m,Pt.prototype.close=Pt.prototype.close,Vg=function(){return new Ei},kg=function(){return jr()},Pg=An,Mh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},br.NO_ERROR=0,br.TIMEOUT=8,br.HTTP_ERROR=6,Zl=br,Fr.COMPLETE="complete",Ng=Fr,ja.EventType=Mr,Mr.OPEN="a",Mr.CLOSE="b",Mr.ERROR="c",Mr.MESSAGE="d",pt.prototype.listen=pt.prototype.J,aa=ja,We.prototype.listenOnce=We.prototype.K,We.prototype.getLastError=We.prototype.Ha,We.prototype.getLastErrorCode=We.prototype.ya,We.prototype.getStatus=We.prototype.ca,We.prototype.getResponseJson=We.prototype.La,We.prototype.getResponseText=We.prototype.la,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Fa,Rg=We}).apply(typeof Ql<"u"?Ql:typeof self<"u"?self:typeof window<"u"?window:{});const mm="@firebase/firestore",gm="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$t.UNAUTHENTICATED=new $t(null),$t.GOOGLE_CREDENTIALS=new $t("google-credentials-uid"),$t.FIRST_PARTY=new $t("first-party-uid"),$t.MOCK_USER=new $t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ro="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs=new Eg("@firebase/firestore");function $i(){return Xs.logLevel}function ie(s,...e){if(Xs.logLevel<=je.DEBUG){const n=e.map(nd);Xs.debug(`Firestore (${ro}): ${s}`,...n)}}function Rr(s,...e){if(Xs.logLevel<=je.ERROR){const n=e.map(nd);Xs.error(`Firestore (${ro}): ${s}`,...n)}}function Xi(s,...e){if(Xs.logLevel<=je.WARN){const n=e.map(nd);Xs.warn(`Firestore (${ro}): ${s}`,...n)}}function nd(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(s,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,Dg(s,i,n)}function Dg(s,e,n){let i=`FIRESTORE (${ro}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Rr(i),new Error(i)}function Be(s,e,n,i){let a="Unexpected state";typeof n=="string"?a=n:i=n,s||Dg(e,a,i)}function Ae(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends no{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class w1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n($t.UNAUTHENTICATED)))}shutdown(){}}class E1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class T1{constructor(e){this.t=e,this.currentUser=$t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Be(this.o===void 0,42304);let i=this.i;const a=y=>this.i!==i?(i=this.i,n(y)):Promise.resolve();let c=new Ar;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Ar,e.enqueueRetryable((()=>a(this.currentUser)))};const d=()=>{const y=c;e.enqueueRetryable((async()=>{await y.promise,await a(this.currentUser)}))},m=y=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((y=>m(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Ar)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Be(typeof i.accessToken=="string",31837,{l:i}),new Mg(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Be(e===null||typeof e=="string",2055,{h:e}),new $t(e)}}class S1{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=$t.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class x1{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new S1(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n($t.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ym{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class I1{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,r1(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Be(this.o===void 0,3512);const i=c=>{c.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,ie("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>i(c)))};const a=c=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>a(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?a(c):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ym(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Be(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ym(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<s;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=A1(40);for(let c=0;c<a.length;++c)i.length<20&&a[c]<n&&(i+=e.charAt(a[c]%62))}return i}}function ke(s,e){return s<e?-1:s>e?1:0}function jh(s,e){const n=Math.min(s.length,e.length);for(let i=0;i<n;i++){const a=s.charAt(i),c=e.charAt(i);if(a!==c)return Eh(a)===Eh(c)?ke(a,c):Eh(a)?1:-1}return ke(s.length,e.length)}const C1=55296,R1=57343;function Eh(s){const e=s.charCodeAt(0);return e>=C1&&e<=R1}function Yi(s,e,n){return s.length===e.length&&s.every(((i,a)=>n(i,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m="__name__";class er{constructor(e,n,i){n===void 0?n=0:n>e.length&&we(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&we(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return er.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof er?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let a=0;a<i;a++){const c=er.compareSegments(e.get(a),n.get(a));if(c!==0)return c}return ke(e.length,n.length)}static compareSegments(e,n){const i=er.isNumericId(e),a=er.isNumericId(n);return i&&!a?-1:!i&&a?1:i&&a?er.extractNumericId(e).compare(er.extractNumericId(n)):jh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return us.fromString(e.substring(4,e.length-2))}}class Ke extends er{construct(e,n,i){return new Ke(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new te(q.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((a=>a.length>0)))}return new Ke(n)}static emptyPath(){return new Ke([])}}const N1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mt extends er{construct(e,n,i){return new Mt(e,n,i)}static isValidIdentifier(e){return N1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_m}static keyField(){return new Mt([_m])}static fromServerFormat(e){const n=[];let i="",a=0;const c=()=>{if(i.length===0)throw new te(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let d=!1;for(;a<e.length;){const m=e[a];if(m==="\\"){if(a+1===e.length)throw new te(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[a+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new te(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=y,a+=2}else m==="`"?(d=!d,a++):m!=="."||d?(i+=m,a++):(c(),a++)}if(c(),d)throw new te(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mt(n)}static emptyPath(){return new Mt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(Ke.fromString(e))}static fromName(e){return new pe(Ke.fromString(e).popFirst(5))}static empty(){return new pe(Ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ke.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new Ke(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(s,e,n){if(!n)throw new te(q.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function P1(s,e,n,i){if(e===!0&&i===!0)throw new te(q.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function vm(s){if(!pe.isDocumentKey(s))throw new te(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function wm(s){if(pe.isDocumentKey(s))throw new te(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Lg(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Tu(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":we(12329,{type:typeof s})}function or(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new te(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Tu(s);throw new te(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(s,e){const n={typeString:s};return e&&(n.value=e),n}function Ia(s,e){if(!Lg(s))throw new te(q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const a=e[i].typeString,c="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){n=`JSON missing required field: '${i}'`;break}const d=s[i];if(a&&typeof d!==a){n=`JSON field '${i}' must be a ${a}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${i}' field to equal '${c.value}'`;break}}if(n)throw new te(q.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em=-62135596800,Tm=1e6;class Ze{static now(){return Ze.fromMillis(Date.now())}static fromDate(e){return Ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*Tm);return new Ze(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new te(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new te(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Em)throw new te(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Tm}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ze._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ia(e,Ze._jsonSchema))return new Ze(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Em;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ze._jsonSchemaVersion="firestore/timestamp/1.0",Ze._jsonSchema={type:vt("string",Ze._jsonSchemaVersion),seconds:vt("number"),nanoseconds:vt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new Ze(0,0))}static max(){return new Se(new Ze(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va=-1;function k1(s,e){const n=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,a=Se.fromTimestamp(i===1e9?new Ze(n+1,0):new Ze(n,i));return new hs(a,pe.empty(),e)}function V1(s){return new hs(s.readTime,s.key,va)}class hs{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new hs(Se.min(),pe.empty(),va)}static max(){return new hs(Se.max(),pe.empty(),va)}}function D1(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=pe.comparator(s.documentKey,e.documentKey),n!==0?n:ke(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class j1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function so(s){if(s.code!==q.FAILED_PRECONDITION||s.message!==M1)throw s;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W(((i,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,a)},this.catchCallback=c=>{this.wrapFailure(n,c).next(i,a)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):W.reject(n)}static resolve(e){return new W(((n,i)=>{n(e)}))}static reject(e){return new W(((n,i)=>{i(e)}))}static waitFor(e){return new W(((n,i)=>{let a=0,c=0,d=!1;e.forEach((m=>{++a,m.next((()=>{++c,d&&c===a&&n()}),(y=>i(y)))})),d=!0,c===a&&n()}))}static or(e){let n=W.resolve(!1);for(const i of e)n=n.next((a=>a?W.resolve(a):i()));return n}static forEach(e,n){const i=[];return e.forEach(((a,c)=>{i.push(n.call(this,a,c))})),this.waitFor(i)}static mapArray(e,n){return new W(((i,a)=>{const c=e.length,d=new Array(c);let m=0;for(let y=0;y<c;y++){const v=y;n(e[v]).next((T=>{d[v]=T,++m,m===c&&i(d)}),(T=>a(T)))}}))}static doWhile(e,n){return new W(((i,a)=>{const c=()=>{e()===!0?n().next((()=>{c()}),a):i()};c()}))}}function L1(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function io(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Su.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd=-1;function xu(s){return s==null}function cu(s){return s===0&&1/s==-1/0}function O1(s){return typeof s=="number"&&Number.isInteger(s)&&!cu(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og="";function b1(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=Sm(e)),e=F1(s.get(n),e);return Sm(e)}function F1(s,e){let n=e;const i=s.length;for(let a=0;a<i;a++){const c=s.charAt(a);switch(c){case"\0":n+="";break;case Og:n+="";break;default:n+=c}}return n}function Sm(s){return s+Og+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function ys(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function bg(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,n){this.comparator=e,this.root=n||Dt.EMPTY}insert(e,n){return new st(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Dt.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return n+i.left.size;a<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kl(this.root,e,this.comparator,!0)}}class Kl{constructor(e,n,i,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?i(e.key,n):1,n&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dt{constructor(e,n,i,a,c){this.key=e,this.value=n,this.color=i??Dt.RED,this.left=a??Dt.EMPTY,this.right=c??Dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,a,c){return new Dt(e??this.key,n??this.value,i??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let a=this;const c=i(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,n,i),null):c===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return Dt.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}Dt.EMPTY=null,Dt.RED=!0,Dt.BLACK=!1;Dt.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,n,i,a,c){return this}insert(e,n,i){return new Dt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Im(this.data.getIterator())}getIteratorFrom(e){return new Im(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=i.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new St(this.comparator);return n.data=e,n}}class Im{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.fields=e,e.sort(Mt.comparator)}static empty(){return new pn([])}unionWith(e){let n=new St(Mt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new pn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Yi(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Fg("Invalid base64 string: "+c):c}})(e);return new jt(n)}static fromUint8Array(e){const n=(function(a){let c="";for(let d=0;d<a.length;++d)c+=String.fromCharCode(a[d]);return c})(e);return new jt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jt.EMPTY_BYTE_STRING=new jt("");const U1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ds(s){if(Be(!!s,39018),typeof s=="string"){let e=0;const n=U1.exec(s);if(Be(!!n,46558,{timestamp:s}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:dt(s.seconds),nanos:dt(s.nanos)}}function dt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function fs(s){return typeof s=="string"?jt.fromBase64String(s):jt.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug="server_timestamp",zg="__type__",Bg="__previous_value__",$g="__local_write_time__";function id(s){var n,i;return((i=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[zg])==null?void 0:i.stringValue)===Ug}function Iu(s){const e=s.mapValue.fields[Bg];return id(e)?Iu(e):e}function wa(s){const e=ds(s.mapValue.fields[$g].timestampValue);return new Ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e,n,i,a,c,d,m,y,v,T){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=a,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=v,this.isUsingEmulator=T}}const hu="(default)";class Ea{constructor(e,n){this.projectId=e,this.database=n||hu}static empty(){return new Ea("","")}get isDefaultDatabase(){return this.database===hu}isEqual(e){return e instanceof Ea&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg="__type__",B1="__max__",Xl={mapValue:{}},Hg="__vector__",du="value";function ps(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?id(s)?4:q1(s)?9007199254740991:$1(s)?10:11:we(28295,{value:s})}function ar(s,e){if(s===e)return!0;const n=ps(s);if(n!==ps(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return wa(s).isEqual(wa(e));case 3:return(function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const d=ds(a.timestampValue),m=ds(c.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(a,c){return fs(a.bytesValue).isEqual(fs(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(a,c){return dt(a.geoPointValue.latitude)===dt(c.geoPointValue.latitude)&&dt(a.geoPointValue.longitude)===dt(c.geoPointValue.longitude)})(s,e);case 2:return(function(a,c){if("integerValue"in a&&"integerValue"in c)return dt(a.integerValue)===dt(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const d=dt(a.doubleValue),m=dt(c.doubleValue);return d===m?cu(d)===cu(m):isNaN(d)&&isNaN(m)}return!1})(s,e);case 9:return Yi(s.arrayValue.values||[],e.arrayValue.values||[],ar);case 10:case 11:return(function(a,c){const d=a.mapValue.fields||{},m=c.mapValue.fields||{};if(xm(d)!==xm(m))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(m[y]===void 0||!ar(d[y],m[y])))return!1;return!0})(s,e);default:return we(52216,{left:s})}}function Ta(s,e){return(s.values||[]).find((n=>ar(n,e)))!==void 0}function Ji(s,e){if(s===e)return 0;const n=ps(s),i=ps(e);if(n!==i)return ke(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ke(s.booleanValue,e.booleanValue);case 2:return(function(c,d){const m=dt(c.integerValue||c.doubleValue),y=dt(d.integerValue||d.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1})(s,e);case 3:return Am(s.timestampValue,e.timestampValue);case 4:return Am(wa(s),wa(e));case 5:return jh(s.stringValue,e.stringValue);case 6:return(function(c,d){const m=fs(c),y=fs(d);return m.compareTo(y)})(s.bytesValue,e.bytesValue);case 7:return(function(c,d){const m=c.split("/"),y=d.split("/");for(let v=0;v<m.length&&v<y.length;v++){const T=ke(m[v],y[v]);if(T!==0)return T}return ke(m.length,y.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,d){const m=ke(dt(c.latitude),dt(d.latitude));return m!==0?m:ke(dt(c.longitude),dt(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return Cm(s.arrayValue,e.arrayValue);case 10:return(function(c,d){var D,z,X,H;const m=c.fields||{},y=d.fields||{},v=(D=m[du])==null?void 0:D.arrayValue,T=(z=y[du])==null?void 0:z.arrayValue,R=ke(((X=v==null?void 0:v.values)==null?void 0:X.length)||0,((H=T==null?void 0:T.values)==null?void 0:H.length)||0);return R!==0?R:Cm(v,T)})(s.mapValue,e.mapValue);case 11:return(function(c,d){if(c===Xl.mapValue&&d===Xl.mapValue)return 0;if(c===Xl.mapValue)return 1;if(d===Xl.mapValue)return-1;const m=c.fields||{},y=Object.keys(m),v=d.fields||{},T=Object.keys(v);y.sort(),T.sort();for(let R=0;R<y.length&&R<T.length;++R){const D=jh(y[R],T[R]);if(D!==0)return D;const z=Ji(m[y[R]],v[T[R]]);if(z!==0)return z}return ke(y.length,T.length)})(s.mapValue,e.mapValue);default:throw we(23264,{he:n})}}function Am(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return ke(s,e);const n=ds(s),i=ds(e),a=ke(n.seconds,i.seconds);return a!==0?a:ke(n.nanos,i.nanos)}function Cm(s,e){const n=s.values||[],i=e.values||[];for(let a=0;a<n.length&&a<i.length;++a){const c=Ji(n[a],i[a]);if(c)return c}return ke(n.length,i.length)}function Zi(s){return Lh(s)}function Lh(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const i=ds(n);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return fs(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return pe.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let i="[",a=!0;for(const c of n.values||[])a?a=!1:i+=",",i+=Lh(c);return i+"]"})(s.arrayValue):"mapValue"in s?(function(n){const i=Object.keys(n.fields||{}).sort();let a="{",c=!0;for(const d of i)c?c=!1:a+=",",a+=`${d}:${Lh(n.fields[d])}`;return a+"}"})(s.mapValue):we(61005,{value:s})}function eu(s){switch(ps(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Iu(s);return e?16+eu(e):16;case 5:return 2*s.stringValue.length;case 6:return fs(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,c)=>a+eu(c)),0)})(s.arrayValue);case 10:case 11:return(function(i){let a=0;return ys(i.fields,((c,d)=>{a+=c.length+eu(d)})),a})(s.mapValue);default:throw we(13486,{value:s})}}function Rm(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Oh(s){return!!s&&"integerValue"in s}function od(s){return!!s&&"arrayValue"in s}function Nm(s){return!!s&&"nullValue"in s}function Pm(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function tu(s){return!!s&&"mapValue"in s}function $1(s){var n,i;return((i=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[qg])==null?void 0:i.stringValue)===Hg}function da(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return ys(s.mapValue.fields,((n,i)=>e.mapValue.fields[n]=da(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=da(s.arrayValue.values[n]);return e}return{...s}}function q1(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===B1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.value=e}static empty(){return new tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!tu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=da(n)}setAll(e){let n=Mt.emptyPath(),i={},a=[];e.forEach(((d,m)=>{if(!n.isImmediateParentOf(m)){const y=this.getFieldsMap(n);this.applyChanges(y,i,a),i={},a=[],n=m.popLast()}d?i[m.lastSegment()]=da(d):a.push(m.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,i,a)}delete(e){const n=this.field(e.popLast());tu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ar(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=n.mapValue.fields[e.get(i)];tu(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,i){ys(n,((a,c)=>e[a]=c));for(const a of i)delete e[a]}clone(){return new tn(da(this.value))}}function Wg(s){const e=[];return ys(s.fields,((n,i)=>{const a=new Mt([n]);if(tu(i)){const c=Wg(i.mapValue).fields;if(c.length===0)e.push(a);else for(const d of c)e.push(a.child(d))}else e.push(a)})),new pn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,n,i,a,c,d,m){this.key=e,this.documentType=n,this.version=i,this.readTime=a,this.createTime=c,this.data=d,this.documentState=m}static newInvalidDocument(e){return new qt(e,0,Se.min(),Se.min(),Se.min(),tn.empty(),0)}static newFoundDocument(e,n,i,a){return new qt(e,1,n,Se.min(),i,a,0)}static newNoDocument(e,n){return new qt(e,2,n,Se.min(),Se.min(),tn.empty(),0)}static newUnknownDocument(e,n){return new qt(e,3,n,Se.min(),Se.min(),tn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,n){this.position=e,this.inclusive=n}}function km(s,e,n){let i=0;for(let a=0;a<s.position.length;a++){const c=e[a],d=s.position[a];if(c.field.isKeyField()?i=pe.comparator(pe.fromName(d.referenceValue),n.key):i=Ji(d,n.data.field(c.field)),c.dir==="desc"&&(i*=-1),i!==0)break}return i}function Vm(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!ar(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,n="asc"){this.field=e,this.dir=n}}function H1(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{}class _t extends Gg{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new G1(e,n,i):n==="array-contains"?new X1(e,i):n==="in"?new Y1(e,i):n==="not-in"?new J1(e,i):n==="array-contains-any"?new Z1(e,i):new _t(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new Q1(e,i):new K1(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ji(n,this.value)):n!==null&&ps(this.value)===ps(n)&&this.matchesComparison(Ji(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class jn extends Gg{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new jn(e,n)}matches(e){return Qg(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Qg(s){return s.op==="and"}function Kg(s){return W1(s)&&Qg(s)}function W1(s){for(const e of s.filters)if(e instanceof jn)return!1;return!0}function bh(s){if(s instanceof _t)return s.field.canonicalString()+s.op.toString()+Zi(s.value);if(Kg(s))return s.filters.map((e=>bh(e))).join(",");{const e=s.filters.map((n=>bh(n))).join(",");return`${s.op}(${e})`}}function Xg(s,e){return s instanceof _t?(function(i,a){return a instanceof _t&&i.op===a.op&&i.field.isEqual(a.field)&&ar(i.value,a.value)})(s,e):s instanceof jn?(function(i,a){return a instanceof jn&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((c,d,m)=>c&&Xg(d,a.filters[m])),!0):!1})(s,e):void we(19439)}function Yg(s){return s instanceof _t?(function(n){return`${n.field.canonicalString()} ${n.op} ${Zi(n.value)}`})(s):s instanceof jn?(function(n){return n.op.toString()+" {"+n.getFilters().map(Yg).join(" ,")+"}"})(s):"Filter"}class G1 extends _t{constructor(e,n,i){super(e,n,i),this.key=pe.fromName(i.referenceValue)}matches(e){const n=pe.comparator(e.key,this.key);return this.matchesComparison(n)}}class Q1 extends _t{constructor(e,n){super(e,"in",n),this.keys=Jg("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class K1 extends _t{constructor(e,n){super(e,"not-in",n),this.keys=Jg("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Jg(s,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((i=>pe.fromName(i.referenceValue)))}class X1 extends _t{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return od(n)&&Ta(n.arrayValue,this.value)}}class Y1 extends _t{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ta(this.value.arrayValue,n)}}class J1 extends _t{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ta(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ta(this.value.arrayValue,n)}}class Z1 extends _t{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!od(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Ta(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e,n=null,i=[],a=[],c=null,d=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=a,this.limit=c,this.startAt=d,this.endAt=m,this.Te=null}}function Dm(s,e=null,n=[],i=[],a=null,c=null,d=null){return new ew(s,e,n,i,a,c,d)}function ad(s){const e=Ae(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>bh(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(c){return c.field.canonicalString()+c.dir})(i))).join(","),xu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Zi(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Zi(i))).join(",")),e.Te=n}return e.Te}function ld(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!H1(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!Xg(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Vm(s.startAt,e.startAt)&&Vm(s.endAt,e.endAt)}function Fh(s){return pe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,n=null,i=[],a=[],c=null,d="F",m=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=a,this.limit=c,this.limitType=d,this.startAt=m,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function tw(s,e,n,i,a,c,d,m){return new Aa(s,e,n,i,a,c,d,m)}function ud(s){return new Aa(s)}function Mm(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Zg(s){return s.collectionGroup!==null}function fa(s){const e=Ae(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new St(Mt.comparator);return d.filters.forEach((y=>{y.getFlattenedFilters().forEach((v=>{v.isInequality()&&(m=m.add(v.field))}))})),m})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new pu(c,i))})),n.has(Mt.keyField().canonicalString())||e.Ie.push(new pu(Mt.keyField(),i))}return e.Ie}function tr(s){const e=Ae(s);return e.Ee||(e.Ee=nw(e,fa(s))),e.Ee}function nw(s,e){if(s.limitType==="F")return Dm(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((a=>{const c=a.dir==="desc"?"asc":"desc";return new pu(a.field,c)}));const n=s.endAt?new fu(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new fu(s.startAt.position,s.startAt.inclusive):null;return Dm(s.path,s.collectionGroup,e,s.filters,s.limit,n,i)}}function Uh(s,e){const n=s.filters.concat([e]);return new Aa(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function zh(s,e,n){return new Aa(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Au(s,e){return ld(tr(s),tr(e))&&s.limitType===e.limitType}function ey(s){return`${ad(tr(s))}|lt:${s.limitType}`}function qi(s){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((a=>Yg(a))).join(", ")}]`),xu(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((a=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(a))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((a=>Zi(a))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((a=>Zi(a))).join(",")),`Target(${i})`})(tr(s))}; limitType=${s.limitType})`}function Cu(s,e){return e.isFoundDocument()&&(function(i,a){const c=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):pe.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c)})(s,e)&&(function(i,a){for(const c of fa(i))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(i,a){for(const c of i.filters)if(!c.matches(a))return!1;return!0})(s,e)&&(function(i,a){return!(i.startAt&&!(function(d,m,y){const v=km(d,m,y);return d.inclusive?v<=0:v<0})(i.startAt,fa(i),a)||i.endAt&&!(function(d,m,y){const v=km(d,m,y);return d.inclusive?v>=0:v>0})(i.endAt,fa(i),a))})(s,e)}function rw(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function ty(s){return(e,n)=>{let i=!1;for(const a of fa(s)){const c=sw(a,e,n);if(c!==0)return c;i=i||a.field.isKeyField()}return 0}}function sw(s,e,n){const i=s.field.isKeyField()?pe.comparator(e.key,n.key):(function(c,d,m){const y=d.data.field(c),v=m.data.field(c);return y!==null&&v!==null?Ji(y,v):we(42886)})(s.field,e,n);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return we(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[a,c]of i)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[n]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ys(this.inner,((n,i)=>{for(const[a,c]of i)e(a,c)}))}isEmpty(){return bg(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw=new st(pe.comparator);function Nr(){return iw}const ny=new st(pe.comparator);function la(...s){let e=ny;for(const n of s)e=e.insert(n.key,n);return e}function ry(s){let e=ny;return s.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function Qs(){return pa()}function sy(){return pa()}function pa(){return new Js((s=>s.toString()),((s,e)=>s.isEqual(e)))}const ow=new st(pe.comparator),aw=new St(pe.comparator);function Ve(...s){let e=aw;for(const n of s)e=e.add(n);return e}const lw=new St(ke);function uw(){return lw}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cu(e)?"-0":e}}function iy(s){return{integerValue:""+s}}function cw(s,e){return O1(e)?iy(e):cd(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(){this._=void 0}}function hw(s,e,n){return s instanceof mu?(function(a,c){const d={fields:{[zg]:{stringValue:Ug},[$g]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&id(c)&&(c=Iu(c)),c&&(d.fields[Bg]=c),{mapValue:d}})(n,e):s instanceof Sa?ay(s,e):s instanceof xa?ly(s,e):(function(a,c){const d=oy(a,c),m=jm(d)+jm(a.Ae);return Oh(d)&&Oh(a.Ae)?iy(m):cd(a.serializer,m)})(s,e)}function dw(s,e,n){return s instanceof Sa?ay(s,e):s instanceof xa?ly(s,e):n}function oy(s,e){return s instanceof gu?(function(i){return Oh(i)||(function(c){return!!c&&"doubleValue"in c})(i)})(e)?e:{integerValue:0}:null}class mu extends Ru{}class Sa extends Ru{constructor(e){super(),this.elements=e}}function ay(s,e){const n=uy(e);for(const i of s.elements)n.some((a=>ar(a,i)))||n.push(i);return{arrayValue:{values:n}}}class xa extends Ru{constructor(e){super(),this.elements=e}}function ly(s,e){let n=uy(e);for(const i of s.elements)n=n.filter((a=>!ar(a,i)));return{arrayValue:{values:n}}}class gu extends Ru{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function jm(s){return dt(s.integerValue||s.doubleValue)}function uy(s){return od(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function fw(s,e){return s.field.isEqual(e.field)&&(function(i,a){return i instanceof Sa&&a instanceof Sa||i instanceof xa&&a instanceof xa?Yi(i.elements,a.elements,ar):i instanceof gu&&a instanceof gu?ar(i.Ae,a.Ae):i instanceof mu&&a instanceof mu})(s.transform,e.transform)}class pw{constructor(e,n){this.version=e,this.transformResults=n}}class nn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new nn}static exists(e){return new nn(void 0,e)}static updateTime(e){return new nn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nu(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Nu{}function cy(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Pu(s.key,nn.none()):new Ca(s.key,s.data,nn.none());{const n=s.data,i=tn.empty();let a=new St(Mt.comparator);for(let c of e.fields)if(!a.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?i.delete(c):i.set(c,d),a=a.add(c)}return new _s(s.key,i,new pn(a.toArray()),nn.none())}}function mw(s,e,n){s instanceof Ca?(function(a,c,d){const m=a.value.clone(),y=Om(a.fieldTransforms,c,d.transformResults);m.setAll(y),c.convertToFoundDocument(d.version,m).setHasCommittedMutations()})(s,e,n):s instanceof _s?(function(a,c,d){if(!nu(a.precondition,c))return void c.convertToUnknownDocument(d.version);const m=Om(a.fieldTransforms,c,d.transformResults),y=c.data;y.setAll(hy(a)),y.setAll(m),c.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(s,e,n):(function(a,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function ma(s,e,n,i){return s instanceof Ca?(function(c,d,m,y){if(!nu(c.precondition,d))return m;const v=c.value.clone(),T=bm(c.fieldTransforms,y,d);return v.setAll(T),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),null})(s,e,n,i):s instanceof _s?(function(c,d,m,y){if(!nu(c.precondition,d))return m;const v=bm(c.fieldTransforms,y,d),T=d.data;return T.setAll(hy(c)),T.setAll(v),d.convertToFoundDocument(d.version,T).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((R=>R.field)))})(s,e,n,i):(function(c,d,m){return nu(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m})(s,e,n)}function gw(s,e){let n=null;for(const i of s.fieldTransforms){const a=e.data.field(i.field),c=oy(i.transform,a||null);c!=null&&(n===null&&(n=tn.empty()),n.set(i.field,c))}return n||null}function Lm(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Yi(i,a,((c,d)=>fw(c,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Ca extends Nu{constructor(e,n,i,a=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class _s extends Nu{constructor(e,n,i,a,c=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function hy(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=s.data.field(n);e.set(n,i)}})),e}function Om(s,e,n){const i=new Map;Be(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let a=0;a<n.length;a++){const c=s[a],d=c.transform,m=e.data.field(c.field);i.set(c.field,dw(d,m,n[a]))}return i}function bm(s,e,n){const i=new Map;for(const a of s){const c=a.transform,d=n.data.field(a.field);i.set(a.field,hw(c,d,e))}return i}class Pu extends Nu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yw extends Nu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e,n,i,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&mw(c,e,i[a])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=ma(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=ma(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=sy();return this.mutations.forEach((a=>{const c=e.get(a.key),d=c.overlayedDocument;let m=this.applyToLocalView(d,c.mutatedFields);m=n.has(a.key)?null:m;const y=cy(d,m);y!==null&&i.set(a.key,y),d.isValidDocument()||d.convertToNoDocument(Se.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ve())}isEqual(e){return this.batchId===e.batchId&&Yi(this.mutations,e.mutations,((n,i)=>Lm(n,i)))&&Yi(this.baseMutations,e.baseMutations,((n,i)=>Lm(n,i)))}}class hd{constructor(e,n,i,a){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=a}static from(e,n,i){Be(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return ow})();const c=e.mutations;for(let d=0;d<c.length;d++)a=a.insert(c[d].key,i[d].version);return new hd(e,n,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yt,Me;function Ew(s){switch(s){case q.OK:return we(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return we(15467,{code:s})}}function dy(s){if(s===void 0)return Rr("GRPC error has no .code"),q.UNKNOWN;switch(s){case yt.OK:return q.OK;case yt.CANCELLED:return q.CANCELLED;case yt.UNKNOWN:return q.UNKNOWN;case yt.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case yt.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case yt.INTERNAL:return q.INTERNAL;case yt.UNAVAILABLE:return q.UNAVAILABLE;case yt.UNAUTHENTICATED:return q.UNAUTHENTICATED;case yt.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case yt.NOT_FOUND:return q.NOT_FOUND;case yt.ALREADY_EXISTS:return q.ALREADY_EXISTS;case yt.PERMISSION_DENIED:return q.PERMISSION_DENIED;case yt.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case yt.ABORTED:return q.ABORTED;case yt.OUT_OF_RANGE:return q.OUT_OF_RANGE;case yt.UNIMPLEMENTED:return q.UNIMPLEMENTED;case yt.DATA_LOSS:return q.DATA_LOSS;default:return we(39323,{code:s})}}(Me=yt||(yt={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=new us([4294967295,4294967295],0);function Fm(s){const e=Tw().encode(s),n=new Cg;return n.update(e),new Uint8Array(n.digest())}function Um(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new us([n,i],0),new us([a,c],0)]}class dd{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new ua(`Invalid padding: ${n}`);if(i<0)throw new ua(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ua(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new ua(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=us.fromNumber(this.ge)}ye(e,n,i){let a=e.add(n.multiply(us.fromNumber(i)));return a.compare(Sw)===1&&(a=new us([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Fm(e),[i,a]=Um(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(i,a,c);if(!this.we(d))return!1}return!0}static create(e,n,i){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new dd(c,a,n);return i.forEach((m=>d.insert(m))),d}insert(e){if(this.ge===0)return;const n=Fm(e),[i,a]=Um(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(i,a,c);this.Se(d)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class ua extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,n,i,a,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const a=new Map;return a.set(e,Ra.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new ku(Se.min(),a,new st(ke),Nr(),Ve())}}class Ra{constructor(e,n,i,a,c){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Ra(i,n,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n,i,a){this.be=e,this.removedTargetIds=n,this.key=i,this.De=a}}class fy{constructor(e,n){this.targetId=e,this.Ce=n}}class py{constructor(e,n,i=jt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=a}}class zm{constructor(){this.ve=0,this.Fe=Bm(),this.Me=jt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ve(),n=Ve(),i=Ve();return this.Fe.forEach(((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:i=i.add(a);break;default:we(38017,{changeType:c})}})),new Ra(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=Bm()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Be(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class xw{constructor(e){this.Ge=e,this.ze=new Map,this.je=Nr(),this.Je=Yl(),this.He=Yl(),this.Ye=new st(ke)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,a)=>{this.rt(a)&&n(a)}))}st(e){const n=e.targetId,i=e.Ce.count,a=this.ot(n);if(a){const c=a.target;if(Fh(c))if(i===0){const d=new pe(c.path);this.et(n,d,qt.newNoDocument(d,Se.min()))}else Be(i===1,20013,{expectedCount:i});else{const d=this._t(n);if(d!==i){const m=this.ut(e),y=m?this.ct(m,e,d):1;if(y!==0){this.it(n);const v=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,v)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:c=0}=n;let d,m;try{d=fs(i).toUint8Array()}catch(y){if(y instanceof Fg)return Xi("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new dd(d,a,c)}catch(y){return Xi(y instanceof ua?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.ge===0?null:m}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let a=0;return i.forEach((c=>{const d=this.Ge.ht(),m=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.et(n,c,null),a++)})),a}Tt(e){const n=new Map;this.ze.forEach(((c,d)=>{const m=this.ot(d);if(m){if(c.current&&Fh(m.target)){const y=new pe(m.target.path);this.It(y).has(d)||this.Et(d,y)||this.et(d,y,qt.newNoDocument(y,e))}c.Be&&(n.set(d,c.ke()),c.qe())}}));let i=Ve();this.He.forEach(((c,d)=>{let m=!0;d.forEachWhile((y=>{const v=this.ot(y);return!v||v.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(i=i.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const a=new ku(e,n,this.Ye,this.je,i);return this.je=Nr(),this.Je=Yl(),this.He=Yl(),this.Ye=new st(ke),a}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,n)?a.Qe(n,1):a.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new zm,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new St(ke),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new St(ke),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ie("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new zm),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Yl(){return new st(pe.comparator)}function Bm(){return new st(pe.comparator)}const Iw={asc:"ASCENDING",desc:"DESCENDING"},Aw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Cw={and:"AND",or:"OR"};class Rw{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Bh(s,e){return s.useProto3Json||xu(e)?e:{value:e}}function yu(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function my(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function Nw(s,e){return yu(s,e.toTimestamp())}function nr(s){return Be(!!s,49232),Se.fromTimestamp((function(n){const i=ds(n);return new Ze(i.seconds,i.nanos)})(s))}function fd(s,e){return $h(s,e).canonicalString()}function $h(s,e){const n=(function(a){return new Ke(["projects",a.projectId,"databases",a.database])})(s).child("documents");return e===void 0?n:n.child(e)}function gy(s){const e=Ke.fromString(s);return Be(Ey(e),10190,{key:e.toString()}),e}function qh(s,e){return fd(s.databaseId,e.path)}function Th(s,e){const n=gy(e);if(n.get(1)!==s.databaseId.projectId)throw new te(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new te(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new pe(_y(n))}function yy(s,e){return fd(s.databaseId,e)}function Pw(s){const e=gy(s);return e.length===4?Ke.emptyPath():_y(e)}function Hh(s){return new Ke(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function _y(s){return Be(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function $m(s,e,n){return{name:qh(s,e),fields:n.value.mapValue.fields}}function kw(s,e){let n;if("targetChange"in e){e.targetChange;const i=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:we(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=(function(v,T){return v.useProto3Json?(Be(T===void 0||typeof T=="string",58123),jt.fromBase64String(T||"")):(Be(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),jt.fromUint8Array(T||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&(function(v){const T=v.code===void 0?q.UNKNOWN:dy(v.code);return new te(T,v.message||"")})(d);n=new py(i,a,c,m||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=Th(s,i.document.name),c=nr(i.document.updateTime),d=i.document.createTime?nr(i.document.createTime):Se.min(),m=new tn({mapValue:{fields:i.document.fields}}),y=qt.newFoundDocument(a,c,d,m),v=i.targetIds||[],T=i.removedTargetIds||[];n=new ru(v,T,y.key,y)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=Th(s,i.document),c=i.readTime?nr(i.readTime):Se.min(),d=qt.newNoDocument(a,c),m=i.removedTargetIds||[];n=new ru([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=Th(s,i.document),c=i.removedTargetIds||[];n=new ru([],c,a,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:c}=i,d=new ww(a,c),m=i.targetId;n=new fy(m,d)}}return n}function Vw(s,e){let n;if(e instanceof Ca)n={update:$m(s,e.key,e.value)};else if(e instanceof Pu)n={delete:qh(s,e.key)};else if(e instanceof _s)n={update:$m(s,e.key,e.data),updateMask:zw(e.fieldMask)};else{if(!(e instanceof yw))return we(16599,{Vt:e.type});n={verify:qh(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(c,d){const m=d.transform;if(m instanceof mu)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Sa)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof xa)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof gu)return{fieldPath:d.field.canonicalString(),increment:m.Ae};throw we(20930,{transform:d.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(a,c){return c.updateTime!==void 0?{updateTime:Nw(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:we(27497)})(s,e.precondition)),n}function Dw(s,e){return s&&s.length>0?(Be(e!==void 0,14353),s.map((n=>(function(a,c){let d=a.updateTime?nr(a.updateTime):nr(c);return d.isEqual(Se.min())&&(d=nr(c)),new pw(d,a.transformResults||[])})(n,e)))):[]}function Mw(s,e){return{documents:[yy(s,e.path)]}}function jw(s,e){const n={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=yy(s,a);const c=(function(v){if(v.length!==0)return wy(jn.create(v,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const d=(function(v){if(v.length!==0)return v.map((T=>(function(D){return{field:Hi(D.field),direction:bw(D.dir)}})(T)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const m=Bh(s,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{ft:n,parent:a}}function Lw(s){let e=Pw(s.parent);const n=s.structuredQuery,i=n.from?n.from.length:0;let a=null;if(i>0){Be(i===1,65062);const T=n.from[0];T.allDescendants?a=T.collectionId:e=e.child(T.collectionId)}let c=[];n.where&&(c=(function(R){const D=vy(R);return D instanceof jn&&Kg(D)?D.getFilters():[D]})(n.where));let d=[];n.orderBy&&(d=(function(R){return R.map((D=>(function(X){return new pu(Wi(X.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(X.direction))})(D)))})(n.orderBy));let m=null;n.limit&&(m=(function(R){let D;return D=typeof R=="object"?R.value:R,xu(D)?null:D})(n.limit));let y=null;n.startAt&&(y=(function(R){const D=!!R.before,z=R.values||[];return new fu(z,D)})(n.startAt));let v=null;return n.endAt&&(v=(function(R){const D=!R.before,z=R.values||[];return new fu(z,D)})(n.endAt)),tw(e,a,d,c,m,"F",y,v)}function Ow(s,e){const n=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:a})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function vy(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Wi(n.unaryFilter.field);return _t.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Wi(n.unaryFilter.field);return _t.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Wi(n.unaryFilter.field);return _t.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Wi(n.unaryFilter.field);return _t.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(s):s.fieldFilter!==void 0?(function(n){return _t.create(Wi(n.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return jn.create(n.compositeFilter.filters.map((i=>vy(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(n.compositeFilter.op))})(s):we(30097,{filter:s})}function bw(s){return Iw[s]}function Fw(s){return Aw[s]}function Uw(s){return Cw[s]}function Hi(s){return{fieldPath:s.canonicalString()}}function Wi(s){return Mt.fromServerFormat(s.fieldPath)}function wy(s){return s instanceof _t?(function(n){if(n.op==="=="){if(Pm(n.value))return{unaryFilter:{field:Hi(n.field),op:"IS_NAN"}};if(Nm(n.value))return{unaryFilter:{field:Hi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Pm(n.value))return{unaryFilter:{field:Hi(n.field),op:"IS_NOT_NAN"}};if(Nm(n.value))return{unaryFilter:{field:Hi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hi(n.field),op:Fw(n.op),value:n.value}}})(s):s instanceof jn?(function(n){const i=n.getFilters().map((a=>wy(a)));return i.length===1?i[0]:{compositeFilter:{op:Uw(n.op),filters:i}}})(s):we(54877,{filter:s})}function zw(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Ey(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,n,i,a,c=Se.min(),d=Se.min(),m=jt.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(e){return new os(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e){this.yt=e}}function $w(s){const e=Lw({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?zh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(){this.Cn=new Hw}addToCollectionParentIndex(e,n){return this.Cn.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(hs.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(hs.min())}updateCollectionGroup(e,n,i){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class Hw{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),a=this.index[n]||new St(Ke.comparator),c=!a.has(i);return this.index[n]=a.add(i),c}has(e){const n=e.lastSegment(),i=e.popLast(),a=this.index[n];return a&&a.has(i)}getEntries(e){return(this.index[e]||new St(Ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ty=41943040;class en{static withCacheSize(e){return new en(e,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */en.DEFAULT_COLLECTION_PERCENTILE=10,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,en.DEFAULT=new en(Ty,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),en.DISABLED=new en(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new eo(0)}static cr(){return new eo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="LruGarbageCollector",Ww=1048576;function Wm([s,e],[n,i]){const a=ke(s,n);return a===0?ke(e,i):a}class Gw{constructor(e){this.Ir=e,this.buffer=new St(Wm),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Wm(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Qw{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ie(Hm,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){io(n)?ie(Hm,"Ignoring IndexedDB error during garbage collection: ",n):await so(n)}await this.Vr(3e5)}))}}class Kw{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return W.resolve(Su.ce);const i=new Gw(n);return this.mr.forEachTarget(e,(a=>i.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>i.Ar(a))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(qm)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qm):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,a,c,d,m,y,v;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((R=>(R>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),a=this.params.maximumSequenceNumbersToCollect):a=R,d=Date.now(),this.nthSequenceNumber(e,a)))).next((R=>(i=R,m=Date.now(),this.removeTargets(e,i,n)))).next((R=>(c=R,y=Date.now(),this.removeOrphanedDocuments(e,i)))).next((R=>(v=Date.now(),$i()<=je.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-T}ms
	Determined least recently used ${a} in `+(m-d)+`ms
	Removed ${c} targets in `+(y-m)+`ms
	Removed ${R} documents in `+(v-y)+`ms
Total Duration: ${v-T}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:R}))))}}function Xw(s,e){return new Kw(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(){this.changes=new Js((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,qt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?W.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,n,i,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,n)))).next((a=>(i!==null&&ma(i.mutation,a,pn.empty(),Ze.now()),a)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Ve()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Ve()){const a=Qs();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,i).next((c=>{let d=la();return c.forEach(((m,y)=>{d=d.insert(m,y.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const i=Qs();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Ve())))}populateOverlays(e,n,i){const a=[];return i.forEach((c=>{n.has(c)||a.push(c)})),this.documentOverlayCache.getOverlays(e,a).next((c=>{c.forEach(((d,m)=>{n.set(d,m)}))}))}computeViews(e,n,i,a){let c=Nr();const d=pa(),m=(function(){return pa()})();return n.forEach(((y,v)=>{const T=i.get(v.key);a.has(v.key)&&(T===void 0||T.mutation instanceof _s)?c=c.insert(v.key,v):T!==void 0?(d.set(v.key,T.mutation.getFieldMask()),ma(T.mutation,v,T.mutation.getFieldMask(),Ze.now())):d.set(v.key,pn.empty())})),this.recalculateAndSaveOverlays(e,c).next((y=>(y.forEach(((v,T)=>d.set(v,T))),n.forEach(((v,T)=>m.set(v,new Jw(T,d.get(v)??null)))),m)))}recalculateAndSaveOverlays(e,n){const i=pa();let a=new st(((d,m)=>d-m)),c=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const m of d)m.keys().forEach((y=>{const v=n.get(y);if(v===null)return;let T=i.get(y)||pn.empty();T=m.applyToLocalView(v,T),i.set(y,T);const R=(a.get(m.batchId)||Ve()).add(y);a=a.insert(m.batchId,R)}))})).next((()=>{const d=[],m=a.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),v=y.key,T=y.value,R=sy();T.forEach((D=>{if(!c.has(D)){const z=cy(n.get(D),i.get(D));z!==null&&R.set(D,z),c=c.add(D)}})),d.push(this.documentOverlayCache.saveOverlays(e,v,R))}return W.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,a){return(function(d){return pe.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Zg(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,a):this.getDocumentsMatchingCollectionQuery(e,n,i,a)}getNextDocuments(e,n,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,a).next((c=>{const d=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,a-c.size):W.resolve(Qs());let m=va,y=c;return d.next((v=>W.forEach(v,((T,R)=>(m<R.largestBatchId&&(m=R.largestBatchId),c.get(T)?W.resolve():this.remoteDocumentCache.getEntry(e,T).next((D=>{y=y.insert(T,D)}))))).next((()=>this.populateOverlays(e,v,c))).next((()=>this.computeViews(e,y,v,Ve()))).next((T=>({batchId:m,changes:ry(T)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new pe(n)).next((i=>{let a=la();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,a){const c=n.collectionGroup;let d=la();return this.indexManager.getCollectionParents(e,c).next((m=>W.forEach(m,(y=>{const v=(function(R,D){return new Aa(D,null,R.explicitOrderBy.slice(),R.filters.slice(),R.limit,R.limitType,R.startAt,R.endAt)})(n,y.child(c));return this.getDocumentsMatchingCollectionQuery(e,v,i,a).next((T=>{T.forEach(((R,D)=>{d=d.insert(R,D)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,i,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,c,a)))).next((d=>{c.forEach(((y,v)=>{const T=v.getKey();d.get(T)===null&&(d=d.insert(T,qt.newInvalidDocument(T)))}));let m=la();return d.forEach(((y,v)=>{const T=c.get(y);T!==void 0&&ma(T.mutation,v,pn.empty(),Ze.now()),Cu(n,v)&&(m=m.insert(y,v))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return W.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(a){return{id:a.id,version:a.version,createTime:nr(a.createTime)}})(n)),W.resolve()}getNamedQuery(e,n){return W.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(a){return{name:a.name,query:$w(a.bundledQuery),readTime:nr(a.readTime)}})(n)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(){this.overlays=new st(pe.comparator),this.qr=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Qs();return W.forEach(n,(a=>this.getOverlay(e,a).next((c=>{c!==null&&i.set(a,c)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((a,c)=>{this.St(e,n,c)})),W.resolve()}removeOverlaysForBatchId(e,n,i){const a=this.qr.get(i);return a!==void 0&&(a.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(i)),W.resolve()}getOverlaysForCollection(e,n,i){const a=Qs(),c=n.length+1,d=new pe(n.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const y=m.getNext().value,v=y.getKey();if(!n.isPrefixOf(v.path))break;v.path.length===c&&y.largestBatchId>i&&a.set(y.getKey(),y)}return W.resolve(a)}getOverlaysForCollectionGroup(e,n,i,a){let c=new st(((v,T)=>v-T));const d=this.overlays.getIterator();for(;d.hasNext();){const v=d.getNext().value;if(v.getKey().getCollectionGroup()===n&&v.largestBatchId>i){let T=c.get(v.largestBatchId);T===null&&(T=Qs(),c=c.insert(v.largestBatchId,T)),T.set(v.getKey(),v)}}const m=Qs(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((v,T)=>m.set(v,T))),!(m.size()>=a)););return W.resolve(m)}St(e,n,i){const a=this.overlays.get(i.key);if(a!==null){const d=this.qr.get(a.largestBatchId).delete(i.key);this.qr.set(a.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new vw(n,i));let c=this.qr.get(n);c===void 0&&(c=Ve(),this.qr.set(n,c)),this.qr.set(n,c.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(){this.sessionToken=jt.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(){this.Qr=new St(Rt.$r),this.Ur=new St(Rt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new Rt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Gr(new Rt(e,n))}zr(e,n){e.forEach((i=>this.removeReference(i,n)))}jr(e){const n=new pe(new Ke([])),i=new Rt(n,e),a=new Rt(n,e+1),c=[];return this.Ur.forEachInRange([i,a],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new pe(new Ke([])),i=new Rt(n,e),a=new Rt(n,e+1);let c=Ve();return this.Ur.forEachInRange([i,a],(d=>{c=c.add(d.key)})),c}containsKey(e){const n=new Rt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Rt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return pe.comparator(e.key,n.key)||ke(e.Yr,n.Yr)}static Kr(e,n){return ke(e.Yr,n.Yr)||pe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new St(Rt.$r)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,a){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new _w(c,n,i,a);this.mutationQueue.push(d);for(const m of a)this.Zr=this.Zr.add(new Rt(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return W.resolve(d)}lookupMutationBatch(e,n){return W.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,a=this.ei(i),c=a<0?0:a;return W.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?sd:this.tr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Rt(n,0),a=new Rt(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([i,a],(d=>{const m=this.Xr(d.Yr);c.push(m)})),W.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new St(ke);return n.forEach((a=>{const c=new Rt(a,0),d=new Rt(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(m=>{i=i.add(m.Yr)}))})),W.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,a=i.length+1;let c=i;pe.isDocumentKey(c)||(c=c.child(""));const d=new Rt(new pe(c),0);let m=new St(ke);return this.Zr.forEachWhile((y=>{const v=y.key.path;return!!i.isPrefixOf(v)&&(v.length===a&&(m=m.add(y.Yr)),!0)}),d),W.resolve(this.ti(m))}ti(e){const n=[];return e.forEach((i=>{const a=this.Xr(i);a!==null&&n.push(a)})),n}removeMutationBatch(e,n){Be(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return W.forEach(n.mutations,(a=>{const c=new Rt(a.key,n.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,n){const i=new Rt(n,0),a=this.Zr.firstAfterOrEqual(i);return W.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e){this.ri=e,this.docs=(function(){return new st(pe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,a=this.docs.get(i),c=a?a.size:0,d=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return W.resolve(i?i.document.mutableCopy():qt.newInvalidDocument(n))}getEntries(e,n){let i=Nr();return n.forEach((a=>{const c=this.docs.get(a);i=i.insert(a,c?c.document.mutableCopy():qt.newInvalidDocument(a))})),W.resolve(i)}getDocumentsMatchingQuery(e,n,i,a){let c=Nr();const d=n.path,m=new pe(d.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:v,value:{document:T}}=y.getNext();if(!d.isPrefixOf(v.path))break;v.path.length>d.length+1||D1(V1(T),i)<=0||(a.has(T.key)||Cu(n,T))&&(c=c.insert(T.key,T.mutableCopy()))}return W.resolve(c)}getAllFromCollectionGroup(e,n,i,a){we(9500)}ii(e,n){return W.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new iE(this)}getSize(e){return W.resolve(this.size)}}class iE extends Yw{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?n.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(i)})),W.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e){this.persistence=e,this.si=new Js((n=>ad(n)),ld),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new pd,this.targetCount=0,this.ai=eo.ur()}forEachTarget(e,n){return this.si.forEach(((i,a)=>n(a))),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),W.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new eo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.Pr(n),W.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,i){let a=0;const c=[];return this.si.forEach(((d,m)=>{m.sequenceNumber<=n&&i.get(m.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),a++)})),W.waitFor(c).next((()=>a))}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return W.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),W.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const a=this.persistence.referenceDelegate,c=[];return a&&n.forEach((d=>{c.push(a.markPotentiallyOrphaned(e,d))})),W.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return W.resolve(i)}containsKey(e,n){return W.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e,n){this.ui={},this.overlays={},this.ci=new Su(0),this.li=!1,this.li=!0,this.hi=new nE,this.referenceDelegate=e(this),this.Pi=new oE(this),this.indexManager=new qw,this.remoteDocumentCache=(function(a){return new sE(a)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new Bw(n),this.Ii=new eE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new tE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new rE(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){ie("MemoryPersistence","Starting transaction:",e);const a=new aE(this.ci.next());return this.referenceDelegate.Ei(),i(a).next((c=>this.referenceDelegate.di(a).next((()=>c)))).toPromise().then((c=>(a.raiseOnCommittedEvent(),c)))}Ai(e,n){return W.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,n))))}}class aE extends j1{constructor(e){super(),this.currentSequenceNumber=e}}class md{constructor(e){this.persistence=e,this.Ri=new pd,this.Vi=null}static mi(e){return new md(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),W.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),W.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((a=>this.fi.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((a=>{a.forEach((c=>this.fi.add(c.toString())))})).next((()=>i.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.fi,(i=>{const a=pe.fromPath(i);return this.gi(e,a).next((c=>{c||n.removeEntry(a,Se.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return W.or([()=>W.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class _u{constructor(e,n){this.persistence=e,this.pi=new Js((i=>b1(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=Xw(this,n)}static mi(e,n){return new _u(e,n)}Ei(){}di(e){return W.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((a=>i+a))))}wr(e){let n=0;return this.pr(e,(i=>{n++})).next((()=>n))}pr(e,n){return W.forEach(this.pi,((i,a)=>this.br(e,i,a).next((c=>c?W.resolve():n(a)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.ii(e,(d=>this.br(e,d,n).next((m=>{m||(i++,c.removeEntry(d,Se.min()))})))).next((()=>c.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),W.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),W.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),W.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=eu(e.data.value)),n}br(e,n,i){return W.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.pi.get(n);return W.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,n,i,a){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=a}static As(e,n){let i=Ve(),a=Ve();for(const c of n.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new gd(e,n.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return e0()?8:L1(Jv())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,a){const c={result:null};return this.ys(e,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,n,a,i).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new lE;return this.Ss(e,n,d).next((m=>{if(c.result=m,this.Vs)return this.bs(e,n,d,m.size)}))})).next((()=>c.result))}bs(e,n,i,a){return i.documentReadCount<this.fs?($i()<=je.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",qi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),W.resolve()):($i()<=je.DEBUG&&ie("QueryEngine","Query:",qi(n),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.gs*a?($i()<=je.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",qi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,tr(n))):W.resolve())}ys(e,n){if(Mm(n))return W.resolve(null);let i=tr(n);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(n.limit!==null&&a===1&&(n=zh(n,null,"F"),i=tr(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((c=>{const d=Ve(...c);return this.ps.getDocuments(e,d).next((m=>this.indexManager.getMinOffset(e,i).next((y=>{const v=this.Ds(n,m);return this.Cs(n,v,d,y.readTime)?this.ys(e,zh(n,null,"F")):this.vs(e,v,n,y)}))))})))))}ws(e,n,i,a){return Mm(n)||a.isEqual(Se.min())?W.resolve(null):this.ps.getDocuments(e,i).next((c=>{const d=this.Ds(n,c);return this.Cs(n,d,i,a)?W.resolve(null):($i()<=je.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),qi(n)),this.vs(e,d,n,k1(a,va)).next((m=>m)))}))}Ds(e,n){let i=new St(ty(e));return n.forEach(((a,c)=>{Cu(e,c)&&(i=i.add(c))})),i}Cs(e,n,i,a){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Ss(e,n,i){return $i()<=je.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",qi(n)),this.ps.getDocumentsMatchingQuery(e,n,hs.min(),i)}vs(e,n,i,a){return this.ps.getDocumentsMatchingQuery(e,i,a).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd="LocalStore",cE=3e8;class hE{constructor(e,n,i,a){this.persistence=e,this.Fs=n,this.serializer=a,this.Ms=new st(ke),this.xs=new Js((c=>ad(c)),ld),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Zw(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function dE(s,e,n,i){return new hE(s,e,n,i)}async function xy(s,e){const n=Ae(s);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return n.mutationQueue.getAllMutationBatches(i).next((c=>(a=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(i)))).next((c=>{const d=[],m=[];let y=Ve();for(const v of a){d.push(v.batchId);for(const T of v.mutations)y=y.add(T.key)}for(const v of c){m.push(v.batchId);for(const T of v.mutations)y=y.add(T.key)}return n.localDocuments.getDocuments(i,y).next((v=>({Ls:v,removedBatchIds:d,addedBatchIds:m})))}))}))}function fE(s,e){const n=Ae(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,y,v,T){const R=v.batch,D=R.keys();let z=W.resolve();return D.forEach((X=>{z=z.next((()=>T.getEntry(y,X))).next((H=>{const B=v.docVersions.get(X);Be(B!==null,48541),H.version.compareTo(B)<0&&(R.applyToRemoteDocument(H,v),H.isValidDocument()&&(H.setReadTime(v.commitVersion),T.addEntry(H)))}))})),z.next((()=>m.mutationQueue.removeMutationBatch(y,R)))})(n,i,e,c).next((()=>c.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(m){let y=Ve();for(let v=0;v<m.mutationResults.length;++v)m.mutationResults[v].transformResults.length>0&&(y=y.add(m.batch.mutations[v].key));return y})(e)))).next((()=>n.localDocuments.getDocuments(i,a)))}))}function Iy(s){const e=Ae(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function pE(s,e){const n=Ae(s),i=e.snapshotVersion;let a=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});a=n.Ms;const m=[];e.targetChanges.forEach(((T,R)=>{const D=a.get(R);if(!D)return;m.push(n.Pi.removeMatchingKeys(c,T.removedDocuments,R).next((()=>n.Pi.addMatchingKeys(c,T.addedDocuments,R))));let z=D.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(R)!==null?z=z.withResumeToken(jt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):T.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(T.resumeToken,i)),a=a.insert(R,z),(function(H,B,ne){return H.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=cE?!0:ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0})(D,z,T)&&m.push(n.Pi.updateTargetData(c,z))}));let y=Nr(),v=Ve();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(c,T))})),m.push(mE(c,d,e.documentUpdates).next((T=>{y=T.ks,v=T.qs}))),!i.isEqual(Se.min())){const T=n.Pi.getLastRemoteSnapshotVersion(c).next((R=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,i)));m.push(T)}return W.waitFor(m).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,y,v))).next((()=>y))})).then((c=>(n.Ms=a,c)))}function mE(s,e,n){let i=Ve(),a=Ve();return n.forEach((c=>i=i.add(c))),e.getEntries(s,i).next((c=>{let d=Nr();return n.forEach(((m,y)=>{const v=c.get(m);y.isFoundDocument()!==v.isFoundDocument()&&(a=a.add(m)),y.isNoDocument()&&y.version.isEqual(Se.min())?(e.removeEntry(m,y.readTime),d=d.insert(m,y)):!v.isValidDocument()||y.version.compareTo(v.version)>0||y.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(y),d=d.insert(m,y)):ie(yd,"Ignoring outdated watch update for ",m,". Current version:",v.version," Watch version:",y.version)})),{ks:d,qs:a}}))}function gE(s,e){const n=Ae(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=sd),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function yE(s,e){const n=Ae(s);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return n.Pi.getTargetData(i,e).next((c=>c?(a=c,W.resolve(a)):n.Pi.allocateTargetId(i).next((d=>(a=new os(e,d,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=n.Ms.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i}))}async function Wh(s,e,n){const i=Ae(s),a=i.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",c,(d=>i.persistence.referenceDelegate.removeTarget(d,a)))}catch(d){if(!io(d))throw d;ie(yd,`Failed to update sequence numbers for target ${e}: ${d}`)}i.Ms=i.Ms.remove(e),i.xs.delete(a.target)}function Gm(s,e,n){const i=Ae(s);let a=Se.min(),c=Ve();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(y,v,T){const R=Ae(y),D=R.xs.get(T);return D!==void 0?W.resolve(R.Ms.get(D)):R.Pi.getTargetData(v,T)})(i,d,tr(e)).next((m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(d,m.targetId).next((y=>{c=y}))})).next((()=>i.Fs.getDocumentsMatchingQuery(d,e,n?a:Se.min(),n?c:Ve()))).next((m=>(_E(i,rw(e),m),{documents:m,Qs:c})))))}function _E(s,e,n){let i=s.Os.get(e)||Se.min();n.forEach(((a,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)})),s.Os.set(e,i)}class Qm{constructor(){this.activeTargetIds=uw()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vE{constructor(){this.Mo=new Qm,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Qm,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km="ConnectivityMonitor";class Xm{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ie(Km,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ie(Km,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jl=null;function Gh(){return Jl===null?Jl=(function(){return 268435456+Math.round(2147483648*Math.random())})():Jl++,"0x"+Jl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh="RestConnection",EE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class TE{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${a}`,this.Wo=this.databaseId.database===hu?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Go(e,n,i,a,c){const d=Gh(),m=this.zo(e,n.toUriEncodedString());ie(Sh,`Sending RPC '${e}' ${d}:`,m,i);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,a,c);const{host:v}=new URL(m),T=ed(v);return this.Jo(e,m,y,i,T).then((R=>(ie(Sh,`Received RPC '${e}' ${d}: `,R),R)),(R=>{throw Xi(Sh,`RPC '${e}' ${d} failed with error: `,R,"url: ",m,"request:",i),R}))}Ho(e,n,i,a,c,d){return this.Go(e,n,i,a,c)}jo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ro})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((a,c)=>e[c]=a)),i&&i.headers.forEach(((a,c)=>e[c]=a))}zo(e,n){const i=EE[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt="WebChannelConnection";class xE extends TE{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,a,c){const d=Gh();return new Promise(((m,y)=>{const v=new Rg;v.setWithCredentials(!0),v.listenOnce(Ng.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case Zl.NO_ERROR:const R=v.getResponseJson();ie(zt,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(R)),m(R);break;case Zl.TIMEOUT:ie(zt,`RPC '${e}' ${d} timed out`),y(new te(q.DEADLINE_EXCEEDED,"Request time out"));break;case Zl.HTTP_ERROR:const D=v.getStatus();if(ie(zt,`RPC '${e}' ${d} failed with status:`,D,"response text:",v.getResponseText()),D>0){let z=v.getResponseJson();Array.isArray(z)&&(z=z[0]);const X=z==null?void 0:z.error;if(X&&X.status&&X.message){const H=(function(ne){const ae=ne.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(ae)>=0?ae:q.UNKNOWN})(X.status);y(new te(H,X.message))}else y(new te(q.UNKNOWN,"Server responded with status "+v.getStatus()))}else y(new te(q.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:d,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{ie(zt,`RPC '${e}' ${d} completed.`)}}));const T=JSON.stringify(a);ie(zt,`RPC '${e}' ${d} sending request:`,a),v.send(n,"POST",T,i,15)}))}T_(e,n,i){const a=Gh(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Vg(),m=kg(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(y.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,n,i),y.encodeInitMessageHeaders=!0;const T=c.join("");ie(zt,`Creating RPC '${e}' stream ${a}: ${T}`,y);const R=d.createWebChannel(T,y);this.I_(R);let D=!1,z=!1;const X=new SE({Yo:B=>{z?ie(zt,`Not sending because RPC '${e}' stream ${a} is closed:`,B):(D||(ie(zt,`Opening RPC '${e}' stream ${a} transport.`),R.open(),D=!0),ie(zt,`RPC '${e}' stream ${a} sending:`,B),R.send(B))},Zo:()=>R.close()}),H=(B,ne,ae)=>{B.listen(ne,(me=>{try{ae(me)}catch(Ce){setTimeout((()=>{throw Ce}),0)}}))};return H(R,aa.EventType.OPEN,(()=>{z||(ie(zt,`RPC '${e}' stream ${a} transport opened.`),X.o_())})),H(R,aa.EventType.CLOSE,(()=>{z||(z=!0,ie(zt,`RPC '${e}' stream ${a} transport closed`),X.a_(),this.E_(R))})),H(R,aa.EventType.ERROR,(B=>{z||(z=!0,Xi(zt,`RPC '${e}' stream ${a} transport errored. Name:`,B.name,"Message:",B.message),X.a_(new te(q.UNAVAILABLE,"The operation could not be completed")))})),H(R,aa.EventType.MESSAGE,(B=>{var ne;if(!z){const ae=B.data[0];Be(!!ae,16349);const me=ae,Ce=(me==null?void 0:me.error)||((ne=me[0])==null?void 0:ne.error);if(Ce){ie(zt,`RPC '${e}' stream ${a} received error:`,Ce);const Le=Ce.status;let K=(function(x){const P=yt[x];if(P!==void 0)return dy(P)})(Le),k=Ce.message;K===void 0&&(K=q.INTERNAL,k="Unknown error status: "+Le+" with message "+Ce.message),z=!0,X.a_(new te(K,k)),R.close()}else ie(zt,`RPC '${e}' stream ${a} received:`,ae),X.u_(ae)}})),H(m,Pg.STAT_EVENT,(B=>{B.stat===Mh.PROXY?ie(zt,`RPC '${e}' stream ${a} detected buffering proxy`):B.stat===Mh.NOPROXY&&ie(zt,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{X.__()}),0),X}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function xh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(s){return new Rw(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e,n,i=1e3,a=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=a,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,n-i);a>0&&ie("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym="PersistentStream";class Cy{constructor(e,n,i,a,c,d,m,y){this.Mi=e,this.S_=i,this.b_=a,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ay(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(Rr(n.toString()),Rr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===n&&this.G_(i,a)}),(i=>{e((()=>{const a=new te(q.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ie(Ym,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ie(Ym,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class IE extends Cy{constructor(e,n,i,a,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,a,d),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=kw(this.serializer,e),i=(function(c){if(!("targetChange"in c))return Se.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Se.min():d.readTime?nr(d.readTime):Se.min()})(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=Hh(this.serializer),n.addTarget=(function(c,d){let m;const y=d.target;if(m=Fh(y)?{documents:Mw(c,y)}:{query:jw(c,y).ft},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=my(c,d.resumeToken);const v=Bh(c,d.expectedCount);v!==null&&(m.expectedCount=v)}else if(d.snapshotVersion.compareTo(Se.min())>0){m.readTime=yu(c,d.snapshotVersion.toTimestamp());const v=Bh(c,d.expectedCount);v!==null&&(m.expectedCount=v)}return m})(this.serializer,e);const i=Ow(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=Hh(this.serializer),n.removeTarget=e,this.q_(n)}}class AE extends Cy{constructor(e,n,i,a,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,a,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Be(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Be(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Be(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Dw(e.writeResults,e.commitTime),i=nr(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=Hh(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>Vw(this.serializer,i)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{}class RE extends CE{constructor(e,n,i,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new te(q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,$h(n,i),a,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new te(q.UNKNOWN,c.toString())}))}Ho(e,n,i,a,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,m])=>this.connection.Ho(e,$h(n,i),a,d,m,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new te(q.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class NE{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Rr(n),this.aa=!1):ie("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys="RemoteStore";class PE{constructor(e,n,i,a,c){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{i.enqueueAndForget((async()=>{Zs(this)&&(ie(Ys,"Restarting streams for network reachability change."),await(async function(y){const v=Ae(y);v.Ea.add(4),await Na(v),v.Ra.set("Unknown"),v.Ea.delete(4),await Du(v)})(this))}))})),this.Ra=new NE(i,a)}}async function Du(s){if(Zs(s))for(const e of s.da)await e(!0)}async function Na(s){for(const e of s.da)await e(!1)}function Ry(s,e){const n=Ae(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Ed(n)?wd(n):oo(n).O_()&&vd(n,e))}function _d(s,e){const n=Ae(s),i=oo(n);n.Ia.delete(e),i.O_()&&Ny(n,e),n.Ia.size===0&&(i.O_()?i.L_():Zs(n)&&n.Ra.set("Unknown"))}function vd(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}oo(s).Y_(e)}function Ny(s,e){s.Va.Ue(e),oo(s).Z_(e)}function wd(s){s.Va=new xw({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),oo(s).start(),s.Ra.ua()}function Ed(s){return Zs(s)&&!oo(s).x_()&&s.Ia.size>0}function Zs(s){return Ae(s).Ea.size===0}function Py(s){s.Va=void 0}async function kE(s){s.Ra.set("Online")}async function VE(s){s.Ia.forEach(((e,n)=>{vd(s,e)}))}async function DE(s,e){Py(s),Ed(s)?(s.Ra.ha(e),wd(s)):s.Ra.set("Unknown")}async function ME(s,e,n){if(s.Ra.set("Online"),e instanceof py&&e.state===2&&e.cause)try{await(async function(a,c){const d=c.cause;for(const m of c.targetIds)a.Ia.has(m)&&(await a.remoteSyncer.rejectListen(m,d),a.Ia.delete(m),a.Va.removeTarget(m))})(s,e)}catch(i){ie(Ys,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await vu(s,i)}else if(e instanceof ru?s.Va.Ze(e):e instanceof fy?s.Va.st(e):s.Va.tt(e),!n.isEqual(Se.min()))try{const i=await Iy(s.localStore);n.compareTo(i)>=0&&await(function(c,d){const m=c.Va.Tt(d);return m.targetChanges.forEach(((y,v)=>{if(y.resumeToken.approximateByteSize()>0){const T=c.Ia.get(v);T&&c.Ia.set(v,T.withResumeToken(y.resumeToken,d))}})),m.targetMismatches.forEach(((y,v)=>{const T=c.Ia.get(y);if(!T)return;c.Ia.set(y,T.withResumeToken(jt.EMPTY_BYTE_STRING,T.snapshotVersion)),Ny(c,y);const R=new os(T.target,y,v,T.sequenceNumber);vd(c,R)})),c.remoteSyncer.applyRemoteEvent(m)})(s,n)}catch(i){ie(Ys,"Failed to raise snapshot:",i),await vu(s,i)}}async function vu(s,e,n){if(!io(e))throw e;s.Ea.add(1),await Na(s),s.Ra.set("Offline"),n||(n=()=>Iy(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ie(Ys,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await Du(s)}))}function ky(s,e){return e().catch((n=>vu(s,n,e)))}async function Mu(s){const e=Ae(s),n=ms(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:sd;for(;jE(e);)try{const a=await gE(e.localStore,i);if(a===null){e.Ta.length===0&&n.L_();break}i=a.batchId,LE(e,a)}catch(a){await vu(e,a)}Vy(e)&&Dy(e)}function jE(s){return Zs(s)&&s.Ta.length<10}function LE(s,e){s.Ta.push(e);const n=ms(s);n.O_()&&n.X_&&n.ea(e.mutations)}function Vy(s){return Zs(s)&&!ms(s).x_()&&s.Ta.length>0}function Dy(s){ms(s).start()}async function OE(s){ms(s).ra()}async function bE(s){const e=ms(s);for(const n of s.Ta)e.ea(n.mutations)}async function FE(s,e,n){const i=s.Ta.shift(),a=hd.from(i,e,n);await ky(s,(()=>s.remoteSyncer.applySuccessfulWrite(a))),await Mu(s)}async function UE(s,e){e&&ms(s).X_&&await(async function(i,a){if((function(d){return Ew(d)&&d!==q.ABORTED})(a.code)){const c=i.Ta.shift();ms(i).B_(),await ky(i,(()=>i.remoteSyncer.rejectFailedWrite(c.batchId,a))),await Mu(i)}})(s,e),Vy(s)&&Dy(s)}async function Jm(s,e){const n=Ae(s);n.asyncQueue.verifyOperationInProgress(),ie(Ys,"RemoteStore received new credentials");const i=Zs(n);n.Ea.add(3),await Na(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Du(n)}async function zE(s,e){const n=Ae(s);e?(n.Ea.delete(2),await Du(n)):e||(n.Ea.add(2),await Na(n),n.Ra.set("Unknown"))}function oo(s){return s.ma||(s.ma=(function(n,i,a){const c=Ae(n);return c.sa(),new IE(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(s.datastore,s.asyncQueue,{Xo:kE.bind(null,s),t_:VE.bind(null,s),r_:DE.bind(null,s),H_:ME.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),Ed(s)?wd(s):s.Ra.set("Unknown")):(await s.ma.stop(),Py(s))}))),s.ma}function ms(s){return s.fa||(s.fa=(function(n,i,a){const c=Ae(n);return c.sa(),new AE(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:OE.bind(null,s),r_:UE.bind(null,s),ta:bE.bind(null,s),na:FE.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await Mu(s)):(await s.fa.stop(),s.Ta.length>0&&(ie(Ys,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,n,i,a,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=a,this.removalCallback=c,this.deferred=new Ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,a,c){const d=Date.now()+i,m=new Td(e,n,d,a,c);return m.start(i),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sd(s,e){if(Rr("AsyncQueue",`${e}: ${s}`),io(s))return new te(q.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{static emptySet(e){return new Qi(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||pe.comparator(n.key,i.key):(n,i)=>pe.comparator(n.key,i.key),this.keyedMap=la(),this.sortedSet=new st(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Qi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=i.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Qi;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(){this.ga=new st(pe.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class to{constructor(e,n,i,a,c,d,m,y,v){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=v}static fromInitialDocuments(e,n,i,a,c){const d=[];return n.forEach((m=>{d.push({type:0,doc:m})})),new to(e,n,Qi.emptySet(n),d,i,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Au(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==i[a].type||!n[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class $E{constructor(){this.queries=eg(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const a=Ae(n),c=a.queries;a.queries=eg(),c.forEach(((d,m)=>{for(const y of m.Sa)y.onError(i)}))})(this,new te(q.ABORTED,"Firestore shutting down"))}}function eg(){return new Js((s=>ey(s)),Au)}async function My(s,e){const n=Ae(s);let i=3;const a=e.query;let c=n.queries.get(a);c?!c.ba()&&e.Da()&&(i=2):(c=new BE,i=e.Da()?0:1);try{switch(i){case 0:c.wa=await n.onListen(a,!0);break;case 1:c.wa=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(d){const m=Sd(d,`Initialization of query '${qi(e.query)}' failed`);return void e.onError(m)}n.queries.set(a,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&xd(n)}async function jy(s,e){const n=Ae(s),i=e.query;let a=3;const c=n.queries.get(i);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?a=e.Da()?0:1:!c.ba()&&e.Da()&&(a=2))}switch(a){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function qE(s,e){const n=Ae(s);let i=!1;for(const a of e){const c=a.query,d=n.queries.get(c);if(d){for(const m of d.Sa)m.Fa(a)&&(i=!0);d.wa=a}}i&&xd(n)}function HE(s,e,n){const i=Ae(s),a=i.queries.get(e);if(a)for(const c of a.Sa)c.onError(n);i.queries.delete(e)}function xd(s){s.Ca.forEach((e=>{e.next()}))}var Qh,tg;(tg=Qh||(Qh={})).Ma="default",tg.Cache="cache";class Ly{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new to(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=to.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Qh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(e){this.key=e}}class by{constructor(e){this.key=e}}class WE{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ve(),this.mutatedKeys=Ve(),this.eu=ty(e),this.tu=new Qi(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new Zm,a=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,d=a,m=!1;const y=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,v=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((T,R)=>{const D=a.get(T),z=Cu(this.query,R)?R:null,X=!!D&&this.mutatedKeys.has(D.key),H=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let B=!1;D&&z?D.data.isEqual(z.data)?X!==H&&(i.track({type:3,doc:z}),B=!0):this.su(D,z)||(i.track({type:2,doc:z}),B=!0,(y&&this.eu(z,y)>0||v&&this.eu(z,v)<0)&&(m=!0)):!D&&z?(i.track({type:0,doc:z}),B=!0):D&&!z&&(i.track({type:1,doc:D}),B=!0,(y||v)&&(m=!0)),B&&(z?(d=d.add(z),c=H?c.add(T):c.delete(T)):(d=d.delete(T),c=c.delete(T)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const T=this.query.limitType==="F"?d.last():d.first();d=d.delete(T.key),c=c.delete(T.key),i.track({type:1,doc:T})}return{tu:d,iu:i,Cs:m,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,a){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((T,R)=>(function(z,X){const H=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:B})}};return H(z)-H(X)})(T.type,R.type)||this.eu(T.doc,R.doc))),this.ou(i),a=a??!1;const m=n&&!a?this._u():[],y=this.Xa.size===0&&this.current&&!a?1:0,v=y!==this.Za;return this.Za=y,d.length!==0||v?{snapshot:new to(this.query,e.tu,c,d,e.mutatedKeys,y===0,v,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Zm,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ve(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const n=[];return e.forEach((i=>{this.Xa.has(i)||n.push(new by(i))})),this.Xa.forEach((i=>{e.has(i)||n.push(new Oy(i))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ve();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return to.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Id="SyncEngine";class GE{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class QE{constructor(e){this.key=e,this.hu=!1}}class KE{constructor(e,n,i,a,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Js((m=>ey(m)),Au),this.Iu=new Map,this.Eu=new Set,this.du=new st(pe.comparator),this.Au=new Map,this.Ru=new pd,this.Vu={},this.mu=new Map,this.fu=eo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function XE(s,e,n=!0){const i=qy(s);let a;const c=i.Tu.get(e);return c?(i.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.lu()):a=await Fy(i,e,n,!0),a}async function YE(s,e){const n=qy(s);await Fy(n,e,!0,!1)}async function Fy(s,e,n,i){const a=await yE(s.localStore,tr(e)),c=a.targetId,d=s.sharedClientState.addLocalQueryTarget(c,n);let m;return i&&(m=await JE(s,e,c,d==="current",a.resumeToken)),s.isPrimaryClient&&n&&Ry(s.remoteStore,a),m}async function JE(s,e,n,i,a){s.pu=(R,D,z)=>(async function(H,B,ne,ae){let me=B.view.ru(ne);me.Cs&&(me=await Gm(H.localStore,B.query,!1).then((({documents:k})=>B.view.ru(k,me))));const Ce=ae&&ae.targetChanges.get(B.targetId),Le=ae&&ae.targetMismatches.get(B.targetId)!=null,K=B.view.applyChanges(me,H.isPrimaryClient,Ce,Le);return rg(H,B.targetId,K.au),K.snapshot})(s,R,D,z);const c=await Gm(s.localStore,e,!0),d=new WE(e,c.Qs),m=d.ru(c.documents),y=Ra.createSynthesizedTargetChangeForCurrentChange(n,i&&s.onlineState!=="Offline",a),v=d.applyChanges(m,s.isPrimaryClient,y);rg(s,n,v.au);const T=new GE(e,n,d);return s.Tu.set(e,T),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),v.snapshot}async function ZE(s,e,n){const i=Ae(s),a=i.Tu.get(e),c=i.Iu.get(a.targetId);if(c.length>1)return i.Iu.set(a.targetId,c.filter((d=>!Au(d,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await Wh(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),n&&_d(i.remoteStore,a.targetId),Kh(i,a.targetId)})).catch(so)):(Kh(i,a.targetId),await Wh(i.localStore,a.targetId,!0))}async function eT(s,e){const n=Ae(s),i=n.Tu.get(e),a=n.Iu.get(i.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),_d(n.remoteStore,i.targetId))}async function tT(s,e,n){const i=lT(s);try{const a=await(function(d,m){const y=Ae(d),v=Ze.now(),T=m.reduce(((z,X)=>z.add(X.key)),Ve());let R,D;return y.persistence.runTransaction("Locally write mutations","readwrite",(z=>{let X=Nr(),H=Ve();return y.Ns.getEntries(z,T).next((B=>{X=B,X.forEach(((ne,ae)=>{ae.isValidDocument()||(H=H.add(ne))}))})).next((()=>y.localDocuments.getOverlayedDocuments(z,X))).next((B=>{R=B;const ne=[];for(const ae of m){const me=gw(ae,R.get(ae.key).overlayedDocument);me!=null&&ne.push(new _s(ae.key,me,Wg(me.value.mapValue),nn.exists(!0)))}return y.mutationQueue.addMutationBatch(z,v,ne,m)})).next((B=>{D=B;const ne=B.applyToLocalDocumentSet(R,H);return y.documentOverlayCache.saveOverlays(z,B.batchId,ne)}))})).then((()=>({batchId:D.batchId,changes:ry(R)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(d,m,y){let v=d.Vu[d.currentUser.toKey()];v||(v=new st(ke)),v=v.insert(m,y),d.Vu[d.currentUser.toKey()]=v})(i,a.batchId,n),await Pa(i,a.changes),await Mu(i.remoteStore)}catch(a){const c=Sd(a,"Failed to persist write");n.reject(c)}}async function Uy(s,e){const n=Ae(s);try{const i=await pE(n.localStore,e);e.targetChanges.forEach(((a,c)=>{const d=n.Au.get(c);d&&(Be(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?d.hu=!0:a.modifiedDocuments.size>0?Be(d.hu,14607):a.removedDocuments.size>0&&(Be(d.hu,42227),d.hu=!1))})),await Pa(n,i,e)}catch(i){await so(i)}}function ng(s,e,n){const i=Ae(s);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const a=[];i.Tu.forEach(((c,d)=>{const m=d.view.va(e);m.snapshot&&a.push(m.snapshot)})),(function(d,m){const y=Ae(d);y.onlineState=m;let v=!1;y.queries.forEach(((T,R)=>{for(const D of R.Sa)D.va(m)&&(v=!0)})),v&&xd(y)})(i.eventManager,e),a.length&&i.Pu.H_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function nT(s,e,n){const i=Ae(s);i.sharedClientState.updateQueryState(e,"rejected",n);const a=i.Au.get(e),c=a&&a.key;if(c){let d=new st(pe.comparator);d=d.insert(c,qt.newNoDocument(c,Se.min()));const m=Ve().add(c),y=new ku(Se.min(),new Map,new st(ke),d,m);await Uy(i,y),i.du=i.du.remove(c),i.Au.delete(e),Ad(i)}else await Wh(i.localStore,e,!1).then((()=>Kh(i,e,n))).catch(so)}async function rT(s,e){const n=Ae(s),i=e.batch.batchId;try{const a=await fE(n.localStore,e);By(n,i,null),zy(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Pa(n,a)}catch(a){await so(a)}}async function sT(s,e,n){const i=Ae(s);try{const a=await(function(d,m){const y=Ae(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let T;return y.mutationQueue.lookupMutationBatch(v,m).next((R=>(Be(R!==null,37113),T=R.keys(),y.mutationQueue.removeMutationBatch(v,R)))).next((()=>y.mutationQueue.performConsistencyCheck(v))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(v,T,m))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,T))).next((()=>y.localDocuments.getDocuments(v,T)))}))})(i.localStore,e);By(i,e,n),zy(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Pa(i,a)}catch(a){await so(a)}}function zy(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function By(s,e,n){const i=Ae(s);let a=i.Vu[i.currentUser.toKey()];if(a){const c=a.get(e);c&&(n?c.reject(n):c.resolve(),a=a.remove(e)),i.Vu[i.currentUser.toKey()]=a}}function Kh(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),n&&s.Pu.yu(i,n);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((i=>{s.Ru.containsKey(i)||$y(s,i)}))}function $y(s,e){s.Eu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(_d(s.remoteStore,n),s.du=s.du.remove(e),s.Au.delete(n),Ad(s))}function rg(s,e,n){for(const i of n)i instanceof Oy?(s.Ru.addReference(i.key,e),iT(s,i)):i instanceof by?(ie(Id,"Document no longer in limbo: "+i.key),s.Ru.removeReference(i.key,e),s.Ru.containsKey(i.key)||$y(s,i.key)):we(19791,{wu:i})}function iT(s,e){const n=e.key,i=n.path.canonicalString();s.du.get(n)||s.Eu.has(i)||(ie(Id,"New document in limbo: "+n),s.Eu.add(i),Ad(s))}function Ad(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new pe(Ke.fromString(e)),i=s.fu.next();s.Au.set(i,new QE(n)),s.du=s.du.insert(n,i),Ry(s.remoteStore,new os(tr(ud(n.path)),i,"TargetPurposeLimboResolution",Su.ce))}}async function Pa(s,e,n){const i=Ae(s),a=[],c=[],d=[];i.Tu.isEmpty()||(i.Tu.forEach(((m,y)=>{d.push(i.pu(y,e,n).then((v=>{var T;if((v||n)&&i.isPrimaryClient){const R=v?!v.fromCache:(T=n==null?void 0:n.targetChanges.get(y.targetId))==null?void 0:T.current;i.sharedClientState.updateQueryState(y.targetId,R?"current":"not-current")}if(v){a.push(v);const R=gd.As(y.targetId,v);c.push(R)}})))})),await Promise.all(d),i.Pu.H_(a),await(async function(y,v){const T=Ae(y);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(R=>W.forEach(v,(D=>W.forEach(D.Es,(z=>T.persistence.referenceDelegate.addReference(R,D.targetId,z))).next((()=>W.forEach(D.ds,(z=>T.persistence.referenceDelegate.removeReference(R,D.targetId,z)))))))))}catch(R){if(!io(R))throw R;ie(yd,"Failed to update sequence numbers: "+R)}for(const R of v){const D=R.targetId;if(!R.fromCache){const z=T.Ms.get(D),X=z.snapshotVersion,H=z.withLastLimboFreeSnapshotVersion(X);T.Ms=T.Ms.insert(D,H)}}})(i.localStore,c))}async function oT(s,e){const n=Ae(s);if(!n.currentUser.isEqual(e)){ie(Id,"User change. New user:",e.toKey());const i=await xy(n.localStore,e);n.currentUser=e,(function(c,d){c.mu.forEach((m=>{m.forEach((y=>{y.reject(new te(q.CANCELLED,d))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Pa(n,i.Ls)}}function aT(s,e){const n=Ae(s),i=n.Au.get(e);if(i&&i.hu)return Ve().add(i.key);{let a=Ve();const c=n.Iu.get(e);if(!c)return a;for(const d of c){const m=n.Tu.get(d);a=a.unionWith(m.view.nu)}return a}}function qy(s){const e=Ae(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=Uy.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nT.bind(null,e),e.Pu.H_=qE.bind(null,e.eventManager),e.Pu.yu=HE.bind(null,e.eventManager),e}function lT(s){const e=Ae(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sT.bind(null,e),e}class wu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return dE(this.persistence,new uE,e.initialUser,this.serializer)}Cu(e){return new Sy(md.mi,this.serializer)}Du(e){return new vE}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wu.provider={build:()=>new wu};class uT extends wu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Be(this.persistence.referenceDelegate instanceof _u,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new Qw(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?en.withCacheSize(this.cacheSizeBytes):en.DEFAULT;return new Sy((i=>_u.mi(i,n)),this.serializer)}}class Xh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ng(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=oT.bind(null,this.syncEngine),await zE(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new $E})()}createDatastore(e){const n=Vu(e.databaseInfo.databaseId),i=(function(c){return new xE(c)})(e.databaseInfo);return(function(c,d,m,y){return new RE(c,d,m,y)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,a,c,d,m){return new PE(i,a,c,d,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>ng(this.syncEngine,n,0)),(function(){return Xm.v()?new Xm:new wE})())}createSyncEngine(e,n){return(function(a,c,d,m,y,v,T){const R=new KE(a,c,d,m,y,v);return T&&(R.gu=!0),R})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(a){const c=Ae(a);ie(Ys,"RemoteStore shutting down."),c.Ea.add(5),await Na(c),c.Aa.shutdown(),c.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Xh.provider={build:()=>new Xh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Rr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs="FirestoreClient";class cT{constructor(e,n,i,a,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=a,this.user=$t.UNAUTHENTICATED,this.clientId=rd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(i,(async d=>{ie(gs,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(ie(gs,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Sd(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Ih(s,e){s.asyncQueue.verifyOperationInProgress(),ie(gs,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let i=n.initialUser;s.setCredentialChangeListener((async a=>{i.isEqual(a)||(await xy(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function sg(s,e){s.asyncQueue.verifyOperationInProgress();const n=await hT(s);ie(gs,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((i=>Jm(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,a)=>Jm(e.remoteStore,a))),s._onlineComponents=e}async function hT(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ie(gs,"Using user provided OfflineComponentProvider");try{await Ih(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(a){return a.name==="FirebaseError"?a.code===q.FAILED_PRECONDITION||a.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(n))throw n;Xi("Error using user provided cache. Falling back to memory cache: "+n),await Ih(s,new wu)}}else ie(gs,"Using default OfflineComponentProvider"),await Ih(s,new uT(void 0));return s._offlineComponents}async function Wy(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ie(gs,"Using user provided OnlineComponentProvider"),await sg(s,s._uninitializedComponentsProvider._online)):(ie(gs,"Using default OnlineComponentProvider"),await sg(s,new Xh))),s._onlineComponents}function dT(s){return Wy(s).then((e=>e.syncEngine))}async function Gy(s){const e=await Wy(s),n=e.eventManager;return n.onListen=XE.bind(null,e.syncEngine),n.onUnlisten=ZE.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=YE.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=eT.bind(null,e.syncEngine),n}function fT(s,e,n={}){const i=new Ar;return s.asyncQueue.enqueueAndForget((async()=>(function(c,d,m,y,v){const T=new Hy({next:D=>{T.Nu(),d.enqueueAndForget((()=>jy(c,R)));const z=D.docs.has(m);!z&&D.fromCache?v.reject(new te(q.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&D.fromCache&&y&&y.source==="server"?v.reject(new te(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(D)},error:D=>v.reject(D)}),R=new Ly(ud(m.path),T,{includeMetadataChanges:!0,qa:!0});return My(c,R)})(await Gy(s),s.asyncQueue,e,n,i))),i.promise}function pT(s,e,n={}){const i=new Ar;return s.asyncQueue.enqueueAndForget((async()=>(function(c,d,m,y,v){const T=new Hy({next:D=>{T.Nu(),d.enqueueAndForget((()=>jy(c,R))),D.fromCache&&y.source==="server"?v.reject(new te(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(D)},error:D=>v.reject(D)}),R=new Ly(m,T,{includeMetadataChanges:!0,qa:!0});return My(c,R)})(await Gy(s),s.asyncQueue,e,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky="firestore.googleapis.com",og=!0;class ag{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new te(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ky,this.ssl=og}else this.host=e.host,this.ssl=e.ssl??og;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ty;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ww)throw new te(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}P1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Qy(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new te(q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new te(q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new te(q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ju{constructor(e,n,i,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ag({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ag(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new w1;switch(i.type){case"firstParty":return new x1(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new te(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=ig.get(n);i&&(ie("ComponentProvider","Removing Datastore"),ig.delete(n),i.terminate())})(this),Promise.resolve()}}function mT(s,e,n,i={}){var v;s=or(s,ju);const a=ed(e),c=s._getSettings(),d={...c,emulatorOptions:s._getEmulatorOptions()},m=`${e}:${n}`;a&&(Gv(`https://${m}`),Yv("Firestore",!0)),c.host!==Ky&&c.host!==m&&Xi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...c,host:m,ssl:a,emulatorOptions:i};if(!au(y,d)&&(s._setSettings(y),i.mockUserToken)){let T,R;if(typeof i.mockUserToken=="string")T=i.mockUserToken,R=$t.MOCK_USER;else{T=Qv(i.mockUserToken,(v=s._app)==null?void 0:v.options.projectId);const D=i.mockUserToken.sub||i.mockUserToken.user_id;if(!D)throw new te(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");R=new $t(D)}s._authCredentials=new E1(new Mg(T,R))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ao(this.firestore,e,this._query)}}class wt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wt(this.firestore,e,this._key)}toJSON(){return{type:wt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Ia(n,wt._jsonSchema))return new wt(e,i||null,new pe(Ke.fromString(n.referencePath)))}}wt._jsonSchemaVersion="firestore/documentReference/1.0",wt._jsonSchema={type:vt("string",wt._jsonSchemaVersion),referencePath:vt("string")};class cs extends ao{constructor(e,n,i){super(e,n,ud(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wt(this.firestore,null,new pe(e))}withConverter(e){return new cs(this.firestore,e,this._path)}}function Bt(s,e,...n){if(s=ir(s),jg("collection","path",e),s instanceof ju){const i=Ke.fromString(e,...n);return wm(i),new cs(s,null,i)}{if(!(s instanceof wt||s instanceof cs))throw new te(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Ke.fromString(e,...n));return wm(i),new cs(s.firestore,null,i)}}function Sn(s,e,...n){if(s=ir(s),arguments.length===1&&(e=rd.newId()),jg("doc","path",e),s instanceof ju){const i=Ke.fromString(e,...n);return vm(i),new wt(s,null,new pe(i))}{if(!(s instanceof wt||s instanceof cs))throw new te(q.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Ke.fromString(e,...n));return vm(i),new wt(s.firestore,s instanceof cs?s.converter:null,new pe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg="AsyncQueue";class ug{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ay(this,"async_queue_retry"),this._c=()=>{const i=xh();i&&ie(lg,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=xh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=xh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ar;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!io(e))throw e;ie(lg,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Rr("INTERNAL UNHANDLED ERROR: ",cg(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const a=Td.createAndSchedule(this,e,n,i,(c=>this.hc(c)));return this.tc.push(a),a}uc(){this.nc&&we(47125,{Pc:cg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function cg(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class ei extends ju{constructor(e,n,i,a){super(e,n,i,a),this.type="firestore",this._queue=new ug,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ug(e),this._firestoreClient=void 0,await e}}}function gT(s,e){const n=typeof s=="object"?s:a1(),i=typeof s=="string"?s:hu,a=n1(n,"firestore").getImmediate({identifier:i});if(!a._initialized){const c=Hv("firestore");c&&mT(a,...c)}return a}function Lu(s){if(s._terminated)throw new te(q.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||yT(s),s._firestoreClient}function yT(s){var i,a,c;const e=s._freezeSettings(),n=(function(m,y,v,T){return new z1(m,y,v,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,Qy(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)})(s._databaseId,((i=s._app)==null?void 0:i.options.appId)||"",s._persistenceKey,e);s._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new cT(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(m){const y=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(y),_online:y}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xn(jt.fromBase64String(e))}catch(n){throw new te(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new xn(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:xn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ia(e,xn._jsonSchema))return xn.fromBase64String(e.bytes)}}xn._jsonSchemaVersion="firestore/bytes/1.0",xn._jsonSchema={type:vt("string",xn._jsonSchemaVersion),bytes:vt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new te(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new te(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new te(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:rr._jsonSchemaVersion}}static fromJSON(e){if(Ia(e,rr._jsonSchema))return new rr(e.latitude,e.longitude)}}rr._jsonSchemaVersion="firestore/geoPoint/1.0",rr._jsonSchema={type:vt("string",rr._jsonSchemaVersion),latitude:vt("number"),longitude:vt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==a[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:sr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ia(e,sr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new sr(e.vectorValues);throw new te(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}sr._jsonSchemaVersion="firestore/vectorValue/1.0",sr._jsonSchema={type:vt("string",sr._jsonSchemaVersion),vectorValues:vt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T=/^__.*__$/;class vT{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new _s(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ca(e,this.data,n,this.fieldTransforms)}}class Xy{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new _s(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Yy(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:s})}}class Rd{constructor(e,n,i,a,c,d){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=a,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Rd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const n=(a=this.path)==null?void 0:a.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var a;const n=(a=this.path)==null?void 0:a.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Eu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Yy(this.Ac)&&_T.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class wT{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Vu(e)}Cc(e,n,i,a=!1){return new Rd({Ac:e,methodName:n,Dc:i,path:Mt.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bu(s){const e=s._freezeSettings(),n=Vu(s._databaseId);return new wT(s._databaseId,!!e.ignoreUndefinedProperties,n)}function Nd(s,e,n,i,a,c={}){const d=s.Cc(c.merge||c.mergeFields?2:0,e,n,a);Pd("Data must be an object, but it was:",d,i);const m=Jy(i,d);let y,v;if(c.merge)y=new pn(d.fieldMask),v=d.fieldTransforms;else if(c.mergeFields){const T=[];for(const R of c.mergeFields){const D=Yh(e,R,n);if(!d.contains(D))throw new te(q.INVALID_ARGUMENT,`Field '${D}' is specified in your field mask but missing from your input data.`);e_(T,D)||T.push(D)}y=new pn(T),v=d.fieldTransforms.filter((R=>y.covers(R.field)))}else y=null,v=d.fieldTransforms;return new vT(new tn(m),y,v)}class Fu extends Cd{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fu}}function ET(s,e,n,i){const a=s.Cc(1,e,n);Pd("Data must be an object, but it was:",a,i);const c=[],d=tn.empty();ys(i,((y,v)=>{const T=kd(e,y,n);v=ir(v);const R=a.yc(T);if(v instanceof Fu)c.push(T);else{const D=ka(v,R);D!=null&&(c.push(T),d.set(T,D))}}));const m=new pn(c);return new Xy(d,m,a.fieldTransforms)}function TT(s,e,n,i,a,c){const d=s.Cc(1,e,n),m=[Yh(e,i,n)],y=[a];if(c.length%2!=0)throw new te(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let D=0;D<c.length;D+=2)m.push(Yh(e,c[D])),y.push(c[D+1]);const v=[],T=tn.empty();for(let D=m.length-1;D>=0;--D)if(!e_(v,m[D])){const z=m[D];let X=y[D];X=ir(X);const H=d.yc(z);if(X instanceof Fu)v.push(z);else{const B=ka(X,H);B!=null&&(v.push(z),T.set(z,B))}}const R=new pn(v);return new Xy(T,R,d.fieldTransforms)}function ST(s,e,n,i=!1){return ka(n,s.Cc(i?4:3,e))}function ka(s,e){if(Zy(s=ir(s)))return Pd("Unsupported field value:",e,s),Jy(s,e);if(s instanceof Cd)return(function(i,a){if(!Yy(a.Ac))throw a.Sc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(a);c&&a.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,a){const c=[];let d=0;for(const m of i){let y=ka(m,a.wc(d));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),d++}return{arrayValue:{values:c}}})(s,e)}return(function(i,a){if((i=ir(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return cw(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const c=Ze.fromDate(i);return{timestampValue:yu(a.serializer,c)}}if(i instanceof Ze){const c=new Ze(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:yu(a.serializer,c)}}if(i instanceof rr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof xn)return{bytesValue:my(a.serializer,i._byteString)};if(i instanceof wt){const c=a.databaseId,d=i.firestore._databaseId;if(!d.isEqual(c))throw a.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:fd(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof sr)return(function(d,m){return{mapValue:{fields:{[qg]:{stringValue:Hg},[du]:{arrayValue:{values:d.toArray().map((v=>{if(typeof v!="number")throw m.Sc("VectorValues must only contain numeric values.");return cd(m.serializer,v)}))}}}}}})(i,a);throw a.Sc(`Unsupported field value: ${Tu(i)}`)})(s,e)}function Jy(s,e){const n={};return bg(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ys(s,((i,a)=>{const c=ka(a,e.mc(i));c!=null&&(n[i]=c)})),{mapValue:{fields:n}}}function Zy(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Ze||s instanceof rr||s instanceof xn||s instanceof wt||s instanceof Cd||s instanceof sr)}function Pd(s,e,n){if(!Zy(n)||!Lg(n)){const i=Tu(n);throw i==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+i)}}function Yh(s,e,n){if((e=ir(e))instanceof Ou)return e._internalPath;if(typeof e=="string")return kd(s,e);throw Eu("Field path arguments must be of type string or ",s,!1,void 0,n)}const xT=new RegExp("[~\\*/\\[\\]]");function kd(s,e,n){if(e.search(xT)>=0)throw Eu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Ou(...e.split("."))._internalPath}catch{throw Eu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Eu(s,e,n,i,a){const c=i&&!i.isEmpty(),d=a!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(c||d)&&(y+=" (found",c&&(y+=` in field ${i}`),d&&(y+=` in document ${a}`),y+=")"),new te(q.INVALID_ARGUMENT,m+s+y)}function e_(s,e){return s.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,n,i,a,c){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new IT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Vd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class IT extends t_{data(){return super.data()}}function Vd(s,e){return typeof e=="string"?kd(s,e):e instanceof Ou?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new te(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dd{}class CT extends Dd{}function ia(s,e,...n){let i=[];e instanceof Dd&&i.push(e),i=i.concat(n),(function(c){const d=c.filter((y=>y instanceof Md)).length,m=c.filter((y=>y instanceof Uu)).length;if(d>1||d>0&&m>0)throw new te(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)s=a._apply(s);return s}class Uu extends CT{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Uu(e,n,i)}_apply(e){const n=this._parse(e);return n_(e._query,n),new ao(e.firestore,e.converter,Uh(e._query,n))}_parse(e){const n=bu(e.firestore);return(function(c,d,m,y,v,T,R){let D;if(v.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new te(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){dg(R,T);const X=[];for(const H of R)X.push(hg(y,c,H));D={arrayValue:{values:X}}}else D=hg(y,c,R)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||dg(R,T),D=ST(m,d,R,T==="in"||T==="not-in");return _t.create(v,T,D)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ws(s,e,n){const i=e,a=Vd("where",s);return Uu._create(a,i,n)}class Md extends Dd{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Md(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:jn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(a,c){let d=a;const m=c.getFlattenedFilters();for(const y of m)n_(d,y),d=Uh(d,y)})(e._query,n),new ao(e.firestore,e.converter,Uh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function hg(s,e,n){if(typeof(n=ir(n))=="string"){if(n==="")throw new te(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zg(e)&&n.indexOf("/")!==-1)throw new te(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Ke.fromString(n));if(!pe.isDocumentKey(i))throw new te(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Rm(s,new pe(i))}if(n instanceof wt)return Rm(s,n._key);throw new te(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Tu(n)}.`)}function dg(s,e){if(!Array.isArray(s)||s.length===0)throw new te(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function n_(s,e){const n=(function(a,c){for(const d of a)for(const m of d.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(s.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new te(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new te(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class RT{convertValue(e,n="none"){switch(ps(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(fs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return ys(e,((a,c)=>{i[a]=this.convertValue(c,n)})),i}convertVectorValue(e){var i,a,c;const n=(c=(a=(i=e.fields)==null?void 0:i[du].arrayValue)==null?void 0:a.values)==null?void 0:c.map((d=>dt(d.doubleValue)));return new sr(n)}convertGeoPoint(e){return new rr(dt(e.latitude),dt(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Iu(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(wa(e));default:return null}}convertTimestamp(e){const n=ds(e);return new Ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Ke.fromString(e);Be(Ey(i),9688,{name:e});const a=new Ea(i.get(1),i.get(3)),c=new pe(i.popFirst(5));return a.isEqual(n)||Rr(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jd(s,e,n){let i;return i=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,i}class ca{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ks extends t_{constructor(e,n,i,a,c,d){super(e,n,i,a,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new su(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Vd("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new te(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ks._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ks._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ks._jsonSchema={type:vt("string",Ks._jsonSchemaVersion),bundleSource:vt("string","DocumentSnapshot"),bundleName:vt("string"),bundle:vt("string")};class su extends Ks{data(e={}){return super.data(e)}}class Ki{constructor(e,n,i,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new ca(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new su(this._firestore,this._userDataWriter,i.key,i,new ca(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new te(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(a,c){if(a._snapshot.oldDocs.isEmpty()){let d=0;return a._snapshot.docChanges.map((m=>{const y=new su(a._firestore,a._userDataWriter,m.doc.key,m.doc,new ca(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:d++}}))}{let d=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const y=new su(a._firestore,a._userDataWriter,m.doc.key,m.doc,new ca(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);let v=-1,T=-1;return m.type!==0&&(v=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),T=d.indexOf(m.doc.key)),{type:NT(m.type),doc:y,oldIndex:v,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new te(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ki._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=rd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],a=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),i.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),a.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function NT(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(s){s=or(s,wt);const e=or(s.firestore,ei);return fT(Lu(e),s._key).then((n=>kT(e,s,n)))}Ki._jsonSchemaVersion="firestore/querySnapshot/1.0",Ki._jsonSchema={type:vt("string",Ki._jsonSchemaVersion),bundleSource:vt("string","QuerySnapshot"),bundleName:vt("string"),bundle:vt("string")};class r_ extends RT{constructor(e){super(),this.firestore=e}convertBytes(e){return new xn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new wt(this.firestore,null,n)}}function fn(s){s=or(s,ao);const e=or(s.firestore,ei),n=Lu(e),i=new r_(e);return AT(s._query),pT(n,s._query).then((a=>new Ki(e,i,s,a)))}function oa(s,e,n){s=or(s,wt);const i=or(s.firestore,ei),a=jd(s.converter,e,n);return zu(i,[Nd(bu(i),"setDoc",s._key,a,s.converter!==null,n).toMutation(s._key,nn.none())])}function Ah(s){return zu(or(s.firestore,ei),[new Pu(s._key,nn.none())])}function fg(s,e){const n=or(s.firestore,ei),i=Sn(s),a=jd(s.converter,e);return zu(n,[Nd(bu(s.firestore),"addDoc",i._key,a,s.converter!==null,{}).toMutation(i._key,nn.exists(!1))]).then((()=>i))}function zu(s,e){return(function(i,a){const c=new Ar;return i.asyncQueue.enqueueAndForget((async()=>tT(await dT(i),a,c))),c.promise})(Lu(s),e)}function kT(s,e,n){const i=n.docs.get(e._key),a=new r_(s);return new Ks(s,a,e._key,i,new ca(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=bu(e)}set(e,n,i){this._verifyNotCommitted();const a=Ch(e,this._firestore),c=jd(a.converter,n,i),d=Nd(this._dataReader,"WriteBatch.set",a._key,c,a.converter!==null,i);return this._mutations.push(d.toMutation(a._key,nn.none())),this}update(e,n,i,...a){this._verifyNotCommitted();const c=Ch(e,this._firestore);let d;return d=typeof(n=ir(n))=="string"||n instanceof Ou?TT(this._dataReader,"WriteBatch.update",c._key,n,i,a):ET(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(d.toMutation(c._key,nn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ch(e,this._firestore);return this._mutations=this._mutations.concat(new Pu(n._key,nn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new te(q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ch(s,e){if((s=ir(s)).firestore!==e)throw new te(q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(s){return Lu(s=or(s,ei)),new VT(s,(e=>zu(s,e)))}(function(e,n=!0){(function(a){ro=a})(o1),uu(new ya("firestore",((i,{instanceIdentifier:a,options:c})=>{const d=i.getProvider("app").getImmediate(),m=new ei(new T1(i.getProvider("auth-internal")),new I1(d,i.getProvider("app-check-internal")),(function(v,T){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new te(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ea(v.options.projectId,T)})(d,a),d);return c={useFetchStreams:n,...c},m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),Gi(mm,gm,e),Gi(mm,gm,"esm2020")})();const DT={apiKey:"AIzaSyAfbHhSxXazdJmgraHWm4BtujUGoWcEUQU",authDomain:"saadqu-92cfc.firebaseapp.com",projectId:"saadqu-92cfc",storageBucket:"saadqu-92cfc.firebasestorage.app",messagingSenderId:"143670086980",appId:"1:143670086980:web:81b09b0103966856269b11",measurementId:"G-B1NH1DGEE3"},MT=xg(DT),He=gT(MT),jT={eman:{name:" ",code:"eman",password:"eman2025",email:"ahmed@example.com",students:[{id:"31201261802388",name:"   "},{id:"31112141802322",name:"   "},{id:"31203151804361",name:"   "},{id:"31210201800741",name:"   "},{id:"31110171800976",name:"    "},{id:"30905231802441",name:"   "},{id:"31205031802805",name:"   "},{id:"31205101802344",name:"   "},{id:"31008141800301",name:"    "},{id:"31303161802728",name:"   "}]},samar:{name:" ",code:"samar",password:"samar2025",email:"samar@example.com",students:[{id:"31309271801245",name:"   "},{id:"31206201801651",name:"    "},{id:"31206211801161",name:"   "},{id:"30901011806327",name:"    "},{id:"31407171806209",name:"    "},{id:"31111111800884",name:"   "},{id:"31408031801629",name:"   "},{id:"31001311801966",name:"   "},{id:"31601261802378",name:"   "}]}},Ue={getAdminPassword:async()=>{try{const s=await PT(Sn(He,"settings","admin"));return s.exists()?s.data().password:"admin2025"}catch(s){return console.error(s),"admin2025"}},setAdminPassword:async s=>{await oa(Sn(He,"settings","admin"),{password:s})},getTeachers:async()=>{try{const s=await fn(Bt(He,"teachers")),e={};if(s.empty){const n=pg(He);for(const[i,a]of Object.entries(jT)){const c=Sn(He,"teachers",i);n.set(c,a),e[i]=a}return await n.commit(),e}return s.forEach(n=>{e[n.id]=n.data()}),e}catch(s){return console.error("Error fetching teachers:",s),{}}},saveTeacher:async s=>{await oa(Sn(He,"teachers",s.code),s)},deleteTeacher:async s=>{await Ah(Sn(He,"teachers",s))},getStudents:async()=>(await fn(Bt(He,"students"))).docs.map(e=>e.data()),registerStudent:async s=>{await oa(Sn(He,"students",s.id),s)},updateStudent:async s=>{await oa(Sn(He,"students",s.id),s,{merge:!0})},deleteStudent:async s=>{await Ah(Sn(He,"students",s))},getAttendance:async()=>(await fn(Bt(He,"attendance"))).docs.map(e=>e.data()),saveAttendanceBatch:async s=>{const e=pg(He);s.forEach(n=>{const i=Sn(Bt(He,"attendance"));e.set(i,n)}),await e.commit()},getStudentLogs:async s=>{const e=ia(Bt(He,"student_logs"),Ws("studentCode","==",s));return(await fn(e)).docs.map(i=>i.data())},saveStudentLog:async(s,e)=>{await fg(Bt(He,"student_logs"),{...e,studentCode:s})},exportData:async()=>{const s=await fn(Bt(He,"teachers")),e=await fn(Bt(He,"students")),n=await fn(Bt(He,"attendance")),i=await fn(Bt(He,"student_logs")),a=await fn(Bt(He,"messages")),c={};s.forEach(T=>c[T.id]=T.data());const d=e.docs.map(T=>T.data()),m=n.docs.map(T=>T.data()),y=a.docs.map(T=>T.data()),v={};return i.forEach(T=>{const R=T.data();v[R.studentCode]||(v[R.studentCode]=[]),v[R.studentCode].push(R)}),{teachers:c,students:d,attendance:m,studentLogs:v,messages:y}},sendMessage:async s=>(await fg(Bt(He,"messages"),{...s,timestamp:new Date().toISOString()})).id,getMessages:async s=>{const e=ia(Bt(He,"messages"),Ws("to","==",s));return(await fn(e)).docs.map(i=>({...i.data(),id:i.id}))},getSentMessages:async s=>{const e=ia(Bt(He,"messages"),Ws("from","==",s));return(await fn(e)).docs.map(i=>({...i.data(),id:i.id}))},getConversation:async(s,e)=>{const n=ia(Bt(He,"messages"),Ws("from","==",s),Ws("to","==",e)),i=await fn(n),a=ia(Bt(He,"messages"),Ws("from","==",e),Ws("to","==",s)),c=await fn(a);return[...i.docs.map(m=>({...m.data(),id:m.id})),...c.docs.map(m=>({...m.data(),id:m.id}))].sort((m,y)=>new Date(m.timestamp).getTime()-new Date(y.timestamp).getTime())},markAsRead:async s=>{await oa(Sn(He,"messages",s),{read:!0},{merge:!0})},deleteMessage:async s=>{await Ah(Sn(He,"messages",s))}},LT=({view:s,onNavigate:e,onLoginSuccess:n})=>{const[i,a]=Ee.useState({code:"",password:"",name:"",confirmPassword:""}),[c,d]=Ee.useState(""),[m,y]=Ee.useState(""),[v,T]=Ee.useState(!1),R=ne=>{a({...i,[ne.target.name]:ne.target.value}),d("")},D=async()=>{T(!0);const ne=await Ue.getAdminPassword();T(!1),i.password===ne?n("admin",{}):d("   ")},z=async()=>{T(!0);const ne=await Ue.getTeachers();T(!1);const ae=ne[i.code];ae&&ae.password===i.password?n("teacher",ae):d("    ")},X=async()=>{T(!0);const ne=await Ue.getStudents();T(!1);const ae=ne.find(me=>me.code===i.code&&me.password===i.password);ae?n("student",ae):d("   ")},H=async()=>{if(!i.name||!i.code||!i.password)return d(" ");if(i.password!==i.confirmPassword)return d("   ");if(T(!0),(await Ue.getStudents()).some(ae=>ae.code===i.code))return T(!1),d("   ");await Ue.registerStudent({id:Date.now().toString(),name:i.name,code:i.code,password:i.password,class:"",registrationDate:new Date().toISOString()}),T(!1),y("  !  ..."),setTimeout(()=>e("LOGIN_STUDENT"),1500)},B={LOGIN_ADMIN:" ",LOGIN_TEACHER:" ",LOGIN_STUDENT:" ",REGISTER_STUDENT:"  "};return w.jsx("div",{className:"flex items-center justify-center min-h-[70vh]",children:w.jsxs(ht,{className:"w-full max-w-md animate-[fadeIn_0.3s_ease-out]",children:[w.jsx("h2",{className:"text-2xl font-bold text-center text-secondary mb-6",children:B[s]}),s==="REGISTER_STUDENT"&&w.jsx(rt,{label:" ",name:"name",value:i.name,onChange:R,placeholder:" "}),s!=="LOGIN_ADMIN"&&w.jsx(rt,{label:s==="REGISTER_STUDENT"?"  ":" ",name:"code",value:i.code,onChange:R}),w.jsx(rt,{label:" ",type:"password",name:"password",value:i.password,onChange:R}),s==="REGISTER_STUDENT"&&w.jsx(rt,{label:"  ",type:"password",name:"confirmPassword",value:i.confirmPassword,onChange:R}),c&&w.jsx("div",{className:"text-red-500 text-center mb-4 text-sm font-bold",children:c}),m&&w.jsx("div",{className:"text-green-500 text-center mb-4 text-sm font-bold",children:m}),w.jsxs("div",{className:"mt-6 space-y-3",children:[s==="LOGIN_ADMIN"&&w.jsx(Pe,{fullWidth:!0,onClick:D,disabled:v,children:v?" ...":""}),s==="LOGIN_TEACHER"&&w.jsx(Pe,{fullWidth:!0,onClick:z,disabled:v,children:v?" ...":""}),s==="LOGIN_STUDENT"&&w.jsx(Pe,{fullWidth:!0,onClick:X,disabled:v,children:v?" ...":""}),s==="REGISTER_STUDENT"&&w.jsx(Pe,{fullWidth:!0,onClick:H,disabled:v,children:v?" ...":""}),w.jsx(Pe,{fullWidth:!0,variant:"secondary",onClick:()=>e("HOME"),children:"  "}),s==="LOGIN_STUDENT"&&w.jsx("div",{className:"text-center mt-2",children:w.jsx("button",{className:"text-primary text-sm underline",onClick:()=>e("REGISTER_STUDENT"),children:"    "})})]})]})})},Ld=({userId:s,userName:e,userRole:n,recipients:i=[]})=>{var Le;const[a,c]=Ee.useState([]),[d,m]=Ee.useState(null),[y,v]=Ee.useState(""),[T,R]=Ee.useState(null),[D,z]=Ee.useState(!1),[X,H]=Ee.useState([]);Ee.useEffect(()=>{const K=async()=>{try{const I=await Ue.getMessages(s);c(I)}catch(I){console.error("Error loading messages:",I)}};K();const k=setInterval(K,3e3);return()=>clearInterval(k)},[s]),Ee.useEffect(()=>{if(d){const K=async()=>{try{const I=await Ue.getConversation(s,d);H(I)}catch(I){console.error("Error loading conversation:",I)}};K();const k=setInterval(K,2e3);return()=>clearInterval(k)}},[d,s]);const B=async()=>{var P;if(!y.trim())return alert(" ");if(!T&&!d)return alert(" ");if(!(T||a.find(N=>N.from===d))&&!d)return alert("");const k=d||(T==null?void 0:T.id),I=((P=a.find(N=>N.from===d))==null?void 0:P.fromName)||(T==null?void 0:T.name)||"";let x="admin";if(n==="admin"&&(x=(T==null?void 0:T.role)||"student"),!!k){z(!0);try{const N={from:s,fromName:e,fromRole:n,to:k,toName:I,toRole:x,content:y,timestamp:new Date().toISOString(),read:!1};if(await Ue.sendMessage(N),v(""),d){const j=await Ue.getConversation(s,d);H(j)}}catch(N){console.error("Error sending message:",N),alert("   ")}finally{z(!1)}}},ne=async K=>{if(confirm(" ")){z(!0);try{await Ue.deleteMessage(K),c(a.filter(k=>k.id!==K)),H(X.filter(k=>k.id!==K))}catch(k){console.error("Error deleting message:",k),alert("   ")}finally{z(!1)}}},ae=Array.from(new Map(a.map(K=>[K.from,{id:K.from,name:K.fromName,role:K.fromRole}])).values()),me=a.filter(K=>!K.read).length,Ce=(Le=ae.find(K=>K.id===d))==null?void 0:Le.name;return w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(ga,{className:"w-5 h-5 text-secondary"}),w.jsxs("h2",{className:"text-lg font-bold text-gray-700",children:[" ",me>0&&w.jsxs("span",{className:"bg-red-500 text-white px-2 py-0.5 rounded-full text-xs",children:["(",me,")"]})]})]}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[w.jsx("div",{className:"md:col-span-1",children:w.jsxs(ht,{className:"p-4 max-h-96 overflow-y-auto",children:[w.jsx("h3",{className:"font-bold mb-3 text-gray-700",children:""}),ae.length===0?w.jsx("p",{className:"text-gray-500 text-sm",children:"  "}):w.jsx("div",{className:"space-y-2",children:ae.map(K=>w.jsxs("button",{onClick:()=>m(K.id),className:`w-full text-right p-2 rounded transition-all ${d===K.id?"bg-secondary text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:[w.jsx("div",{className:"font-semibold text-sm",children:K.name}),w.jsx("div",{className:"text-xs opacity-75",children:K.role})]},K.id))})]})}),w.jsx("div",{className:"md:col-span-2",children:d?w.jsxs(w.Fragment,{children:[w.jsxs(ht,{className:"p-4 mb-4 max-h-96 overflow-y-auto",children:[w.jsxs("div",{className:"flex items-center justify-between mb-4",children:[w.jsx("h3",{className:"font-bold text-gray-700",children:Ce}),w.jsx("button",{onClick:()=>{m(null),H([])},className:"text-gray-500 hover:text-red-500",children:w.jsx(Mv,{className:"w-5 h-5"})})]}),X.length===0?w.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"  "}):w.jsx("div",{className:"space-y-3",children:X.map(K=>w.jsxs("div",{className:`p-3 rounded-lg ${K.from===s?"bg-blue-100 text-right ml-8":"bg-gray-100 text-right mr-8"}`,children:[w.jsxs("div",{className:"flex items-center justify-between mb-1",children:[w.jsx("span",{className:"text-xs text-gray-600",children:new Date(K.timestamp).toLocaleTimeString("ar-EG")}),K.from===s&&w.jsx("button",{onClick:()=>ne(K.id),className:"text-gray-500 hover:text-red-500",title:"",children:w.jsx(iu,{className:"w-4 h-4"})})]}),w.jsx("p",{className:"text-sm text-gray-800",children:K.content})]},K.id))})]}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx(rt,{type:"text",placeholder:" ...",value:y,onChange:K=>v(K.target.value),onKeyPress:K=>K.key==="Enter"&&B(),disabled:D,className:"flex-1"}),w.jsxs(Pe,{onClick:B,disabled:D,className:"flex items-center gap-2",children:[w.jsx(nm,{className:"w-4 h-4"}),D?"...":""]})]})]}):w.jsxs(ht,{className:"p-8 text-center",children:[w.jsx(ga,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),w.jsx("p",{className:"text-gray-500",children:"  "})]})})]}),w.jsxs(ht,{className:"p-4 border-t-2 border-secondary",children:[w.jsx("h3",{className:"font-bold mb-3 text-gray-700",children:"  "}),w.jsx("div",{className:"space-y-3",children:i.length>0?w.jsxs(w.Fragment,{children:[w.jsxs("select",{value:(T==null?void 0:T.id)||"",onChange:K=>{const k=i.find(I=>I.id===K.target.value);R(k||null)},className:"w-full p-2 border border-gray-300 rounded text-right",children:[w.jsx("option",{value:"",children:" "}),i.map(K=>w.jsxs("option",{value:K.id,children:[K.name," (",K.role,")"]},K.id))]}),T&&w.jsxs("div",{className:"flex gap-2",children:[w.jsx(rt,{type:"text",placeholder:"  ...",value:y,onChange:K=>v(K.target.value),onKeyPress:K=>K.key==="Enter"&&B(),disabled:D,className:"flex-1"}),w.jsxs(Pe,{onClick:B,disabled:D,className:"flex items-center gap-2",children:[w.jsx(nm,{className:"w-4 h-4"}),D?"...":""]})]})]}):w.jsx("p",{className:"text-gray-500 text-sm",children:"    "})})]})]})},OT=({onLogout:s})=>{const[e,n]=Ee.useState("dashboard"),[i,a]=Ee.useState([]),[c,d]=Ee.useState({}),[m,y]=Ee.useState([]),[v,T]=Ee.useState(new Date().toISOString().split("T")[0]),[R,D]=Ee.useState(""),[z,X]=Ee.useState({name:"",code:"",password:"",email:"",students:[]}),[H,B]=Ee.useState({name:"",teacherCode:"",id:""}),[ne,ae]=Ee.useState({old:"",new:"",confirm:""}),[me,Ce]=Ee.useState(null),[Le,K]=Ee.useState(!1),[k,I]=Ee.useState(""),x=async()=>{K(!0);const[S,$,de]=await Promise.all([Ue.getAttendance(),Ue.getTeachers(),Ue.getStudents()]);a(S),d($);const le=new Map;de.forEach(_e=>le.set(_e.id,_e)),Object.values($).forEach(_e=>{_e.students.forEach(ve=>{if(!le.has(ve.id))le.set(ve.id,{id:ve.id,name:ve.name,code:"---",class:`: ${_e.name}`,password:""});else{const xe=le.get(ve.id);(!xe.class||xe.class==="")&&(xe.class=`: ${_e.name}`,le.set(ve.id,xe))}})}),y(Array.from(le.values())),K(!1)};Ee.useEffect(()=>{x()},[]);const P=i.filter(S=>(v?S.date===v:!0)&&(R?S.teacherCode===R:!0));P.sort((S,$)=>new Date($.date).getTime()-new Date(S.date).getTime());const N={total:P.length,present:P.filter(S=>S.status==="present").length,absent:P.filter(S=>S.status==="absent").length},j=m.filter(S=>S.name.includes(k)||S.code&&S.code.includes(k)||S.id&&S.id.includes(k)),C=async()=>{if(!z.name||!z.code)return alert(" ");K(!0),await Ue.saveTeacher({...z,students:[]}),X({name:"",code:"",password:"",email:"",students:[]}),await x(),alert("  ")},ze=async()=>{if(!H.name||!H.teacherCode)return alert("    ");K(!0);const S=c[H.teacherCode];if(!S)return K(!1),alert("  ");const $=H.id||Date.now().toString().slice(-8);if(S.students.some(le=>le.id===$))return K(!1),alert("      ");const de={...S,students:[...S.students,{id:$,name:H.name}]};await Ue.saveTeacher(de),await x(),B({name:"",teacherCode:"",id:""}),K(!1),alert(`   "${H.name}"   "${S.name}" `)},ft=async S=>{confirm("  ")&&(K(!0),await Ue.deleteTeacher(S),await x())},xt=async S=>{if(confirm("           .")){K(!0),await Ue.deleteStudent(S);const $=Object.values(c);for(const de of $)if(de.students.some(le=>le.id===S)){const le=de.students.filter(_e=>_e.id!==S);await Ue.saveTeacher({...de,students:le})}await x(),K(!1)}},Ge=()=>{let S=`\uFEFF,, ,,
`;P.forEach(le=>{var xe;const _e=((xe=c[le.teacherCode])==null?void 0:xe.name)||le.teacherCode,ve=le.status==="present"?"":"";S+=`${le.date},"${_e}","${le.studentName}","${ve}","${(le.notes||"").replace(/"/g,'""')}"
`});const $=new Blob([S],{type:"text/csv;charset=utf-8;"}),de=document.createElement("a");de.href=URL.createObjectURL($),de.download=`attendance_${v}.csv`,de.click()},ee=async()=>{K(!0);const S=await Ue.exportData();K(!1);const de=(await Ue.getStudents()).reduce((xe,Re)=>(Re.code&&(xe[Re.code]=Re.name),xe),{});let le=`\uFEFF, ,, ,,,,
`;Object.entries(S.studentLogs).forEach(([xe,Re])=>{const $e=de[xe]||" ";Re.forEach(it=>{le+=`"${it.dateDisplay}","${$e}","${xe}","${(it.newMemorizing||"").replace(/"/g,'""')}","${(it.review||"").replace(/"/g,'""')}","${it.listening}","${(it.newTarget||"").replace(/"/g,'""')}","${(it.notes||"").replace(/"/g,'""')}"
`})});const _e=new Blob([le],{type:"text/csv;charset=utf-8;"}),ve=document.createElement("a");ve.href=URL.createObjectURL(_e),ve.download=`student_logs_${new Date().toISOString().split("T")[0]}.csv`,ve.click()},fe=async()=>{const S=await Ue.getAdminPassword();if(ne.old!==S)return alert("   ");if(ne.new.length<4||ne.new!==ne.confirm)return alert("    ");await Ue.setAdminPassword(ne.new),ae({old:"",new:"",confirm:""}),alert("  "),s()},se=async S=>{if(!S.code||S.code==="---")return alert("         .");K(!0);const $=await Ue.getStudentLogs(S.code);K(!1),Ce({student:S,logs:$})};return w.jsxs("div",{className:"pb-20",children:[w.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm mb-6 flex flex-col justify-between items-center gap-4 text-center",children:[w.jsxs("div",{children:[w.jsx("h2",{className:"text-2xl font-bold text-secondary",children:" "}),w.jsx("p",{className:"text-primary mt-1",children:new Date().toLocaleDateString("ar-EG")})]}),Le&&w.jsx("div",{className:"text-accent font-bold",children:" ..."}),w.jsx(Pe,{variant:"danger",onClick:s,children:""})]}),w.jsx("div",{className:"flex flex-wrap gap-2 mb-6 justify-center",children:["dashboard","teachers","students","reports","messages","settings"].map(S=>w.jsx(Pe,{variant:e===S?"primary":"secondary",onClick:()=>n(S),className:"text-sm px-3 capitalize flex items-center gap-1",children:S==="dashboard"?" ":S==="teachers"?" ":S==="students"?" ":S==="reports"?" ":S==="messages"?w.jsxs(w.Fragment,{children:[w.jsx(ga,{className:"w-4 h-4"})," "]}):" "},S))}),e==="dashboard"&&w.jsxs(w.Fragment,{children:[w.jsx(ht,{className:"mb-6",children:w.jsxs("div",{className:"flex flex-col gap-4",children:[w.jsx(rt,{label:"",type:"date",value:v,onChange:S=>T(S.target.value)}),w.jsxs(Rh,{label:"",value:R,onChange:S=>D(S.target.value),children:[w.jsx("option",{value:"",children:""}),Object.values(c).map(S=>w.jsx("option",{value:S.code,children:S.name},S.code))]}),w.jsx(Pe,{onClick:x,fullWidth:!0,children:""})]})}),w.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-6",children:[w.jsx(gh,{label:"",value:N.total,icon:Av,colorClass:"text-blue-600"}),w.jsx(gh,{label:"",value:N.present,icon:Nv,colorClass:"text-green-600"}),w.jsx(gh,{label:"",value:N.absent,icon:kv,colorClass:"text-red-600"})]}),w.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-4 mb-20",children:[w.jsxs("h3",{className:"font-bold text-secondary mb-4 border-b pb-2",children:["  (",P.length,")"]}),P.length===0?w.jsx("div",{className:"text-center text-gray-400 py-6",children:"  "}):w.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto custom-scrollbar",children:P.map((S,$)=>{var de;return w.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg border flex flex-col gap-1",children:[w.jsxs("div",{className:"flex justify-between items-center",children:[w.jsx("span",{className:"font-bold text-gray-800",children:S.studentName}),w.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${S.status==="present"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:S.status==="present"?"":""})]}),w.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[w.jsxs("span",{children:[" ",((de=c[S.teacherCode])==null?void 0:de.name)||S.teacherCode]}),w.jsxs("span",{children:[" ",S.date]})]}),S.notes&&w.jsx("div",{className:"text-xs bg-yellow-50 text-yellow-800 p-1 mt-1 rounded",children:S.notes})]},$)})})]}),w.jsx("div",{className:"fixed bottom-14 left-0 right-0 p-4 flex justify-center z-30 pointer-events-none",children:w.jsxs(Pe,{onClick:Ge,variant:"accent",className:"pointer-events-auto shadow-lg",children:[w.jsx(tm,{className:"w-4 h-4 inline ml-2"}),"   (CSV)"]})})]}),e==="teachers"&&w.jsxs("div",{className:"space-y-6",children:[w.jsxs(ht,{title:" ",children:[w.jsx(rt,{label:"",value:z.name,onChange:S=>X({...z,name:S.target.value})}),w.jsx(rt,{label:"",value:z.code,onChange:S=>X({...z,code:S.target.value})}),w.jsx(rt,{label:" ",type:"password",value:z.password,onChange:S=>X({...z,password:S.target.value})}),w.jsx(rt,{label:"  ()",value:z.email||"",onChange:S=>X({...z,email:S.target.value})}),w.jsx(Pe,{fullWidth:!0,onClick:C,children:""})]}),w.jsx(ht,{title:"",children:w.jsx("div",{className:"space-y-4 max-h-[500px] overflow-y-auto custom-scrollbar",children:Object.values(c).map(S=>{var $;return w.jsxs("div",{className:"p-4 border rounded-lg flex justify-between items-center bg-gray-50",children:[w.jsxs("div",{className:"flex-1",children:[w.jsx("div",{className:"font-bold text-secondary text-lg",children:S.name}),w.jsxs("div",{className:"flex flex-wrap gap-2 text-sm text-gray-600 mt-2",children:[w.jsxs("div",{className:"bg-blue-50 text-blue-800 px-2 py-1 rounded border border-blue-100",children:[": ",S.code]}),w.jsxs("div",{className:"bg-green-50 text-green-800 px-2 py-1 rounded border border-green-100",children:[" : ",S.password]}),S.email&&w.jsxs("div",{className:"bg-gray-50 text-gray-700 px-2 py-1 rounded border",children:[" ",S.email]}),w.jsxs("div",{className:"bg-purple-50 text-purple-800 px-2 py-1 rounded border border-purple-100",children:[" : ",(($=S.students)==null?void 0:$.length)||0]})]})]}),w.jsx(Pe,{className:"p-2 h-10 w-10 flex items-center justify-center shrink-0 mr-2",variant:"danger",onClick:()=>ft(S.code),children:w.jsx(iu,{className:"w-4 h-4"})})]},S.code)})})})]}),e==="students"&&w.jsxs("div",{className:"space-y-6",children:[w.jsxs(ht,{title:"   ",children:[w.jsx(rt,{label:" ",value:H.name,onChange:S=>B({...H,name:S.target.value}),placeholder:" "}),w.jsxs(Rh,{label:" ",value:H.teacherCode,onChange:S=>B({...H,teacherCode:S.target.value}),children:[w.jsx("option",{value:"",children:"--   --"}),Object.values(c).map(S=>w.jsx("option",{value:S.code,children:S.name},S.code))]}),w.jsx(rt,{label:"  /  ()",value:H.id,onChange:S=>B({...H,id:S.target.value}),placeholder:"   "}),w.jsxs(Pe,{fullWidth:!0,onClick:ze,variant:"accent",disabled:Le,children:[w.jsx(Pv,{className:"w-4 h-4 inline ml-2"})," "]})]}),w.jsxs(ht,{children:[w.jsxs("div",{className:"flex justify-between items-center mb-6",children:[w.jsxs("h2",{className:"text-xl font-bold text-secondary flex items-center gap-2",children:[w.jsx(Dv,{className:"w-5 h-5"}),"  "]}),w.jsxs("span",{className:"bg-primary/10 text-primary px-3 py-1 rounded-full text-sm font-bold",children:[m.length," "]})]}),w.jsxs("div",{className:"relative mb-6",children:[w.jsx("input",{type:"text",placeholder:"   ...",className:"w-full p-3 pr-10 border rounded-xl focus:outline-none focus:ring-2 focus:ring-primary/20 text-right",value:k,onChange:S=>I(S.target.value)}),w.jsx(Rv,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]}),j.length===0?w.jsx("div",{className:"text-center py-8 text-gray-400",children:"   "}):w.jsx("div",{className:"space-y-3 max-h-[600px] overflow-y-auto custom-scrollbar",children:j.map(S=>{var $;return w.jsxs("div",{className:"p-4 border border-gray-100 rounded-xl bg-gray-50 hover:border-primary/30 transition-all",children:[w.jsxs("div",{className:"flex justify-between items-start mb-3",children:[w.jsxs("div",{className:"flex items-center gap-3 w-full",children:[w.jsx("div",{className:"w-10 h-10 rounded-full bg-secondary/10 text-secondary flex items-center justify-center font-bold text-lg shrink-0",children:S.name.charAt(0)}),w.jsxs("div",{className:"flex-1",children:[w.jsx("div",{className:"font-bold text-gray-800",children:S.name}),w.jsxs("div",{className:"flex gap-2 text-xs text-gray-500 mt-1 flex-wrap items-center",children:[w.jsx("span",{className:`px-2 py-0.5 rounded border ${($=S.class)!=null&&$.includes("")?"bg-orange-50 text-orange-700 border-orange-200":"bg-gray-100"}`,children:S.class||" "}),w.jsxs("span",{className:"bg-white px-2 py-0.5 rounded border",children:["ID: ",S.id]}),S.registrationDate&&w.jsxs("span",{className:"bg-yellow-50 text-yellow-800 px-2 py-0.5 rounded border border-yellow-200",children:[": ",new Date(S.registrationDate).toLocaleDateString("ar-EG")]}),S.code!=="---"&&w.jsxs(w.Fragment,{children:[w.jsxs("span",{className:"bg-green-50 text-green-700 px-2 py-0.5 rounded border border-green-200",children:[": ",S.code]}),w.jsxs("span",{className:"bg-blue-50 text-blue-700 px-2 py-0.5 rounded border border-blue-200",children:[": ",S.password]})]})]})]})]}),w.jsx(Pe,{className:"p-2 h-8 w-8 flex items-center justify-center bg-red-50 text-red-500 hover:bg-red-500 hover:text-white shrink-0",onClick:()=>xt(S.id),title:"    ",children:w.jsx(iu,{className:"w-4 h-4"})})]}),w.jsxs(Pe,{fullWidth:!0,className:"text-sm py-2",variant:"primary",onClick:()=>se(S),disabled:S.code==="---",children:[w.jsx(Iv,{className:"w-4 h-4 inline ml-1"}),"  "]})]},S.id)})})]})]}),e==="reports"&&w.jsx(ht,{title:"",children:w.jsxs("div",{className:"space-y-4",children:[w.jsxs(Pe,{onClick:ee,variant:"primary",fullWidth:!0,children:[w.jsx(tm,{className:"ml-2 w-4 h-4"}),"   (Excel)"]}),w.jsx("div",{className:"text-sm text-gray-500 text-center mt-2",children:"    (Firebase)."})]})}),e==="messages"&&w.jsx(Ld,{userId:"admin",userName:"",userRole:"admin",recipients:m.map(S=>({id:S.id,name:S.name,role:"student"}))}),e==="settings"&&w.jsxs(ht,{title:"",children:[w.jsx(rt,{label:"  ",type:"password",value:ne.old,onChange:S=>ae({...ne,old:S.target.value})}),w.jsx(rt,{label:"",type:"password",value:ne.new,onChange:S=>ae({...ne,new:S.target.value})}),w.jsx(rt,{label:"",type:"password",value:ne.confirm,onChange:S=>ae({...ne,confirm:S.target.value})}),w.jsx(Pe,{onClick:fe,variant:"primary",fullWidth:!0,className:"mt-2",children:""})]}),me&&w.jsx("div",{className:"fixed inset-0 bg-black/50 z-[100] flex items-center justify-center p-4",children:w.jsxs(ht,{className:"w-full max-w-md max-h-[80vh] flex flex-col bg-white",title:`: ${me.student.name}`,children:[w.jsx("div",{className:"overflow-y-auto flex-1 custom-scrollbar p-1 space-y-3",children:me.logs.length===0?w.jsx("div",{className:"text-center py-10",children:"  "}):me.logs.slice().sort((S,$)=>new Date($.date).getTime()-new Date(S.date).getTime()).map((S,$)=>w.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border",children:[w.jsxs("div",{className:"font-bold text-primary mb-2 border-b pb-1",children:[" ",S.dateDisplay]}),w.jsxs("div",{className:"text-sm space-y-1",children:[w.jsxs("div",{children:[w.jsx("span",{className:"text-gray-500",children:":"})," ",S.newMemorizing]}),w.jsxs("div",{children:[w.jsx("span",{className:"text-gray-500",children:":"})," ",S.review]}),w.jsxs("div",{children:[w.jsx("span",{className:"text-gray-500",children:":"})," ",S.newTarget]}),S.notes&&w.jsx("div",{className:"text-xs text-yellow-700 bg-yellow-50 p-1 rounded mt-1",children:S.notes})]})]},$))}),w.jsx(Pe,{fullWidth:!0,variant:"secondary",onClick:()=>Ce(null),className:"mt-4",children:""})]})})]})},bT=({teacher:s,onLogout:e})=>{var k,I;const[n,i]=Ee.useState(s),[a,c]=Ee.useState({}),[d,m]=Ee.useState(!1),[y,v]=Ee.useState(!1),[T,R]=Ee.useState({name:"",id:""}),[D,z]=Ee.useState(""),[X,H]=Ee.useState(!1),[B,ne]=Ee.useState("attendance");Ee.useEffect(()=>{(async()=>{var j;const N=(await Ue.getTeachers())[s.code];if(N){i(N);const C={};(j=N.students)==null||j.forEach(ze=>C[ze.name]={status:null,notes:""}),c(C)}})()},[s.code]);const ae=(x,P)=>{c(N=>{var j;return{...N,[x]:{...N[x],status:((j=N[x])==null?void 0:j.status)===P?null:P}}})},me=(x,P)=>{c(N=>({...N,[x]:{...N[x],notes:P}}))},Ce=async()=>{const x=Object.entries(a).filter(([P,N])=>N.status).map(([P,N])=>({id:`${Date.now()}-${Math.random()}`,teacherCode:n.code,studentName:P,status:N.status,notes:N.notes,date:new Date().toISOString().split("T")[0]}));if(!x.length)return alert(" ");H(!0),await Ue.saveAttendanceBatch(x),H(!1),alert(" "),e()},Le=async()=>{if(!T.name||!T.id)return alert(" ");const x={...n};if(x.students||(x.students=[]),x.students.some(P=>P.id===T.id))return alert("");x.students.push(T),H(!0),await Ue.saveTeacher(x),i(x),H(!1),R({name:"",id:""}),alert("")},K=async()=>{if(D.length<4)return alert("");const x={...n,password:D};H(!0),await Ue.saveTeacher(x),i(x),H(!1),z(""),alert(""),v(!1)};return w.jsxs("div",{className:"pb-24",children:[w.jsxs(ht,{className:"mb-6 sticky top-4 z-40 border-green-100 flex justify-between items-center",children:[w.jsxs("div",{children:[w.jsx("h2",{className:"text-2xl font-bold text-secondary",children:" "}),w.jsx("div",{className:"text-sm",children:n.name})]}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx(Pe,{variant:"secondary",onClick:()=>v(!0),className:"p-2",children:w.jsx(gg,{className:"w-4 h-4"})}),w.jsx(Pe,{variant:"accent",onClick:()=>m(!0),className:"px-3 text-sm",children:" "})]})]}),w.jsxs("div",{className:"flex gap-2 mb-4 border-b",children:[w.jsx("button",{onClick:()=>ne("attendance"),className:`px-4 py-2 font-bold border-b-2 transition ${B==="attendance"?"border-secondary text-secondary":"border-transparent text-gray-600"}`,children:""}),w.jsxs("button",{onClick:()=>ne("messages"),className:`px-4 py-2 font-bold border-b-2 transition flex items-center gap-2 ${B==="messages"?"border-secondary text-secondary":"border-transparent text-gray-600"}`,children:[w.jsx(ga,{className:"w-4 h-4"}),""]})]}),B==="attendance"?w.jsxs(w.Fragment,{children:[X&&w.jsx("div",{className:"text-center py-2 text-primary",children:" ..."}),w.jsx("div",{className:"space-y-4",children:(k=n.students)==null?void 0:k.map(x=>{const P=a[x.name]||{status:null,notes:""};return w.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border flex flex-col md:flex-row gap-4 items-center",children:[w.jsxs("div",{className:"flex-1 w-full text-right",children:[w.jsx("div",{className:"font-bold text-lg",children:x.name}),w.jsx("input",{type:"text",placeholder:"...",className:"w-full mt-2 p-2 border rounded bg-gray-50 text-right",value:P.notes,onChange:N=>me(x.name,N.target.value)})]}),w.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[w.jsx("button",{onClick:()=>ae(x.name,"absent"),className:`flex-1 px-4 py-3 rounded font-bold border transition-colors ${P.status==="absent"?"bg-red-500 text-white":"bg-red-50 text-red-500"}`,children:""}),w.jsx("button",{onClick:()=>ae(x.name,"present"),className:`flex-1 px-4 py-3 rounded font-bold border transition-colors ${P.status==="present"?"bg-green-500 text-white":"bg-green-50 text-green-500"}`,children:""})]})]},x.id)})}),w.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white p-4 shadow-[0_-4px_20px_rgba(0,0,0,0.1)] flex gap-4 z-50",children:[w.jsx(Pe,{variant:"danger",onClick:e,className:"flex-1",children:""}),w.jsx(Pe,{onClick:Ce,className:"flex-[2]",disabled:X,children:X?"...":""})]})]}):w.jsx(Ld,{userId:s.code,userName:n.name,userRole:"teacher",recipients:[{id:"admin",name:"",role:"admin"}]}),d&&w.jsx("div",{className:"fixed inset-0 bg-black/50 z-[100] flex items-center justify-center p-4",children:w.jsxs(ht,{className:"w-full max-w-lg",title:" ",children:[w.jsxs("div",{className:"bg-gray-50 p-4 rounded mb-4",children:[w.jsx(rt,{label:"",value:T.name,onChange:x=>R({...T,name:x.target.value})}),w.jsx(rt,{label:"",value:T.id,onChange:x=>R({...T,id:x.target.value})}),w.jsx(Pe,{fullWidth:!0,onClick:Le,variant:"accent",disabled:X,children:""})]}),w.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2",children:(I=n.students)==null?void 0:I.map(x=>w.jsxs("div",{className:"flex justify-between p-2 border bg-white",children:[w.jsx("span",{children:x.name}),w.jsx("button",{onClick:async()=>{if(confirm("")){const P={...n};P.students=P.students.filter(N=>N.id!==x.id),H(!0),await Ue.saveTeacher(P),i(P),H(!1)}},className:"text-red-500",children:w.jsx(iu,{className:"w-4 h-4"})})]},x.id))}),w.jsx(Pe,{fullWidth:!0,variant:"secondary",onClick:()=>m(!1),className:"mt-4",children:""})]})}),y&&w.jsx("div",{className:"fixed inset-0 bg-black/50 z-[100] flex items-center justify-center p-4",children:w.jsxs(ht,{title:"  ",children:[w.jsx(rt,{label:"",type:"password",value:D,onChange:x=>z(x.target.value)}),w.jsxs("div",{className:"flex gap-2 mt-4",children:[w.jsx(Pe,{fullWidth:!0,variant:"secondary",onClick:()=>v(!1),children:""}),w.jsx(Pe,{fullWidth:!0,onClick:K,disabled:X,children:""})]})]})})]})},FT=({student:s,onLogout:e})=>{const[n,i]=Ee.useState([]),[a,c]=Ee.useState({newMemorizing:"",review:"",listening:"",newTarget:"",notes:""}),[d,m]=Ee.useState(!1),[y,v]=Ee.useState(""),[T,R]=Ee.useState(!1),[D,z]=Ee.useState("logs");Ee.useEffect(()=>{(async()=>{if(s.code){const ne=await Ue.getStudentLogs(s.code);i(ne)}})()},[s.code]);const X=async()=>{if(!a.newMemorizing||!a.review||!a.listening||!a.newTarget)return alert(" ");if(!s.code)return alert("  ");const B={...a,studentCode:s.code,date:new Date().toISOString(),dateDisplay:new Date().toLocaleDateString("ar-EG")};R(!0),await Ue.saveStudentLog(s.code,B),R(!1),i([B,...n]),c({newMemorizing:"",review:"",listening:"",newTarget:"",notes:""}),alert(" ")},H=async()=>{if(y.length<4)return alert("");R(!0),await Ue.updateStudent({...s,password:y}),R(!1),v(""),alert(" "),e()};return w.jsxs("div",{className:"pb-20",children:[w.jsxs(ht,{className:"mb-6 bg-gradient-to-r from-green-50 to-white flex justify-between items-center",children:[w.jsxs("div",{children:[w.jsxs("h2",{className:"text-2xl font-bold text-secondary",children:[" ",s.name]}),w.jsxs("div",{className:"text-sm text-gray-600",children:[": ",s.code]})]}),w.jsx(Pe,{variant:"secondary",onClick:()=>m(!0),className:"p-2 h-10 w-10 flex items-center justify-center",children:w.jsx(gg,{className:"w-5 h-5"})})]}),w.jsxs("div",{className:"flex gap-2 mb-4 border-b",children:[w.jsx("button",{onClick:()=>z("logs"),className:`px-4 py-2 font-bold border-b-2 transition ${D==="logs"?"border-secondary text-secondary":"border-transparent text-gray-600"}`,children:""}),w.jsxs("button",{onClick:()=>z("messages"),className:`px-4 py-2 font-bold border-b-2 transition flex items-center gap-2 ${D==="messages"?"border-secondary text-secondary":"border-transparent text-gray-600"}`,children:[w.jsx(ga,{className:"w-4 h-4"}),""]})]}),D==="logs"?w.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[w.jsxs(ht,{title:" ",children:[w.jsx(rt,{label:"  ",value:a.newMemorizing,onChange:B=>c({...a,newMemorizing:B.target.value})}),w.jsx(rt,{label:" ",value:a.review,onChange:B=>c({...a,review:B.target.value})}),w.jsxs(Rh,{label:" ",value:a.listening,onChange:B=>c({...a,listening:B.target.value}),children:[w.jsx("option",{value:"",children:"--  --"}),w.jsx("option",{value:"",children:""}),w.jsx("option",{value:"",children:""}),w.jsx("option",{value:"",children:""})]}),w.jsx(rt,{label:"  ",value:a.newTarget,onChange:B=>c({...a,newTarget:B.target.value})}),w.jsxs("div",{className:"mb-4",children:[w.jsx("label",{className:"block mb-2 text-right text-gray-700 font-medium",children:""}),w.jsx("textarea",{className:"w-full border-2 border-gray-200 p-3 rounded-lg focus:outline-none focus:border-primary text-right h-24",value:a.notes,onChange:B=>c({...a,notes:B.target.value})})]}),w.jsx(Pe,{fullWidth:!0,onClick:X,disabled:T,children:T?"...":""})]}),w.jsx(ht,{title:" ",className:"max-h-[800px] flex flex-col",children:w.jsxs("div",{className:"overflow-y-auto flex-1 custom-scrollbar space-y-4 pr-2",children:[n.length===0&&w.jsx("div",{className:"text-center py-10 text-gray-400",children:"  "}),n.slice().reverse().map((B,ne)=>w.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border hover:border-green-200 transition-colors",children:[w.jsxs("div",{className:"font-bold text-primary mb-2 border-b pb-1",children:[" ",B.dateDisplay]}),w.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[w.jsxs("div",{children:[w.jsx("span",{className:"font-bold text-gray-700",children:":"})," ",B.newMemorizing]}),w.jsxs("div",{children:[w.jsx("span",{className:"font-bold text-gray-700",children:":"})," ",B.review]}),w.jsxs("div",{children:[w.jsx("span",{className:"font-bold text-gray-700",children:":"})," ",B.listening]}),w.jsxs("div",{children:[w.jsx("span",{className:"font-bold text-gray-700",children:":"})," ",B.newTarget]})]}),B.notes&&w.jsx("div",{className:"mt-2 text-xs bg-white p-2 border rounded text-gray-600",children:B.notes})]},ne))]})})]}):w.jsx(Ld,{userId:s.id,userName:s.name,userRole:"student",recipients:[{id:"admin",name:"",role:"admin"}]}),w.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white p-4 shadow-[0_-4px_20px_rgba(0,0,0,0.1)] flex justify-center z-50",children:w.jsxs(Pe,{variant:"danger",onClick:e,className:"px-8 flex gap-2 items-center",children:[w.jsx(Cv,{className:"w-4 h-4"})," "]})}),d&&w.jsx("div",{className:"fixed inset-0 bg-black/50 z-[100] flex items-center justify-center p-4",children:w.jsxs(ht,{title:"  ",children:[w.jsx(rt,{label:"",type:"password",value:y,onChange:B=>v(B.target.value)}),w.jsxs("div",{className:"flex gap-2 mt-4",children:[w.jsx(Pe,{fullWidth:!0,variant:"secondary",onClick:()=>m(!1),children:""}),w.jsx(Pe,{fullWidth:!0,onClick:H,disabled:T,children:""})]})]})})]})},UT=()=>{const[s,e]=Ee.useState("HOME"),[n,i]=Ee.useState(null),[a,c]=Ee.useState(!1),d=(v,T)=>{i({type:v,data:T}),v==="admin"&&e("DASHBOARD_ADMIN"),v==="teacher"&&e("DASHBOARD_TEACHER"),v==="student"&&e("DASHBOARD_STUDENT")},m=()=>{i(null),e("HOME")},y=()=>{switch(s){case"HOME":return w.jsx(sa,{onNavigate:e});case"LOGIN_TEACHER":case"LOGIN_ADMIN":case"LOGIN_STUDENT":case"REGISTER_STUDENT":return w.jsx(LT,{view:s,onNavigate:e,onLoginSuccess:d});case"DASHBOARD_ADMIN":return(n==null?void 0:n.type)==="admin"?w.jsx(OT,{onLogout:m}):w.jsx(sa,{onNavigate:e});case"DASHBOARD_TEACHER":return(n==null?void 0:n.type)==="teacher"?w.jsx(bT,{teacher:n.data,onLogout:m}):w.jsx(sa,{onNavigate:e});case"DASHBOARD_STUDENT":return(n==null?void 0:n.type)==="student"?w.jsx(FT,{student:n.data,onLogout:m}):w.jsx(sa,{onNavigate:e});default:return w.jsx(sa,{onNavigate:e})}};return w.jsx("div",{className:"min-h-screen relative bg-gray-100 flex justify-center items-start pt-0 md:pt-4 font-amiri",children:w.jsxs("div",{className:"w-full max-w-md md:max-w-4xl bg-gradient-to-br from-bgStart to-bgEnd min-h-screen shadow-2xl relative flex flex-col md:rounded-xl overflow-hidden border-x border-gray-200",children:[w.jsx("header",{className:"sticky top-0 z-50 bg-secondary text-white shadow-md",children:w.jsxs("div",{className:"px-4 py-3 flex items-center gap-3 w-full",children:[w.jsx("div",{className:"shrink-0",children:a?w.jsx("div",{className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center border border-white/30",children:w.jsx(Vv,{className:"w-6 h-6 text-white/90"})}):w.jsx("img",{src:"sheikh.jpg",alt:"",className:"w-10 h-10 rounded-full object-cover border border-white/40 shadow-sm bg-white",onError:v=>{c(!0),v.currentTarget.style.display="none"}})}),w.jsx("h1",{className:"text-xl md:text-2xl font-bold whitespace-nowrap overflow-hidden text-ellipsis flex-1 leading-relaxed pt-1",children:"      "})]})}),w.jsx("main",{className:"flex-1 px-4 py-6 pb-28 overflow-x-hidden w-full",children:y()}),w.jsx("footer",{className:"absolute bottom-0 left-0 w-full bg-white/95 backdrop-blur-md shadow-[0_-4px_20px_rgba(0,0,0,0.08)] py-4 px-6 z-40 border-t border-gray-100 block",children:w.jsxs("div",{className:"flex flex-col md:flex-row justify-center items-center gap-3 text-sm font-bold text-gray-700",children:[w.jsx("span",{className:"text-gray-500 text-xs mb-1 md:mb-0",children:"  :"}),w.jsxs("div",{className:"flex flex-wrap justify-center gap-3",children:[w.jsxs("a",{href:"https://wa.me/201060936428",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-white bg-[#25D366] hover:bg-[#20bd5a] px-3 py-1.5 rounded-full transition-all shadow-sm hover:shadow-md",children:[w.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:w.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.272-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.67-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.076 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421-7.403h-.004a9.87 9.87 0 00-4.951 1.263l-.355.192-.368-.06 1.41 5.209.9.003c1.231-1.187 2.927-1.9 4.773-1.9 4.97 0 9.005 4.028 9.005 9.009 0 4.983-4.032 9.015-9.009 9.015-4.981 0-9.01-4.032-9.01-9.015 0-1.946.648-3.835 1.8-5.36l.134-.341-.086-.368-1.41-5.209-.37-.056.192-.355A9.87 9.87 0 0112.051 2c5.495 0 9.973 4.478 9.973 9.973 0 5.495-4.478 9.973-9.973 9.973-5.495 0-9.973-4.478-9.973-9.973 0-2.15.697-4.243 1.977-6.004"})}),w.jsx("span",{className:"font-sans pt-0.5",children:"01060936428"})]}),w.jsxs("a",{href:"https://t.me/SaaD2961",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-white bg-[#0088cc] hover:bg-[#0077b5] px-3 py-1.5 rounded-full transition-all shadow-sm hover:shadow-md",children:[w.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:w.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 11.944 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})}),w.jsx("span",{className:"font-sans pt-0.5",children:"@SaaD2961"})]})]})]})})]})})},s_=document.getElementById("root");if(!s_)throw new Error("Could not find root element to mount to");const zT=Ev.createRoot(s_);zT.render(w.jsx(pv.StrictMode,{children:w.jsx(UT,{})}));
